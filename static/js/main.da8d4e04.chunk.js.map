{"version":3,"sources":["context/AuthenticationContext.tsx","Utils/ProtectedRoute.tsx","components/common/HangBang.tsx","components/Home/Main/LandingPage/CreateStudentDrawer/CreateStudentForm.tsx","components/Home/Main/LandingPage/CreateStudentDrawer/index.tsx","components/common/StudentStatus.tsx","components/Home/Main/LandingPage/StudentList/index.tsx","components/Home/Main/LandingPage/CreateStudentDrawer/FilterModal.tsx","components/common/LoadingCenter.tsx","components/Home/Main/Modals/ReportOneModal.tsx","components/common/ClientQueries.tsx","components/Home/Main/Modals/ConfirmPaymentModal.tsx","Utils/math.tsx","components/Home/Main/Modals/RefundList.tsx","components/Home/SingleStudent/Modals/ChangeGradeModal.tsx","components/Home/Main/index.tsx","components/Home/SingleStudent/Modals/ReserveModal.tsx","components/Home/SingleStudent/Modals/ReportListModal.tsx","components/Home/SingleStudent/Modals/SwapModal.tsx","components/Home/SingleStudent/Modals/ForceStatusModal.tsx","components/Home/SingleStudent/Header.tsx","components/Home/SingleStudent/StudentInfo/Basic.tsx","components/Home/SingleStudent/StudentInfo/Timeline.tsx","components/Home/SingleStudent/index.tsx","components/Home/ReportOnes/CreateReportModal.tsx","components/common/trangthai.tsx","components/Home/ReportOnes/ReportList/ReportList.tsx","components/Home/ReportOnes/Modals/FilterReportModal.tsx","components/common/utils.tsx","components/Home/ReportOnes/index.tsx","components/Home/SingleReportOne/AddStdModal.tsx","components/Home/SingleReportOne/FilterModal.tsx","components/Home/SingleReportOne/StudentsList.tsx","components/Home/SingleReportOne/index.tsx","components/Home/Profile/ChangePwdForm.tsx","components/Home/Profile/index.tsx","components/Home/UserMgt/MainComps/UsersList.tsx","components/Home/UserMgt/MainComps/CreateUserModal.tsx","components/Home/UserMgt/MainComps/FilterModal.tsx","components/Home/UserMgt/MainComps/Header.tsx","components/Home/UserMgt/index.tsx","components/Home/SingleUser/UserInfo.tsx","components/Home/SingleUser/ResetPwdModal.tsx","components/Home/SingleUser/index.tsx","components/Home/Report/comps/RecordsList.tsx","components/Home/Report/comps/RecordsHeader.tsx","components/Home/Report/comps/Overview.tsx","components/Home/Report/index.tsx","components/Home/index.tsx","components/Login/LoginForm.tsx","components/Login/index.tsx","App.tsx","reportWebVitals.ts","Utils/ApolloClient.tsx","index.tsx"],"names":["roles","contextDefaultValue","authContext","createContext","AuthProvider","children","React","useState","user","setCurrentUser","Provider","value","setToken","token","localStorage","setItem","setUser","u","getUser","logout","getToken","getItem","useAuth","useContext","ProtectedRoute","rest","render","location","to","pathname","state","from","hangbang","Option","Select","UPLOAD_AVATAR","gql","fLayout","wrapperCol","span","labelCol","CreateStudentForm","createStudent","close","Form","useForm","form","imgList","setImgList","cmt1","setCmt1","cmt2","setCmt2","useMutation","uploadFile","creating","setCreating","onAvatarChange","key","file","newImgsList","fileList","onPreview","a","src","url","Promise","resolve","reader","FileReader","readAsDataURL","originFileObj","onload","result","image","Image","window","open","document","write","outerHTML","customUpload","field","onSuccess","variables","then","res","data","message","error","oldData","getFieldsValue","uploadAvatar","setFieldsValue","console","log","create","ngaysinh","moment","toDate","locale","viVN","Item","rules","required","name","label","format","placeholder","align","size","style","display","textAlign","modalTitle","aspect","customRequest","maxCount","listType","onChange","length","hidden","Object","keys","hangbangs","map","k","shape","loading","onClick","type","StudentDrawer","visible","onClose","width","title","status","StudentList","students","currentPage","setCurrentPage","pageSize","rowSelection","setSort","sort","columns","dataIndex","text","record","textDecoration","trangthai","CheckCircleTwoTone","twoToneColor","sorter","parseFloat","randomId","_","baocao1","role","_id","baocao2","direction","flexGrow","pagination","filters","extra","s","order","rowKey","spinning","indicator","LoadingOutlined","fontSize","dataSource","rowClassName","total","page","showSizeChanger","current","showQuickJumper","grades","FilterModal","onCancel","filter","onOk","setFilter","onOkPress","onFinish","g","LoadinCenter","marginTop","ReportListModal","onMove","query","dataKey","useLazyQuery","fetchPolicy","loadReports","moving","toggleMoving","useEffect","load","moveStds","report","reports","renderItem","item","actions","stdCount","cursor","Meta","description","desc","LOAD_SINGLE_STD","REQUEST_CONFIRM_PAYMENT","CONFIRM_PAYMENT","REQUEST_WITHDRAW","CONFIRM_WITHDRAW","CANCEL_WITHDRAW_REQUEST","DELETE_STUDENT","MOVE_TO_R1","CANCEL_REQUEST_RESERV","CONFIRM_RESERVE_BC1","LOAD_A_REPORT","APPROVE_RESERV","APPROVE_R1","REMOVE_FROM_REPORT","LOAD_SINGLE_REPORT","MARK_COMPLETED","REQUEST_CONFIRM_P_2","CONFIRM_PAYMENT_TWO","REQUEST_RESERVE_RESULT","CANCEL_RESERVE_RESULT","CREATE_A_REPORT","CONFIRM_RESERVE_RESULT","REQUEST_RETURN_RESULT","CREATE_BREPORT","LOAD_B_REPORTS","LOAD_SINGLE_B_REPORT","MOVE_TO_R2","APPROVE_B_REPORT","REJECT_WD_FN","CONFIRM_WD_GD","REJECT_WD_GD","MARK_GRAD","MARK_FAIL","MARK_FOR_RETEST","RESERVE_RESULT","ADMIN_CONFIRM_RETURN","ADMIN_MARK_FINISH","ADMIN_MARK_REMOVE","ADMIN_MARK_FINAL_FAIL","TEACHER_REQUEST_CONFIRM_RETEST_FEE","ADM_CONFIRM_RETEST_FEE","T_REQUEST_SWAP","ADM_CONFIRM_SWAP","FORCE_STATUS","LOAD_RECORDS","T_REQUEST_CHANGE_GRADE","ADMIN_ACCEPT_CHANGE_GRADE","ADMIN_REJECT_CHANGE_GRADE","FN_ACCEPT_CHANGE_GRADE","FN_REJECT_CHANGE_GRADE","T_REQUEST_RETURN_FINAL_TEST","ADMIN_ACCEPT_RETURN_FINAL_TEST","CPModal","confirm","command","selected","working","toggleWorking","onConfirm","amount","Error","okButtonProps","addonBefore","numberWithCommas","x","toString","replace","RefundModal","student","refund","ten","ChangeGradeModal","toggleLoading","hangmoi","itemLayout","CREATE_STUDENT","LOAD_STUDENTS","TLandingPage","createDrw","toggleCreateDrw","refetchQueries","loadStudents","loadingStudents","onCompleted","exportFile","exportXLSX","exporting","filterModal","toggleFilterModal","reportModal","toggleReportModal","bc2Modal","toggleBC2Modal","moveR1","moveR2","requestConfirmP","confirmP","requestWD","cfWithdraw","requestConfirmP2","confirmP2","markComplete","requestReturnResult","rejectWDFN","acceptWDGD","rejectWDGD","markGrad","markFail","markforretest","reserveResult","admConfirmReturn","admMarkFinish","admMarkRemove","admMarkFinalFail","tRequestCRF","admCFRF","tRequestChangeGrd","admAcceptChangeGrd","admRejectChangeGrd","fnAcceptChangeGrd","fnRejectChangeGrd","tRequestRetestFinal","aAcceptRetestFinal","refundModal","toggleRefundModal","changeGradeModal","toggleChangeGradeModal","mobile","created","setSelected","withdrawModal","toggleWDRModal","cpModal","toggleCPModal","cpModalTitle","setCPModalTitle","confirmCmd","setConfirmCmd","limit","createStd","notFilterEmpty","matchingKey","find","Boolean","selectedRowKeys","doActionWithConfirm","msg","Modal","content","e","doAction","confirmFinalFail","reason","ws","XLSX","utils","json_to_sheet","std","StudentStatus","wb","book_new","book_append_sheet","writeFile","onExportClick","MenuOption","theme","icon","PlusOutlined","SubMenu","CaretLeftFilled","DollarOutlined","PoundOutlined","TransactionOutlined","SwapOutlined","RollbackOutlined","ReloadOutlined","OrderedListOutlined","UnorderedListOutlined","SwapLeftOutlined","CheckOutlined","DeleteOutlined","CheckSquareOutlined","ExclamationOutlined","RetweetOutlined","CheckCircleOutlined","color","CloseOutlined","extras","DownloadOutlined","danger","FilterOutlined","trigger","overlay","EllipsisOutlined","indexOf","ycdh","ReserveModal","rStatus","AvailableReportModal","LOAD_SWAP_STDS","SwapModal","requestSwp","loadingStd","onSwap","replacement","success","ForceStatusModal","Header","moveToR1","deleteStudent","loadingReport","movetoR2","confirmAction","markFailed","changeStatus","reservModal","toggleReservModal","deleteModal","toggleDeleteModdal","r2Modal","toggleR2Modal","swapModal","toggleSwapModal","statusModal","toggleStatusModal","confirmCMD","setConfirmCMD","cpTitle","setCPTitle","confirmP1","confirmWithdraw","tRequestChangeGrade","history","useHistory","confirmReserv","confirmDelete","confirmMoveToR1","confirmMoveR2","switchStatus","subTitle","items","push","disabled","DollarCircleOutlined","UsergroupAddOutlined","UserSwitchOutlined","CalendarOutlined","DeleteTwoTone","WarningOutlined","CheckCircleFilled","ExclamationCircleOutlined","InfoCircleOutlined","FieldTimeOutlined","createMenu","onBack","goBack","Title","Typography","BasicInfo","layout","level","quequan","anh34","redStatus","successStatus","pendingSts","StudentTimeline","mode","h","Icon","RightCircleOutlined","ClockCircleOutlined","dot","date","SingleStudent","id","useParams","confirmModal","toggleConfirmModal","loadStd","requestConfirmPayment","loadAReports","loadAReport","loadingReports","cancelWithdraw","delStudent","mover1","cancelRequestResrv","confirmRequestResrv","confirmPaymentTwo","requestReserveResult","cancelReserveResult","confirmReserveResult","confirmWDGD","markForRetest","reservResult","confirmReturn","markFinish","markRemove","admMarkFFail","fnConfirmRF","admConfirmSwp","forceStatus","admAcceptChgGrd","admRejectChgGrd","fnAcceptChgGrd","fnRejectChgGrd","tRequestRFinalTest","aAcceptRFinalTest","commands","action","modalContent","loadSingleStd","sm","md","Basic","CreateReportModal","toggleCreating","onCreate","trangthaibaocao","ReportList","trangthais","ReportFileterModal","hb","ReportOnes","createQuery","loadQuery","createReportOne","createMdl","toggleCreateMdl","reportData","setPage","createReport","reportKey","SEARCH_STUDENTS_4_BC1","AddStdModal","searchTimeout","searchStds","searchStd4bc1","adding","toggleAdding","onKeywordChange","clearTimeout","setTimeout","target","add","idx","concat","onStudentClick","MobileOutlined","IdcardOutlined","changeFilter","StudentsList","removeStudents","addStudents","markComp","removeModal","toggleRemoveModal","addModal","toggleAddModal","__","index","t","remove","MinusOutlined","stds","SingleAttReport","loadReport","approveReport","addStd","removeStd","params","loadR","approveR","approving","markCompleted","addToR1","removeStds","update","approve","column","createdBy","CHANGE_PWD","PasswordForm","changePwd","currentPwd","newPwd","confirmNewPwd","resetFields","Password","Profile","justify","xs","lg","UsersList","users","deleteUser","deleting","toggleDeleting","LockOutlined","_text","CreateUserModal","createU","createUser","SettingHeader","createModal","toggleCreateModal","userInput","isFilterEmpty","values","every","f","email","SearchOutlined","LOAD_USERS","CREATE_USER","DELETE_USER","UserMgt","loadUsers","loadUsersR","BasicInfor","ResetPwdModal","setPwd","password","confirmPassword","min","LOAD_USER","LOCK_USER","RESET_PWD","SingleUser","loadUser","disableUser","resetPwd","pwdModal","togglePwdModal","confirmLock","updatePwd","UnlockOutlined","KeyOutlined","UserInfo","reasons","RecordsList","records","totalRecords","RangePicker","DatePicker","RecordHeader","start","setStart","end","setEnd","defaultPickerValue","startOf","endOf","d","Overview","range","totalAmount","closable","Report","loadRecords","Content","Layout","GET_USER","Home","me","menu","UserOutlined","LogoutOutlined","className","SnippetsOutlined","SolutionOutlined","SettingOutlined","MoneyCollectOutlined","path","exact","Main","LOGIN","LoginForm","login","onLogin","catch","err","htmlType","Login","App","component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","httpLink","createUploadLink","require","uri","process","authMiddleware","ApolloLink","operation","forward","setContext","headers","client","ApolloClient","cache","InMemoryCache","typePolicies","BasicPurchase","keyFields","PurchaseList","link","ReactDOM","StrictMode","ApolloProvider","getElementById"],"mappings":"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","file":"static/js/main.da8d4e04.chunk.js","sourcesContent":["import React, { createContext, useContext } from 'react'\r\n\r\nexport enum roles {OWNER = 'OWNER', AGENT='AGENT'}\r\n\r\nexport interface User {\r\n  email: string\r\n  expDate: String | null\r\n  name: String\r\n  profile: {\r\n    avatar: string\r\n  },\r\n  role: string\r\n  _id: string\r\n}\r\n\r\ntype TAuthContext = {\r\n  setUser:(user: User) => void,\r\n  getUser: () => User,\r\n  setToken: (token:string) => void,\r\n  logout: () => void,\r\n  getToken: () => string,\r\n  // setToken: \r\n}\r\n\r\nconst contextDefaultValue: TAuthContext = { } as TAuthContext\r\n\r\nconst authContext = createContext(contextDefaultValue)\r\n\r\nconst AuthProvider: React.FC = ({ children }) => {\r\n  const [user, setCurrentUser] = React.useState({} as User)\r\n  const setToken = (token: string) => localStorage.setItem('ACCESS_TOKEN', token)\r\n  const getToken = () => localStorage.getItem('ACCESS_TOKEN') || ''\r\n  const setUser = (u: User) => setCurrentUser(u)\r\n  const getUser = () => user\r\n  const logout = () => localStorage.setItem('ACCESS_TOKEN', '')\r\n  return (\r\n    <authContext.Provider value={{ setToken, setUser, getUser, logout, getToken}}>\r\n      {children}\r\n    </authContext.Provider>\r\n  )\r\n}\r\n\r\nexport default AuthProvider\r\nexport const useAuth = () => useContext(authContext)","import React from 'react'\r\nimport {\r\n  Route,\r\n  Redirect\r\n} from 'react-router-dom'\r\nimport {\r\n  useAuth\r\n} from '../context/AuthenticationContext'\r\n\r\ninterface IProps {\r\n  path: string\r\n}\r\n\r\nconst ProtectedRoute: React.FC<IProps> = ({ children, ...rest }) => {\r\n  const { getToken } = useAuth()\r\n  const token = getToken()\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={({ location }) =>\r\n        token && token!=='' ? (\r\n          children\r\n        ) : (\r\n          <Redirect\r\n            to={{\r\n              pathname: \"/login\",\r\n              state: { from: location }\r\n            }}\r\n          />\r\n        )\r\n      }\r\n    />\r\n  )\r\n}\r\n\r\nexport default ProtectedRoute","const hangbang = {\r\n    'A1': 'Lái xe moto, xe gắn máy dưới 175cm3',\r\n    'A2': 'Lái xe moto, xe gắn máy trên 175cm3',\r\n    'B1': 'Lái xe ô tô dưới 9 chỗ - không KD',\r\n    'B2': 'Lái xe ô to trên 9 chỗ - kinh doanh',\r\n    'C': 'Lái xe tải dưới xxx kg',\r\n    'D': 'Lái xe tải - trên xxx kg',\r\n    'E': 'Lái xe tải bự',\r\n    'F': 'Lái xe container, xe đầu kéo xxx',\r\n}\r\nexport default hangbang","import React from 'react'\r\nimport {\r\n    Form,\r\n    Input,\r\n    DatePicker,\r\n    Upload,\r\n    ConfigProvider,\r\n    Button,\r\n    Space,\r\n    message,\r\n    Select\r\n} from 'antd'\r\nimport ImgCrop from 'antd-img-crop'\r\nimport {\r\n    gql,\r\n    useMutation\r\n} from '@apollo/client'\r\nimport viVN from 'antd/lib/locale/vi_VN'\r\nimport moment from 'moment'\r\nimport hangbangs from '../../../../common/HangBang'\r\n\r\nconst {Option} = Select\r\n\r\nconst UPLOAD_AVATAR = gql`\r\n    mutation uploadAvatar($file: Upload!) {\r\n        uploadAvatar(file: $file) {\r\n            url\r\n        }\r\n    }\r\n`\r\n\r\nconst fLayout = {\r\n    wrapperCol: { span: 18 },\r\n    labelCol: { span: 6 }\r\n}\r\ninterface CTypes {\r\n    createStudent: (data: any) => void\r\n    close: () => void\r\n}\r\nconst CreateStudentForm: React.FC<CTypes> = ({\r\n    createStudent,\r\n    close\r\n}) => {\r\n    const [form] = Form.useForm()\r\n    const [imgList, setImgList] = React.useState([])\r\n    const [cmt1, setCmt1] = React.useState([])\r\n    const [cmt2, setCmt2] = React.useState([])\r\n    const [uploadFile] = useMutation(UPLOAD_AVATAR)\r\n    const [creating, setCreating] = React.useState(false)\r\n    const onAvatarChange = (key: string, { file, fileList: newImgsList }: any) =>  {\r\n        if (key === 'anh34') {\r\n            setImgList(newImgsList)\r\n        }\r\n        if (key === 'cmt1') {\r\n            setCmt1(newImgsList)\r\n        }\r\n        if (key === 'cmt2') {\r\n            setCmt2(newImgsList)\r\n        }\r\n    }\r\n    const onPreview = async (file:any) => {\r\n        let src = file.url;\r\n        if (!src) {\r\n            src = await new Promise(resolve => {\r\n                const reader = new FileReader();\r\n                reader.readAsDataURL(file.originFileObj);\r\n                reader.onload = () => resolve(reader.result);\r\n            });\r\n        }\r\n        const image = new Image();\r\n        image.src = src;\r\n        const imgWindow:any = window.open(src);\r\n        imgWindow.document.write(image.outerHTML);\r\n    };\r\n    const customUpload = async (field:string, { file, onSuccess }: any) => {\r\n        await uploadFile({\r\n            variables: {\r\n                file\r\n            }\r\n        })\r\n        .then(res => {\r\n            if (!res || !res.data) {\r\n                message.error('Không tải lên được hình ảnh')\r\n            }\r\n            // console.log(res)\r\n            const oldData = form.getFieldsValue()\r\n            oldData[field] = res.data.uploadAvatar.url\r\n            form.setFieldsValue(oldData)\r\n            console.log(oldData)\r\n        })\r\n        onSuccess('ok')\r\n    }\r\n    const create = async () => {\r\n        setCreating(true)\r\n        try {\r\n            const data = form.getFieldsValue()\r\n            console.log(data)\r\n            await createStudent({\r\n                ...data,\r\n                ngaysinh: moment(data.ngaysinh).toDate()\r\n            })\r\n        } catch (e) {\r\n            message.error('Đã có lỗi trong quá trình xử lý, vui lòng thử lại sau')\r\n        }\r\n        setCreating(false)\r\n        form.setFieldsValue({})\r\n        close()\r\n    }\r\n    return (\r\n        <ConfigProvider locale={viVN}>\r\n            <Form form={form} {...fLayout}>\r\n                <Form.Item rules={[\r\n                    {\r\n                        required: true,\r\n                        message: \"Bắt buộc phải có\"\r\n                    }\r\n                ]} name=\"ten\" label=\"Họ và tên học viên\">\r\n                    <Input />\r\n                </Form.Item>\r\n                <Form.Item name=\"ngaysinh\" label=\"Ngày tháng năm sinh\" rules={[{required: true, message: \"Bắt buộc phải có\"}]}>\r\n                    <DatePicker\r\n                        format=\"DD/MM/YYYY\"\r\n                        placeholder=\"Chọn ngày tháng năm sinh\"\r\n                    />\r\n                </Form.Item>\r\n                <Form.Item name=\"cmnd\" label=\"Số CMND / CCCD\" rules={[{required: true, message: \"Bắt buộc phải có\"}]}>\r\n                    <Input />\r\n                </Form.Item>\r\n                <Form.Item name=\"quequan\" label=\"Quê Quán\" rules={[{ required: true, message: 'Trường bắt buộc' }]}>\r\n                    <Input />\r\n                </Form.Item>\r\n                <Form.Item label=\"Upload Ảnh\">\r\n                    <Space align=\"center\" size=\"large\">\r\n                        <div style={{ display: \"block\", textAlign: 'center'}}>\r\n                            <p>Ảnh thẻ 3x4</p>\r\n                            <ImgCrop\r\n                                modalTitle=\"căn chỉnh ảnh\"\r\n                                aspect={3 / 4}\r\n                            >\r\n                                <Upload\r\n                                    customRequest={(data) => customUpload('anh34', data)}\r\n                                    maxCount={1}\r\n                                    listType=\"picture-card\"\r\n                                    fileList={imgList}\r\n                                    onChange={(data) => onAvatarChange('anh34', data)}\r\n                                    onPreview={onPreview}\r\n                                    >\r\n                                    {imgList.length < 1 && '+ Upload'}\r\n                                </Upload>\r\n                            </ImgCrop>\r\n                        </div>\r\n                        <div style={{ display: \"block\", textAlign: 'center'}}>\r\n                            <p>Ảnh mặt trước CMT</p>\r\n                            <ImgCrop\r\n                                modalTitle=\"căn chỉnh ảnh\"\r\n                                aspect={5 / 3}\r\n                                >\r\n                                <Upload\r\n                                    customRequest={(data) => customUpload('cmt1', data)}\r\n                                    maxCount={2}\r\n                                    listType=\"picture-card\"\r\n                                    fileList={cmt1}\r\n                                    onChange={(data) => onAvatarChange('cmt1', data)}\r\n                                    onPreview={onPreview}\r\n                                    >\r\n                                    {cmt1.length < 1 && '+ Upload'}\r\n                                </Upload>\r\n                            </ImgCrop>\r\n                        </div>\r\n                        <div style={{ display: \"block\", textAlign: 'center'}}>\r\n                            <p>Ảnh mặt sau CMT</p>\r\n                            <ImgCrop\r\n                                modalTitle=\"căn chỉnh ảnh\"\r\n                                aspect={5 / 3}\r\n                            >\r\n                                <Upload\r\n                                    customRequest={(data) => customUpload('cmt2', data)}\r\n                                    maxCount={1}\r\n                                    listType=\"picture-card\"\r\n                                    fileList={cmt2}\r\n                                    onChange={(data) => onAvatarChange('cmt2', data)}\r\n                                    onPreview={onPreview}\r\n                                >\r\n                                    {cmt2.length < 1 && '+ Upload'}\r\n                                </Upload>\r\n                            </ImgCrop>\r\n                        </div>\r\n                    </Space>\r\n                </Form.Item>\r\n                <Form.Item hidden name=\"anh34\" label=\"Ảnh 3 x 4\" rules={[{ required: true, message: 'Phải có một ảnh 3x4'}]} />\r\n                <Form.Item hidden name=\"cmt1\" label=\"Ảnh CMT/CCCD mặt trước\" rules={[{ required: true, message: 'Phải có một ảnh' }]} />\r\n                <Form.Item hidden name=\"cmt2\" label=\"Ảnh CMT/CCCD mặt sau\" rules={[{ required: true, message: 'Phải có một ảnh' }]} />\r\n                <Form.Item label=\"Hạng bằng lái\" name=\"hangbang\">\r\n                    <Select>\r\n                        {Object.keys(hangbangs).map(k => (\r\n                            <Option value={k} key={k}>{`${k} - ${hangbangs[k as keyof Object]}`}</Option>\r\n                        ))}\r\n                    </Select>\r\n                </Form.Item>\r\n                <Form.Item name=\"mobile\" label=\"Số Điện thoại\">\r\n                    <Input />\r\n                </Form.Item>\r\n                <Space>\r\n                    <Button shape=\"round\" loading={creating} onClick={() => create()} type=\"primary\">Tạo hồ sơ</Button>\r\n                    <Button shape=\"round\" onClick={() => close()}>Hủy</Button>\r\n                </Space>\r\n            </Form>\r\n        </ConfigProvider>\r\n    )\r\n}\r\nexport default CreateStudentForm","import React from 'react'\r\nimport {\r\n    Drawer,\r\n} from 'antd'\r\nimport CreateStudentForm from './CreateStudentForm'\r\n\r\n\r\ninterface CTypes {\r\n    visible: boolean\r\n    onClose: () => void\r\n    createStudent: (data: any) => void\r\n}\r\nconst StudentDrawer: React.FC<CTypes> = ({\r\n    visible,\r\n    onClose,\r\n    createStudent\r\n}) => {\r\n    return (\r\n        <Drawer\r\n            visible={visible}\r\n            onClose={onClose}\r\n            width=\"700\"\r\n            title=\"Tạo Hồ Sơ mới\"\r\n        >\r\n            <CreateStudentForm close={onClose} createStudent={createStudent} />\r\n        </Drawer>\r\n    )\r\n}\r\nexport default StudentDrawer\r\n","const status:Record<string,string> = {\r\n    'MOI_TAO': \"Hồ sơ mới\",\r\n    'CHO_XAC_NHAN_TT1': \"Chờ XNTT đợt 1\",\r\n    'CHO_VAO_BC_1': \"Chờ vào BC1\",\r\n    'DANG_YC_DOI_HANG':\"GV yêu cầu đổi hạng bằng\",\r\n    'DAO_TAO_OK_DOI_HANG':\"Đào tạo chấp thuận đổi hạng bằng\",\r\n    'KE_TOAN_OK_DOI_HANG':\"Kế toán chấp thuận đổi hạng bằng\",\r\n    'DANG_TRONG_BC_1': \"Đã xếp vào BC1\",\r\n    // 'YEU_CAU_RUT_HS': \"Đang YC rút hồ sơ\",\r\n    'CHO_XN_HOAN_HUY_FN': \"Chờ kế toán XN rút HS\",\r\n    'CHO_XN_HOAN_HUY_GD': \"Chờ GD phê duyệt rút HS\",\r\n    'DA_RUT_HS': \"Đã rút HS\",\r\n    'DANG_YC_DOI_CHO': \"Đang yêu cầu đổi chỗ\",\r\n    'XAC_NHAN_BC_1': \"Đang học\",\r\n    // 'YEU_CAU_BAO_LUU_HOC':,\r\n    // 'DANG_BAO_LUU_HOC':,\r\n    'DA_HOC_XONG': \"Hoàn thành học\",\r\n    'DA_BO_HOC': \"Đã bỏ\",\r\n    'CHO_XAC_NHAN_TT2': \"Chờ XNTT đợt 2\",\r\n    'CHO_THI_TN': \"Chờ thi TN\",\r\n    'TRUOT_TN': 'Trượt Tốt nghiệp',\r\n    'CHO_VAO_BC_2': \"Chờ vào BC2\",\r\n    // 'YEU_CAU_BAO_LUU_THI':,\r\n    'DANG_BAO_LUU_THI': \"Đang bảo lưu\",\r\n    'DANG_YC_QUAY_LAI_THI': \"Đang yêu cầu quay lại thi\",\r\n    'DANG_TRONG_BC_2': \"Đang trong BC2\",\r\n    // 'XAC_NHAN_BC_2':,\r\n    'THI_TRUOT_LT': \"Thi trượt lý thuyết\",\r\n    'THI_TRUOT_SH': \"Thi trượt sa hình\",\r\n    'THI_TRUOT_DT': \"Thi trượt đường trường\",\r\n    'CHO_XNTT_TL_LT': 'Chờ XNTT thi lại lý thuyết',\r\n    'CHO_XNTT_TL_SH': 'Chờ XNTT thi lại sa hình',\r\n    'CHO_XNTT_TL_DT': 'Chờ XNTT thi lại đường trường',\r\n    'DA_XNTT_THI_LAI': 'Đã Thanh toán phí thi lại',\r\n    'DANG_YC_QUAY_LAI_THI_SH': 'Đang yêu cầu quay lại thi Sát hạch',\r\n    'HOAN_THANH': \"Đã hoàn thành\"\r\n}\r\nexport default status","import React from 'react'\r\nimport moment from 'moment'\r\nimport {\r\n    Table,\r\n    Pagination,\r\n    Space\r\n} from 'antd'\r\nimport {\r\n    Link\r\n} from 'react-router-dom'\r\nimport {\r\n    LoadingOutlined,\r\n    CheckCircleTwoTone \r\n} from '@ant-design/icons';\r\nimport './style.css'\r\nimport status from '../../../../common/StudentStatus'\r\nimport {\r\n    useAuth\r\n} from '../../../../../context/AuthenticationContext'\r\nimport { ColumnGroupType, ColumnType } from 'antd/lib/table';\r\n\r\ninterface cType {\r\n    students: {\r\n        students:any[]\r\n        total: number\r\n    }\r\n    loading: boolean\r\n    currentPage: number\r\n    pageSize: number\r\n    setCurrentPage: (page: number) => void\r\n    rowSelection: {\r\n        onChange: (keys: any) => void\r\n        selectedRowKeys: string[]\r\n    },\r\n    sort: Record<string,any>\r\n    setSort: (sort: Record<string, any>) => void\r\n}\r\n\r\nconst StudentList:React.FC<cType> = ({\r\n    students,\r\n    loading,\r\n    currentPage,\r\n    setCurrentPage,\r\n    pageSize,\r\n    rowSelection,\r\n    sort,\r\n    setSort\r\n}) => {\r\n    // const [selected, setSelected] = React.useState<string[]>([])\r\n    const { getUser } = useAuth()\r\n    const user = getUser()\r\n    const columns:any = [\r\n        {\r\n            title: 'Mã hồ sơ',\r\n            dataIndex: 'randomId',\r\n            render: (text:string, record: any) => {\r\n                return (\r\n                    <Space style={{ textDecoration: record.trangthai === 'DA_RUT_HS' ? 'line-through': 'none'}}>\r\n                        {record.trangthai === 'HOAN_THANH' && <CheckCircleTwoTone twoToneColor=\"#52c41a\" /> }\r\n                        {text}\r\n                    </Space>\r\n                )\r\n            }\r\n        },\r\n        {\r\n            title: 'Ngày tạo',\r\n            dataIndex: 'created',\r\n            sorter: true, \r\n            render: (text: string) => <span>{moment(parseFloat(text)).format('DD/MM/YYYY')}</span>\r\n        },\r\n        {\r\n            title: 'Tên',\r\n            dataIndex: ['ten'],\r\n            render: (text: string, record: any) =><Link to={`/std/${record.randomId}`}>{text}</Link>\r\n        },\r\n        {\r\n            title: 'Ngày sinh',\r\n            dataIndex: 'ngaysinh',\r\n            render: (text: string) => {\r\n                return (<span>{moment(parseFloat(text)).format('DD/MM/YYYY')}</span>)\r\n            }\r\n        },\r\n        {\r\n            title: 'Số Điện thoại',\r\n            dataIndex: 'mobile'\r\n        },\r\n        {\r\n            title: 'Hạng bằng lái',\r\n            dataIndex: 'hangbang'\r\n        },\r\n        {\r\n            title: 'Trạng Thái',\r\n            dataIndex: 'trangthai',\r\n            render: (text: string) => {\r\n                \r\n                return <span>{status[text as keyof Object]}</span>\r\n            }\r\n        },\r\n        {\r\n            title: 'Báo cáo 1',\r\n            render: (_: string, record: any) => {\r\n                if (record.baocao1) {\r\n                    if (user.role === 'TEACHER') {\r\n                        return <span>{record.baocao1.name}</span>\r\n                    } else {\r\n                        return (<Link to={`/rp1/${record.baocao1._id}`}>{record.baocao1.name}</Link>)\r\n\r\n                    }\r\n                }\r\n                return (<span>----</span>)\r\n            }\r\n        },\r\n        {\r\n            title: 'Báo cáo 2',\r\n            render: (_: string, record: any) => {\r\n                if (record.baocao2) {\r\n                    if (user.role === 'TEACHER') {\r\n                        return <span>{record.baocao1.name}</span>\r\n                    }\r\n                    if (user.role === 'MANAGER' || user.role === 'ADMIN') {\r\n                        return (<Link to={`/rp1/${record.baocao2._id}`}>{record.baocao2.name}</Link>)\r\n                    }\r\n                }\r\n                return (<span>----</span>)\r\n            }\r\n        }\r\n    ]\r\n    // const rowSelection = {\r\n    //     onChange: (keys: any) => setSelected(keys),\r\n    //     selectedRowKeys: selected\r\n    // }\r\n    return (\r\n        <div style={{display: 'flex'}}>\r\n            <Space direction=\"vertical\" size=\"large\" style={{flexGrow: 1}}>\r\n                <Table\r\n                    onChange={(pagination, filters, sorter:any, extra) => {\r\n                        if (sorter) {\r\n                            let s:Record<string,any> = {}\r\n                            s[sorter.field as keyof Object] = sorter.order === 'descend' ? 1 : -1\r\n                            setSort(s)\r\n                        }\r\n                    }}\r\n                    rowKey=\"_id\"\r\n                    loading={{\r\n                        spinning: loading,\r\n                        indicator: <LoadingOutlined style={{fontSize: 24}} />\r\n                    }}\r\n                    columns={columns}\r\n                    dataSource={students.students}\r\n                    pagination={false}\r\n                    rowClassName={(record:any) => {\r\n                        if (record.trangthai === 'DA_RUT_HS') {\r\n                            return 'disabledStudent'\r\n                        }\r\n                        if (record.trangthai === 'DA_BO_HOC') {\r\n                            return 'disabledStudent'\r\n                        }\r\n                        return ''\r\n                    }}\r\n                    rowSelection={rowSelection}\r\n                />\r\n                {students.total > pageSize && (\r\n                    <Pagination\r\n                        onChange={(page) => setCurrentPage(page)}\r\n                        showSizeChanger={false}\r\n                        current={currentPage}\r\n                        total={students.total}\r\n                        pageSize={pageSize}\r\n                        size=\"small\"\r\n                        showQuickJumper={false}\r\n                    />\r\n                )}\r\n            </Space>\r\n        </div>\r\n    )\r\n}\r\nexport default StudentList","import React from 'react'\r\nimport {\r\n    Modal,\r\n    Form,\r\n    Input,\r\n    Select\r\n} from 'antd'\r\nimport status from '../../../../common/StudentStatus'\r\n\r\ntype CType = {\r\n    visible: boolean\r\n    onCancel: () => void\r\n    onOk: () => void,\r\n    filter: Record<string,any>\r\n    setFilter: (filter: Record<string,any>) => void\r\n}\r\n\r\n\r\nconst grades = [\r\n    'A1',\r\n    'A2',\r\n    'B1',\r\n    'B2',\r\n    'C',\r\n    'D',\r\n    'E',\r\n    'F'\r\n]\r\n\r\nconst FilterModal: React.FC<CType> = ({\r\n    visible,\r\n    onCancel,\r\n    onOk,\r\n    filter,\r\n    setFilter\r\n}) => {\r\n    const [form] = Form.useForm()\r\n    form.setFieldsValue(filter)\r\n\r\n    const onOkPress = () => {\r\n        setFilter({\r\n            ...form.getFieldsValue()\r\n        })\r\n        onCancel()\r\n    }\r\n\r\n    return (\r\n        <Modal\r\n            title=\"Lọc hồ sơ\"\r\n            visible={visible}\r\n            onCancel={onCancel}\r\n            onOk={onOkPress}\r\n        >\r\n            <Form form={form} onFinish={onOkPress} labelCol={{ span: 6 }} wrapperCol={{span: 18}} >\r\n                <Form.Item label=\"Mã hồ sơ\" name=\"randomId\">\r\n                    <Input />\r\n                </Form.Item>\r\n                <Form.Item name=\"ten\" label=\"Tên học viên\">\r\n                    <Input />\r\n                </Form.Item>\r\n                <Form.Item name=\"mobile\" label=\"Số điện thoại\">\r\n                    <Input />\r\n                </Form.Item>\r\n                <Form.Item name=\"hangbang\" label=\"Hạng bằng lái\">\r\n                    <Select>\r\n                        {grades.map(g=> (\r\n                            <Select.Option key={g} value={g}>{g}</Select.Option>\r\n                        ))}\r\n                    </Select>\r\n                </Form.Item>\r\n                <Form.Item name=\"trangthai\" label=\"Trạng thái hồ sơ\">\r\n                    <Select>\r\n                        {Object.keys(status).map((state) => (\r\n                            <Select.Option key={state} value={state}>{status[state]}</Select.Option>\r\n                        ))}\r\n                    </Select>\r\n                </Form.Item>\r\n            </Form>\r\n        </Modal>\r\n    )\r\n}\r\nexport default FilterModal","import React from 'react'\r\nimport {\r\n    Spin\r\n} from 'antd'\r\nimport { LoadingOutlined } from '@ant-design/icons';\r\n\r\nconst LoadinCenter = () => {\r\n    return (\r\n        <div style={{\r\n            textAlign: 'center',\r\n            marginTop: '5em'\r\n        }}>\r\n            <Spin\r\n                indicator={(\r\n                    <LoadingOutlined style={{fontSize: 24}} />\r\n                )}\r\n            />\r\n        </div>\r\n    )\r\n}\r\nexport default LoadinCenter\r\n","import React from 'react'\r\nimport {\r\n    Modal,\r\n    List\r\n} from 'antd'\r\nimport {\r\n    // gql,\r\n    useLazyQuery\r\n} from '@apollo/client'\r\nimport LoadinCenter from '../../../common/LoadingCenter'\r\n\r\n// const LOAD_A_REPORT = gql`\r\n//     query loadAReport($filter: ReportFilter, $page: Int, $limit: Int) {\r\n//         loadAReport(filter: $filter, page: $page, limit: $limit) {\r\n//             reports {\r\n//                 _id\r\n//                 hangbang\r\n//                 name\r\n//                 desc\r\n//                 status\r\n//                 createdBy {\r\n//                     name\r\n//                 },\r\n//                 stdCount\r\n//                 created\r\n//             }\r\n//             total\r\n//         }\r\n//     }\r\n// `\r\n\r\ntype ModalType = {\r\n    visible: boolean\r\n    onCancel: () => void\r\n    onOk: () => void,\r\n    onMove: (report: string) => void\r\n    query: any\r\n    dataKey: string\r\n}\r\n\r\nconst ReportListModal:React.FC<ModalType> = ({\r\n    visible,\r\n    onCancel,\r\n    onOk,\r\n    onMove,\r\n    query,\r\n    dataKey\r\n}) => {\r\n    const [loadReports, { loading, data }] = useLazyQuery(query,{fetchPolicy: 'network-only'})\r\n    const [moving, toggleMoving] = React.useState(false)\r\n\r\n    React.useEffect(() => {\r\n        const load = async () => {\r\n            await loadReports({\r\n                variables: {\r\n                    filter: {\r\n                        status: 'PENDING',\r\n                    }\r\n                }\r\n            })\r\n        }\r\n        if (visible) {\r\n            load()\r\n        }\r\n    }, [visible, loadReports])\r\n\r\n    const moveStds = async (report: string) => {\r\n        toggleMoving(true)\r\n        await onMove(report)\r\n        toggleMoving(false)\r\n        onCancel()\r\n    }\r\n    return (\r\n        <Modal\r\n            visible={visible}\r\n            onCancel={onCancel}\r\n            onOk={onOk}\r\n            title=\"Chọn báo cáo\"\r\n        >\r\n            {(loading || moving) && (\r\n                <LoadinCenter />\r\n            )}\r\n            {data && data[dataKey as keyof Object] && (\r\n                <List\r\n                    dataSource={data[dataKey as keyof Object].reports}\r\n                    renderItem={(item: any) => (\r\n                        <List.Item\r\n                            onClick={() => moveStds(item._id)}\r\n                            actions={[\r\n                                <strong>{item.stdCount}</strong>\r\n                            ]}\r\n                            style={{cursor: 'pointer'}}\r\n                        >\r\n                            <List.Item.Meta\r\n                                title={item.name}\r\n                                description={item.desc}\r\n                            />\r\n                        </List.Item>\r\n                    )}\r\n                />\r\n            )}\r\n        </Modal>\r\n    )\r\n}\r\nexport default ReportListModal","import {\r\n    gql\r\n} from '@apollo/client'\r\n\r\nexport const LOAD_SINGLE_STD = gql`\r\n    query loadSingle($id: String!) {\r\n        loadSingleStd(id: $id) {\r\n            _id\r\n            cmnd\r\n            randomId\r\n            created\r\n            ten\r\n            ngaysinh\r\n            anh34\r\n            hangbang\r\n            quequan\r\n            cmt1\r\n            cmt2\r\n            bangcap\r\n            dondk\r\n            giaykhamSK\r\n            hopdongdaotao\r\n            trangthai\r\n            mobile\r\n            refund\r\n            history {\r\n                state\r\n                date\r\n                reason\r\n            }\r\n            baocao1 {\r\n                name\r\n                _id\r\n            }\r\n            baocao2 {\r\n                name\r\n                _id\r\n            }\r\n            baoluu {\r\n                thoihan\r\n                trangthai\r\n            }\r\n            kq1 {\r\n                ngay\r\n                lythuyet\r\n                thuchanh\r\n                duongtruong\r\n            }\r\n            kq2 {\r\n                ngay\r\n                lythuyet\r\n                thuchanh\r\n                duongtruong\r\n            }\r\n            createdBy\r\n        }\r\n    }\r\n`\r\nexport const REQUEST_CONFIRM_PAYMENT = gql`\r\n    mutation requestConfirmPayment($students: [String]!) {\r\n        requestConfirmPayment (students: $students) {\r\n           randomId\r\n            created\r\n            ten\r\n            ngaysinh\r\n            anh34\r\n            hangbang\r\n            quequan\r\n            cmt1\r\n            cmt2\r\n            bangcap\r\n            dondk\r\n            giaykhamSK\r\n            hopdongdaotao\r\n            trangthai\r\n            mobile\r\n            baoluu {\r\n                thoihan\r\n                trangthai\r\n            }\r\n            baocao1 {\r\n                name\r\n                _id\r\n            }\r\n            kq1 {\r\n                ngay\r\n                lythuyet\r\n                thuchanh\r\n                duongtruong\r\n            }\r\n            kq2 {\r\n                ngay\r\n                lythuyet\r\n                thuchanh\r\n                duongtruong\r\n            }\r\n            createdBy\r\n        }\r\n    }\r\n`\r\nexport const CONFIRM_PAYMENT = gql`\r\n    mutation confirmPayment($students: [String]!, $amount: Float) {\r\n        confirmPayment (students: $students, amount: $amount) {\r\n           randomId\r\n            created\r\n            ten\r\n            ngaysinh\r\n            anh34\r\n            hangbang\r\n            quequan\r\n            cmt1\r\n            cmt2\r\n            bangcap\r\n            dondk\r\n            giaykhamSK\r\n            hopdongdaotao\r\n            trangthai\r\n            mobile\r\n            baoluu {\r\n                thoihan\r\n                trangthai\r\n            }\r\n            baocao1 {\r\n                name\r\n                _id\r\n            }\r\n            kq1 {\r\n                ngay\r\n                lythuyet\r\n                thuchanh\r\n                duongtruong\r\n            }\r\n            kq2 {\r\n                ngay\r\n                lythuyet\r\n                thuchanh\r\n                duongtruong\r\n            }\r\n            createdBy\r\n        }\r\n    }\r\n`\r\nexport const REQUEST_WITHDRAW = gql`\r\n    mutation requestWithdraw($students: [String]!) {\r\n        requestWithdraw(students: $students) {\r\n            _id\r\n            randomId\r\n            created\r\n            ten\r\n            ngaysinh\r\n            anh34\r\n            hangbang\r\n            quequan\r\n            cmt1\r\n            cmt2\r\n            bangcap\r\n            dondk\r\n            giaykhamSK\r\n            hopdongdaotao\r\n            trangthai\r\n            mobile\r\n            baoluu {\r\n                thoihan\r\n                trangthai\r\n            }\r\n            baocao1 {\r\n                name\r\n                _id\r\n            }\r\n            kq1 {\r\n                ngay\r\n                lythuyet\r\n                thuchanh\r\n                duongtruong\r\n            }\r\n            kq2 {\r\n                ngay\r\n                lythuyet\r\n                thuchanh\r\n                duongtruong\r\n            }\r\n            createdBy\r\n        }\r\n    }\r\n`\r\nexport const CONFIRM_WITHDRAW = gql`\r\n    mutation confirmWithdraw($students: [String]!, $amount: Float) {\r\n        confirmWithdraw(students: $students, amount: $amount) {\r\n            _id\r\n            randomId\r\n            created\r\n            ten\r\n            ngaysinh\r\n            anh34\r\n            hangbang\r\n            quequan\r\n            cmt1\r\n            cmt2\r\n            bangcap\r\n            dondk\r\n            giaykhamSK\r\n            hopdongdaotao\r\n            trangthai\r\n            mobile\r\n            baoluu {\r\n                thoihan\r\n                trangthai\r\n            }\r\n            baocao1 {\r\n                name\r\n                _id\r\n            }\r\n            kq1 {\r\n                ngay\r\n                lythuyet\r\n                thuchanh\r\n                duongtruong\r\n            }\r\n            kq2 {\r\n                ngay\r\n                lythuyet\r\n                thuchanh\r\n                duongtruong\r\n            }\r\n            createdBy\r\n        }\r\n    }\r\n`\r\nexport const CANCEL_WITHDRAW_REQUEST = gql`\r\n    mutation cancelWithDraw($students: [String]!) {\r\n        cancelWithDraw(students: $students) {\r\n            _id\r\n            randomId\r\n            created\r\n            ten\r\n            ngaysinh\r\n            anh34\r\n            hangbang\r\n            quequan\r\n            cmt1\r\n            cmt2\r\n            bangcap\r\n            dondk\r\n            giaykhamSK\r\n            hopdongdaotao\r\n            trangthai\r\n            mobile\r\n            baoluu {\r\n                thoihan\r\n                trangthai\r\n            }\r\n            baocao1 {\r\n                name\r\n                _id\r\n            }\r\n            kq1 {\r\n                ngay\r\n                lythuyet\r\n                thuchanh\r\n                duongtruong\r\n            }\r\n            kq2 {\r\n                ngay\r\n                lythuyet\r\n                thuchanh\r\n                duongtruong\r\n            }\r\n            createdBy\r\n        }\r\n    }\r\n`\r\nexport const DELETE_STUDENT = gql`\r\n    mutation deleteStudent($student: String!) {\r\n        deleteStudent(student: $student)\r\n    }\r\n`\r\nexport const MOVE_TO_R1 = gql`\r\n    mutation moveToR1($students: [String], $report: String!) {\r\n        moveToR1(students: $students, report: $report)\r\n    }\r\n`\r\nexport const REQUEST_RESERVE = gql`\r\n    mutation requestResrv($students: [String]!) {\r\n        requestResrv (students: $students) {\r\n            _id\r\n            randomId\r\n            created\r\n            ten\r\n            ngaysinh\r\n            anh34\r\n            hangbang\r\n            quequan\r\n            cmt1\r\n            cmt2\r\n            bangcap\r\n            dondk\r\n            giaykhamSK\r\n            hopdongdaotao\r\n            trangthai\r\n            mobile\r\n            baoluu {\r\n                thoihan\r\n                trangthai\r\n            }\r\n            baocao1 {\r\n                name\r\n                _id\r\n            }\r\n            kq1 {\r\n                ngay\r\n                lythuyet\r\n                thuchanh\r\n                duongtruong\r\n            }\r\n            kq2 {\r\n                ngay\r\n                lythuyet\r\n                thuchanh\r\n                duongtruong\r\n            }\r\n            createdBy\r\n        }\r\n    }\r\n`\r\nexport const CANCEL_REQUEST_RESERV = gql`\r\n    mutation cancelRequestResrv($students: [String]!) {\r\n        cancelRequestResrv(students: $students) {\r\n            _id\r\n            randomId\r\n            created\r\n            ten\r\n            ngaysinh\r\n            anh34\r\n            hangbang\r\n            quequan\r\n            cmt1\r\n            cmt2\r\n            bangcap\r\n            dondk\r\n            giaykhamSK\r\n            hopdongdaotao\r\n            trangthai\r\n            mobile\r\n            baoluu {\r\n                thoihan\r\n                trangthai\r\n            }\r\n            baocao1 {\r\n                name\r\n                _id\r\n            }\r\n            kq1 {\r\n                ngay\r\n                lythuyet\r\n                thuchanh\r\n                duongtruong\r\n            }\r\n            kq2 {\r\n                ngay\r\n                lythuyet\r\n                thuchanh\r\n                duongtruong\r\n            }\r\n            createdBy\r\n        }\r\n    }\r\n`\r\nexport const CONFIRM_RESERVE_BC1 = gql`\r\n    mutation confirmReserveBC1($students: [String]!) {\r\n        confirmReserveBC1(students: $students) {\r\n            _id\r\n            randomId\r\n            created\r\n            ten\r\n            ngaysinh\r\n            anh34\r\n            hangbang\r\n            quequan\r\n            cmt1\r\n            cmt2\r\n            bangcap\r\n            dondk\r\n            giaykhamSK\r\n            hopdongdaotao\r\n            trangthai\r\n            mobile\r\n            baoluu {\r\n                thoihan\r\n                trangthai\r\n            }\r\n            baocao1 {\r\n                name\r\n                _id\r\n            }\r\n            kq1 {\r\n                ngay\r\n                lythuyet\r\n                thuchanh\r\n                duongtruong\r\n            }\r\n            kq2 {\r\n                ngay\r\n                lythuyet\r\n                thuchanh\r\n                duongtruong\r\n            }\r\n            createdBy\r\n        }\r\n    }\r\n`\r\nexport const REQUEST_TO_RETURN = gql`\r\n    mutation requestToReturn($students: [String]!) {\r\n        requestToReturn(students: $students) {\r\n            _id\r\n            randomId\r\n            created\r\n            ten\r\n            ngaysinh\r\n            anh34\r\n            hangbang\r\n            quequan\r\n            cmt1\r\n            cmt2\r\n            bangcap\r\n            dondk\r\n            giaykhamSK\r\n            hopdongdaotao\r\n            trangthai\r\n            mobile\r\n            baoluu {\r\n                thoihan\r\n                trangthai\r\n            }\r\n            baocao1 {\r\n                name\r\n                _id\r\n            }\r\n            kq1 {\r\n                ngay\r\n                lythuyet\r\n                thuchanh\r\n                duongtruong\r\n            }\r\n            kq2 {\r\n                ngay\r\n                lythuyet\r\n                thuchanh\r\n                duongtruong\r\n            }\r\n            createdBy\r\n        }\r\n    }\r\n`\r\nexport const LOAD_A_REPORT = gql`\r\n    query loadAReport($filter: ReportFilter, $page: Int, $limit: Int) {\r\n        loadAReport(filter: $filter, page: $page, limit: $limit) {\r\n            reports {\r\n                _id\r\n                hangbang\r\n                name\r\n                desc\r\n                status\r\n                createdBy {\r\n                    name\r\n                },\r\n                stdCount\r\n                created\r\n            }\r\n            total\r\n        }\r\n    }\r\n`\r\nexport const APPROVE_RESERV = gql`\r\n    mutation confirmWithdraw($students: [String]!, $amount: Float) {\r\n        confirmWithdraw(students: $students, amount: $amount) {\r\n            _id\r\n            randomId\r\n            created\r\n            ten\r\n            ngaysinh\r\n            anh34\r\n            hangbang\r\n            quequan\r\n            cmt1\r\n            cmt2\r\n            bangcap\r\n            dondk\r\n            giaykhamSK\r\n            hopdongdaotao\r\n            trangthai\r\n            mobile\r\n            baoluu {\r\n                thoihan\r\n                trangthai\r\n            }\r\n            baocao1 {\r\n                name\r\n                _id\r\n            }\r\n            kq1 {\r\n                ngay\r\n                lythuyet\r\n                thuchanh\r\n                duongtruong\r\n            }\r\n            kq2 {\r\n                ngay\r\n                lythuyet\r\n                thuchanh\r\n                duongtruong\r\n            }\r\n            createdBy\r\n        }\r\n    }\r\n`\r\nexport const APPROVE_R1 = gql`\r\n    mutation approveReport($report: String!) {\r\n        approveReport(report: $report)\r\n    }\r\n`\r\nexport const REMOVE_FROM_REPORT = gql`\r\n    mutation removeFromAttReport($students: [String], $report: String!) {\r\n        removeFromAttReport(students: $students, report: $report)\r\n    }\r\n`\r\n\r\nexport const LOAD_SINGLE_REPORT = gql`\r\n    query loadSingleAttReport($report: String!, $filter: FilterInput) {\r\n        loadSingleAttReport(report: $report, filter: $filter) {\r\n            report {\r\n                _id\r\n                hangbang\r\n                name\r\n                desc\r\n                status\r\n                createdBy {\r\n                    name\r\n                }\r\n                created\r\n            }\r\n            students {\r\n                _id\r\n                randomId\r\n                ten\r\n                ngaysinh\r\n                hangbang\r\n                mobile\r\n                trangthai\r\n                # baoluu\r\n                baocao1 {\r\n                    name\r\n                    _id\r\n                }\r\n            }\r\n        }\r\n    }\r\n`\r\n\r\nexport const MARK_COMPLETED = gql `\r\n    mutation markCompleted($students: [String]!) {\r\n        markCompleted(students: $students)\r\n    }\r\n`\r\n\r\nexport const REQUEST_CONFIRM_P_2 = gql `\r\n    mutation requestConfirmPaymentTwo($students: [String]!) {\r\n        requestConfirmPaymentTwo(students: $students)\r\n    }\r\n`\r\n\r\nexport const CONFIRM_PAYMENT_TWO = gql `\r\n    mutation confirmPaymentTwo($students: [String]!, $amount: Float) {\r\n        confirmPaymentTwo(students: $students, amount: $amount)\r\n    }\r\n`\r\n\r\nexport const REQUEST_RESERVE_RESULT = gql `\r\n    mutation requestReserveResult($students: [String]!) {\r\n        requestReserveResult(students: $students)\r\n    }\r\n`\r\nexport const CANCEL_RESERVE_RESULT = gql `\r\n    mutation cancelReserveResult($students: [String]!) {\r\n        cancelReserveResult(students: $students)\r\n    }\r\n`\r\nexport const CREATE_A_REPORT = gql`\r\n    mutation createAReport($report: ReportOneInput) {\r\n        createAReport(report: $report) {\r\n            _id\r\n            hangbang\r\n            name\r\n            desc\r\n            status\r\n            created\r\n            createdBy {\r\n                name\r\n            },\r\n            stdCount\r\n        }\r\n    }\r\n`\r\n// const LOAD_A_REPORT = gql`\r\n//     query loadAReport($filter: ReportFilter, $page: Int, $limit: Int) {\r\n//         loadAReport(filter: $filter, page: $page, limit: $limit) {\r\n//             reports {\r\n//                 _id\r\n//                 hangbang\r\n//                 name\r\n//                 desc\r\n//                 status\r\n//                 createdBy {\r\n//                     name\r\n//                 },\r\n//                 stdCount\r\n//                 created\r\n//             }\r\n//             total\r\n//         }\r\n//     }\r\n// `\r\n\r\nexport const CONFIRM_RESERVE_RESULT = gql `\r\n    mutation confirmReserveResult($students: [String]!) {\r\n        confirmReserveResult(students: $students )\r\n    }\r\n`\r\n\r\nexport const REQUEST_RETURN_RESULT = gql `\r\n    mutation requestReturnResult($students: [String]!) {\r\n        requestReturnResult(students: $students )\r\n    }\r\n`\r\nexport const CREATE_BREPORT = gql `\r\n    mutation createBreport($report: ReportOneInput!) {\r\n        createBreport(report: $report) {\r\n            _id\r\n            hangbang\r\n            name\r\n            desc\r\n            status\r\n            createdBy {\r\n                name\r\n            }\r\n            created\r\n            stdCount\r\n            approveDate\r\n        }\r\n    }\r\n`\r\nexport const LOAD_B_REPORTS = gql `\r\n    query loadBreports($filter: ReportFilter, $page: Int, $limit: Int) {\r\n        loadBreports(filter: $filter, page: $page, limit: $limit) {\r\n            reports {\r\n                _id\r\n                hangbang\r\n                name\r\n                desc\r\n                status\r\n                createdBy {\r\n                    name\r\n                }\r\n                created\r\n                stdCount\r\n                approveDate\r\n            }\r\n            total\r\n        }\r\n    }\r\n`\r\nexport const LOAD_SINGLE_B_REPORT = gql `\r\n    query loadSingleBReport($report: String! $filter: FilterInput) {\r\n        loadSingleBReport(report: $report, filter: $filter) {\r\n             report {\r\n                _id\r\n                hangbang\r\n                name\r\n                desc\r\n                status\r\n                createdBy {\r\n                    name\r\n                }\r\n                created\r\n            }\r\n            students {\r\n                _id\r\n                randomId\r\n                ten\r\n                ngaysinh\r\n                hangbang\r\n                mobile\r\n                trangthai\r\n                # baoluu\r\n                baocao1 {\r\n                    name\r\n                    _id\r\n                }\r\n            }\r\n        }\r\n    }\r\n`\r\nexport const MOVE_TO_R2 = gql`\r\n    mutation moveToR2($students: [String], $report: String!) {\r\n        moveToR2(students: $students, report: $report)\r\n    }\r\n`\r\nexport const APPROVE_B_REPORT = gql `\r\n    mutation approveBReport($report: String!) {\r\n        approveBReport(report: $report) {\r\n                _id\r\n                hangbang\r\n                name\r\n                desc\r\n                status\r\n                createdBy {\r\n                    name\r\n                }\r\n                created\r\n                stdCount\r\n                approveDate\r\n            }\r\n        }\r\n`\r\nexport const REJECT_WD_FN = gql `\r\n    mutation rejectWithdrawFN($students: [String]!) {\r\n        rejectWithdrawFN(students: $students)\r\n    }\r\n`\r\nexport const CONFIRM_WD_GD = gql `\r\n    mutation confirmWithdrawGD($students: [String]!) {\r\n        confirmWithdrawGD(students: $students)\r\n    }\r\n`\r\nexport const REJECT_WD_GD = gql `\r\n    mutation rejectWithdrawGD($students: [String]!) {\r\n        rejectWithdrawGD(students: $students)\r\n    }\r\n`\r\nexport const MARK_GRAD = gql `\r\n    mutation markGrad($students: [String]!) {\r\n        markGrad(students: $students)\r\n    }\r\n`\r\nexport const MARK_FAIL = gql `\r\n    mutation markFail($students: [String]!) {\r\n        markFail(students: $students)\r\n    }\r\n`\r\nexport const MARK_FOR_RETEST = gql `\r\n    mutation markForReTest($students: [String]!) {\r\n        markForReTest(students: $students)\r\n    }\r\n`\r\nexport const RESERVE_RESULT = gql `\r\n    mutation adminReserveResult($students: [String]!) {\r\n        adminReserveResult(students: $students)\r\n    }\r\n`\r\nexport const ADMIN_CONFIRM_RETURN = gql `\r\n    mutation adminConfirmReturn($students: [String]!) {\r\n        adminConfirmReturn(students: $students)\r\n    }\r\n`\r\nexport const ADMIN_MARK_FINISH = gql `\r\n    mutation adminMarkFinish($students: [String]!) {\r\n        adminMarkFinish(students: $students)\r\n    }\r\n`\r\nexport const ADMIN_MARK_REMOVE = gql `\r\n    mutation adminMarkRemove($students: [String]!) {\r\n        adminMarkRemove(students: $students)\r\n    }\r\n`\r\nexport const ADMIN_MARK_FINAL_FAIL = gql `\r\n    mutation adminMarkFinalFail($students: [String]!, $reason: String!) {\r\n        adminMarkFinalFail(students: $students, reason: $reason)\r\n    }\r\n`\r\nexport const TEACHER_REQUEST_CONFIRM_RETEST_FEE = gql`\r\n    mutation requestConfirmRetestPayment($students: [String]!) {\r\n        requestConfirmRetestPayment(students: $students)\r\n    }\r\n`\r\n\r\nexport const ADM_CONFIRM_RETEST_FEE = gql `\r\n    mutation adminConfirmRetestFee($students: [String]!, $amount: Float) {\r\n        adminConfirmRetestFee(students: $students, amount: $amount)\r\n    }\r\n`\r\nexport const T_REQUEST_SWAP = gql `\r\n    mutation requestSwap($student: String!, $replacement: String!) {\r\n        requestSwap(student: $student, replacement: $replacement) {\r\n            _id\r\n            randomId\r\n            ten\r\n            ngaysinh\r\n            anh34\r\n            quequan\r\n            cmt1\r\n            cmt2\r\n            bangcap\r\n            hangbang\r\n            mobile\r\n            dondk\r\n            giaykhamSK\r\n            hopdongdaotao\r\n            trangthai\r\n            ycdc {\r\n                ten\r\n                randomId\r\n            }\r\n            baoluu {\r\n                trangthai\r\n            }\r\n            baocao1 {\r\n                name\r\n            }\r\n            baocao2 {\r\n                name\r\n            }\r\n        }\r\n    }\r\n`\r\n\r\nexport const ADM_CONFIRM_SWAP = gql `\r\n    mutation adminConfirmSwap($students: [String]!) {\r\n        adminConfirmSwap(students: $students) {\r\n            _id\r\n            randomId\r\n            ten\r\n            ngaysinh\r\n            anh34\r\n            quequan\r\n            cmt1\r\n            cmt2\r\n            bangcap\r\n            hangbang\r\n            mobile\r\n            dondk\r\n            giaykhamSK\r\n            hopdongdaotao\r\n            trangthai\r\n            ycdc {\r\n                ten\r\n                randomId\r\n            }\r\n            baoluu {\r\n                trangthai\r\n            }\r\n            baocao1 {\r\n                name\r\n            }\r\n            baocao2 {\r\n                name\r\n            }\r\n        }\r\n    }\r\n`\r\n\r\nexport const FORCE_STATUS = gql `\r\n    mutation setStatus($students: [String]!, $trangthai: String!) {\r\n        setStatus(students: $students, trangthai: $trangthai)\r\n    }\r\n`\r\nexport const LOAD_RECORDS = gql `\r\n    query loadRecords($filter: RecordFilter) {\r\n        loadRecords(filter: $filter) {\r\n            records {\r\n                createdBy\r\n                student {\r\n                    ten\r\n                    mobile\r\n                    randomId\r\n                }\r\n                createdAt\r\n                amount\r\n                reason\r\n            }\r\n            totalRecords\r\n            totalAmount\r\n        }\r\n    }\r\n`\r\nexport const T_REQUEST_CHANGE_GRADE = gql `\r\n    mutation tRequestChangeGrade($students: [String]!, $ycdh: String!) {\r\n        tRequestChangeGrade(students: $students, ycdh: $ycdh)\r\n    }\r\n`\r\nexport const ADMIN_ACCEPT_CHANGE_GRADE = gql `\r\n    mutation adminAcceptChangeGrade($students: [String]!) {\r\n        adminAcceptChangeGrade(students: $students)\r\n    }\r\n`\r\nexport const ADMIN_REJECT_CHANGE_GRADE = gql `\r\n    mutation adminRejectChangeGrade($students: [String]!) {\r\n        adminRejectChangeGrade(students: $students)\r\n    }\r\n`\r\nexport const FN_ACCEPT_CHANGE_GRADE = gql `\r\n    mutation fnAcceptChangeGrade($students: [String]!) {\r\n        fnAcceptChangeGrade(students: $students)\r\n    }\r\n`\r\nexport const FN_REJECT_CHANGE_GRADE = gql `\r\n    mutation fnRejectChangeGrade($students: [String]!) {\r\n        fnRejectChangeGrade(students: $students)\r\n    }\r\n`\r\nexport const T_REQUEST_RETURN_FINAL_TEST = gql `\r\n    mutation tRequestRetestFinal($students: [String]!) {\r\n        tRequestRetestFinal(students: $students)\r\n    }\r\n`\r\nexport const ADMIN_ACCEPT_RETURN_FINAL_TEST = gql `\r\n    mutation adminAcceptRetestFinal($students: [String]!) {\r\n        adminAcceptRetestFinal(students: $students)\r\n    }\r\n`","import React from 'react'\r\nimport {\r\n    Modal,\r\n    Form,\r\n    Input,\r\n    message\r\n} from 'antd'\r\n\r\ntype MType = {\r\n    visible: boolean\r\n    onCancel: () => void\r\n    onOk: (amount: number) => void,\r\n    title: string\r\n    confirm: Record<string,any>\r\n    command: string|null\r\n    selected: string[]\r\n}\r\n\r\nconst CPModal:React.FC<MType> = ({\r\n    visible,\r\n    onCancel,\r\n    onOk,\r\n    title,\r\n    confirm,\r\n    command,\r\n    selected\r\n}) => {\r\n    const [form] = Form.useForm()\r\n    const [working, toggleWorking] = React.useState(false)\r\n    const onConfirm = async () => {\r\n        try {\r\n            toggleWorking(true)\r\n            const { amount } = form.getFieldsValue()\r\n            if (!amount) {\r\n                console.log('no amount confirmed')\r\n                throw new Error('không thể xác nhận thanh toán')\r\n            }\r\n            // await onOk(parseFloat(amount))\r\n            if (!command || !selected || (selected.length === 0)) {\r\n                console.log('command not found')\r\n                throw new Error('Không rõ lệnh')\r\n            } else {\r\n                confirm[command]({\r\n                    variables: {\r\n                        students: selected,\r\n                        amount: parseFloat(amount)\r\n                    }\r\n                })\r\n            }\r\n\r\n        } catch (error) {\r\n            message.error('không thể xác nhận thanh toán')\r\n        }\r\n        toggleWorking(false)\r\n        onCancel()\r\n    }\r\n    return (\r\n        <Modal\r\n            visible={visible}\r\n            onCancel={onCancel}\r\n            onOk={onConfirm}\r\n            title={title}\r\n            okButtonProps={{ loading: working }}\r\n        >\r\n            <Form form={form} labelCol={{ span: 8 }} wrapperCol={{ span: 16}}>\r\n                <Form.Item label=\"Số tiền xác nhận\" name=\"amount\" rules={[{ required: true, message: \"Vui lòng nhập số tiền xác nhận\"}]}>\r\n                    <Input type=\"number\" addonBefore={<span>VNĐ</span>} />\r\n                </Form.Item>\r\n            </Form>\r\n        </Modal>\r\n    )\r\n}\r\nexport default CPModal","export const numberWithCommas = (x:any)=> {\r\n    if (x){\r\n        return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\r\n    } else {\r\n        return 0\r\n    }\r\n}","import React from 'react'\r\nimport {\r\n    Modal,\r\n    List\r\n} from 'antd'\r\nimport {\r\n    numberWithCommas\r\n} from '../../../../Utils/math'\r\n\r\ntype MType = {\r\n    students: Record<string,any>[]\r\n    visible: boolean\r\n    onCancel: () => void\r\n    onOk:()=>any\r\n}\r\n\r\nconst RefundModal:React.FC<MType> = ({\r\n    visible,\r\n    onCancel,\r\n    students,\r\n    onOk\r\n}) => {\r\n    // console.log(students)\r\n    let total = 0\r\n    return (\r\n        <Modal\r\n            title=\"Danh sách hoàn tiền - rút HS\"\r\n            visible={visible}\r\n            onCancel={onCancel}\r\n            onOk={() => {\r\n                onOk()\r\n                onCancel()\r\n            }}\r\n        >\r\n            <List>\r\n                {students.map(student => {\r\n                    total += parseFloat(student.refund)\r\n                    return (\r\n                        <List.Item key=\"student._id\" actions={[<span>{`-${numberWithCommas(student.refund)} VNĐ`}</span>]}>\r\n                            <List.Item.Meta title={student.ten} />\r\n                        </List.Item>\r\n                    )\r\n                })}\r\n                <List.Item actions={[<strong>{`${numberWithCommas(total)} VNĐ`}</strong>]}>\r\n                    <List.Item.Meta title={<strong>Tổng tiền hoàn</strong>} />\r\n                </List.Item>\r\n            </List>\r\n        </Modal>\r\n    )\r\n}\r\nexport default RefundModal","import React from 'react'\r\nimport {\r\n    Modal,\r\n    Select,\r\n    Form,\r\n    message,\r\n    List\r\n} from 'antd'\r\nimport {\r\n    Link\r\n} from 'react-router-dom'\r\nimport hangbangs from '../../../common/HangBang'\r\n\r\nconst { Option } = Select\r\n\r\ntype MType = {\r\n    visible: boolean\r\n    onCancel: () => void\r\n    onOk: (ycdh: string) => void\r\n    students: Record<string,any>[]\r\n}\r\n\r\nconst ChangeGradeModal:React.FC<MType> = ({\r\n    visible,\r\n    onCancel,\r\n    onOk,\r\n    students\r\n}) => {\r\n    const [form] = Form.useForm()\r\n    const [loading, toggleLoading] = React.useState(false)\r\n    return (\r\n        <Modal\r\n            visible={visible}\r\n            onCancel={onCancel}\r\n            title=\"Đổi hạng bằng\"\r\n            onOk={async() => {\r\n                toggleLoading(true)\r\n                const {hangmoi} = form.getFieldsValue()\r\n                // if(student.hangbang === hangmoi) {\r\n                //     toggleLoading(false)\r\n                //     message.warning(`Hồ sơ đang ở hạng ${hangmoi} - không có gì thay đổi`)\r\n                //     onCancel()\r\n                // }\r\n                await onOk(hangmoi)\r\n                toggleLoading(false)\r\n                onCancel()\r\n            }}\r\n            okButtonProps={{\r\n                loading\r\n            }}\r\n        >\r\n            <p>Đổi hạng bằng cho học viên</p>\r\n            <List\r\n                dataSource={students}\r\n                itemLayout=\"horizontal\"\r\n                renderItem={(item: any) => {\r\n                    return (\r\n                        <List.Item key={item._id} actions={[item.hangbang]}>\r\n                            <List.Item.Meta\r\n                                title={<Link to={`/std/${item.randomId}`}>{item.ten}</Link>}\r\n                                description={`Mã hồ sơ: ${item.randomId}`}\r\n                            />\r\n                        </List.Item>\r\n                    )\r\n                }}\r\n            />\r\n            <Form form={form}>\r\n                <Form.Item name=\"hangmoi\" label=\"Chọn hạng bằng mới\">\r\n                    <Select>\r\n                        {Object.keys(hangbangs).map(k => (\r\n                            <Option key={k} value={k}>{`${k} - ${hangbangs[k as keyof Object]}`}</Option>\r\n                        ))}\r\n                    </Select>\r\n                </Form.Item>\r\n            </Form>\r\n        </Modal>\r\n    )\r\n}\r\nexport default ChangeGradeModal","import React from 'react'\r\nimport {\r\n    Button,\r\n    PageHeader,\r\n    Tooltip,\r\n    Menu,\r\n    Dropdown,\r\n    message,\r\n    Modal\r\n} from 'antd'\r\nimport {\r\n    gql,\r\n    useMutation,\r\n    useLazyQuery,\r\n} from '@apollo/client'\r\nimport {\r\n    CaretLeftFilled,\r\n    CheckCircleOutlined,\r\n    CheckOutlined,\r\n    CheckSquareOutlined,\r\n    CloseOutlined,\r\n    DeleteOutlined,\r\n    DollarOutlined,\r\n    DownloadOutlined,\r\n    EllipsisOutlined,\r\n    ExclamationOutlined,\r\n    FilterOutlined,\r\n    OrderedListOutlined,\r\n    PlusOutlined,\r\n    PoundOutlined,\r\n    ReloadOutlined,\r\n    RetweetOutlined,\r\n    RollbackOutlined,\r\n    SwapLeftOutlined,\r\n    SwapOutlined,\r\n    TransactionOutlined,\r\n    UnorderedListOutlined\r\n} from '@ant-design/icons'\r\nimport {\r\n    useAuth\r\n} from '../../../context/AuthenticationContext'\r\nimport StudentDrawer from './LandingPage/CreateStudentDrawer'\r\nimport StudentList from './LandingPage/StudentList'\r\nimport FilterModal from './LandingPage/CreateStudentDrawer/FilterModal'\r\nimport ReportModal from './Modals/ReportOneModal'\r\nimport XLSX from 'xlsx'\r\nimport {\r\n    REQUEST_CONFIRM_PAYMENT,\r\n    CONFIRM_PAYMENT,\r\n    REQUEST_WITHDRAW,\r\n    CONFIRM_WITHDRAW,\r\n    LOAD_A_REPORT,\r\n    MOVE_TO_R1,\r\n    REQUEST_CONFIRM_P_2,\r\n    CONFIRM_PAYMENT_TWO,\r\n    MARK_COMPLETED,\r\n    REQUEST_RETURN_RESULT,\r\n    REJECT_WD_FN,\r\n    CONFIRM_WD_GD,\r\n    REJECT_WD_GD,\r\n    MARK_GRAD,\r\n    MARK_FAIL,\r\n    MARK_FOR_RETEST,\r\n    LOAD_B_REPORTS,\r\n    MOVE_TO_R2,\r\n    RESERVE_RESULT,\r\n    ADMIN_CONFIRM_RETURN,\r\n    ADMIN_MARK_FINISH,\r\n    ADMIN_MARK_REMOVE,\r\n    ADMIN_MARK_FINAL_FAIL,\r\n    TEACHER_REQUEST_CONFIRM_RETEST_FEE,\r\n    ADM_CONFIRM_RETEST_FEE,\r\n    ADMIN_ACCEPT_CHANGE_GRADE,\r\n    ADMIN_REJECT_CHANGE_GRADE,\r\n    FN_ACCEPT_CHANGE_GRADE,\r\n    FN_REJECT_CHANGE_GRADE,\r\n    T_REQUEST_CHANGE_GRADE,\r\n    T_REQUEST_RETURN_FINAL_TEST,\r\n    ADMIN_ACCEPT_RETURN_FINAL_TEST\r\n} from '../../common/ClientQueries'\r\nimport moment from 'moment'\r\nimport StudentStatus from '../../common/StudentStatus'\r\nimport CPModal from './Modals/ConfirmPaymentModal'\r\nimport RefundModal from './Modals/RefundList'\r\nimport ChangeGradeModal from '../SingleStudent/Modals/ChangeGradeModal'\r\n\r\nconst CREATE_STUDENT = gql`\r\n    mutation CreateStudentMutation($student: StudentInput!) {\r\n        createStudent(student: $student) {\r\n            randomId\r\n            cmnd\r\n            created\r\n            ten\r\n            ngaysinh\r\n            anh34\r\n            hangbang\r\n            quequan\r\n            cmt1\r\n            cmt2\r\n            bangcap\r\n            dondk\r\n            giaykhamSK\r\n            hopdongdaotao\r\n            trangthai\r\n            mobile\r\n            baoluu {\r\n                thoihan\r\n                trangthai\r\n            }\r\n            kq1 {\r\n                ngay\r\n                lythuyet\r\n                thuchanh\r\n                duongtruong\r\n            }\r\n            kq2 {\r\n                ngay\r\n                lythuyet\r\n                thuchanh\r\n                duongtruong\r\n            }\r\n            createdBy\r\n        }\r\n    }\r\n`\r\nconst LOAD_STUDENTS = gql`\r\n    query LoadStudents($filter: FilterInput, $page: Int, $limit: Int, $sort: StdSortInput) {\r\n        loadStudents(filter: $filter, page: $page, limit: $limit, sort: $sort) {\r\n            total\r\n            students {\r\n                _id\r\n                cmnd\r\n                randomId\r\n                created\r\n                ten\r\n                ngaysinh\r\n                anh34\r\n                hangbang\r\n                quequan\r\n                cmt1\r\n                cmt2\r\n                bangcap\r\n                dondk\r\n                giaykhamSK\r\n                hopdongdaotao\r\n                trangthai\r\n                mobile\r\n                # ycdc\r\n                refund\r\n                baocao1 {\r\n                    name\r\n                    _id\r\n                }\r\n                baocao2 {\r\n                    name\r\n                    _id\r\n                }\r\n                baoluu {\r\n                    thoihan\r\n                    trangthai\r\n                }\r\n                kq1 {\r\n                    ngay\r\n                    lythuyet\r\n                    thuchanh\r\n                    duongtruong\r\n                }\r\n                kq2 {\r\n                    ngay\r\n                    lythuyet\r\n                    thuchanh\r\n                    duongtruong\r\n                }\r\n                createdBy\r\n            }\r\n        }\r\n    }\r\n`\r\n\r\nconst TLandingPage = () => {\r\n    const { getUser } = useAuth()\r\n    const user = getUser()\r\n    // console.log(user)\r\n    const pageSize=100\r\n    const [createDrw, toggleCreateDrw] = React.useState(false)\r\n    const [createStudent] = useMutation(CREATE_STUDENT, { refetchQueries: [LOAD_STUDENTS]})\r\n    const [loadStudents, { loading: loadingStudents, data: students = { loadStudents: { students: [], total: 0} } }] = useLazyQuery(LOAD_STUDENTS, { fetchPolicy: 'network-only' })\r\n    const [exportXLSX, { loading: exporting }] = useLazyQuery(LOAD_STUDENTS, { fetchPolicy: 'network-only', onCompleted: (data: any) => {\r\n        const {loadStudents: { students}} = data\r\n        exportFile(students)\r\n    } })\r\n    const [filterModal, toggleFilterModal] = React.useState(false)\r\n    const [reportModal, toggleReportModal] = React.useState(false)\r\n    const [bc2Modal, toggleBC2Modal] = React.useState(false)\r\n    const [moveR1] = useMutation(MOVE_TO_R1, { refetchQueries: [LOAD_STUDENTS] })\r\n    const [moveR2] = useMutation(MOVE_TO_R2, { refetchQueries: [LOAD_STUDENTS] })\r\n    const [requestConfirmP] = useMutation(REQUEST_CONFIRM_PAYMENT, { refetchQueries: [LOAD_STUDENTS]})\r\n    const [confirmP] = useMutation(CONFIRM_PAYMENT, { refetchQueries: [LOAD_STUDENTS]})\r\n    const [requestWD] = useMutation(REQUEST_WITHDRAW, { refetchQueries: [LOAD_STUDENTS]})\r\n    // const [requestRSV] = useMutation(REQUEST_RESERVE, { refetchQueries: [LOAD_STUDENTS]})\r\n    const [cfWithdraw] = useMutation(CONFIRM_WITHDRAW, { refetchQueries: [LOAD_STUDENTS]})\r\n    // const [cfReserv] = useMutation(CONFIRM_RESERVE_BC1, { refetchQueries: [LOAD_STUDENTS]})\r\n    // const [requestReturn] = useMutation(REQUEST_TO_RETURN, { refetchQueries: [LOAD_STUDENTS]})\r\n    const [requestConfirmP2] = useMutation(REQUEST_CONFIRM_P_2, { refetchQueries: [LOAD_STUDENTS]})\r\n    const [confirmP2] = useMutation(CONFIRM_PAYMENT_TWO, { refetchQueries: [LOAD_STUDENTS]})\r\n    const [markComplete] = useMutation(MARK_COMPLETED, { refetchQueries: [LOAD_STUDENTS] })\r\n    // const [requestReserveResult] = useMutation(REQUEST_RESERVE_RESULT, { refetchQueries: [LOAD_STUDENTS] })\r\n    // const [confirmReserveResult] = useMutation(CONFIRM_RESERVE_RESULT, { refetchQueries: [LOAD_STUDENTS] })\r\n    const [requestReturnResult] = useMutation(REQUEST_RETURN_RESULT, { refetchQueries: [LOAD_STUDENTS] })\r\n    const [rejectWDFN] = useMutation(REJECT_WD_FN, { refetchQueries: [LOAD_STUDENTS] })\r\n    const [acceptWDGD] = useMutation(CONFIRM_WD_GD, { refetchQueries: [LOAD_STUDENTS] })\r\n    const [rejectWDGD] = useMutation(REJECT_WD_GD, { refetchQueries: [LOAD_STUDENTS] })\r\n    const [markGrad] = useMutation(MARK_GRAD, { refetchQueries: [LOAD_STUDENTS] })\r\n    const [markFail] = useMutation(MARK_FAIL, { refetchQueries: [LOAD_STUDENTS] })\r\n    const [markforretest] = useMutation(MARK_FOR_RETEST, { refetchQueries: [LOAD_STUDENTS] })\r\n    const [reserveResult] = useMutation(RESERVE_RESULT, { refetchQueries: [LOAD_STUDENTS] })\r\n    const [admConfirmReturn] = useMutation(ADMIN_CONFIRM_RETURN, { refetchQueries: [LOAD_STUDENTS] })\r\n    const [admMarkFinish] = useMutation(ADMIN_MARK_FINISH, { refetchQueries: [LOAD_STUDENTS] })\r\n    const [admMarkRemove] = useMutation(ADMIN_MARK_REMOVE, { refetchQueries: [LOAD_STUDENTS] })\r\n    const [admMarkFinalFail] = useMutation(ADMIN_MARK_FINAL_FAIL, { refetchQueries: [LOAD_STUDENTS] })\r\n    const [tRequestCRF] = useMutation(TEACHER_REQUEST_CONFIRM_RETEST_FEE, { refetchQueries: [LOAD_STUDENTS] })\r\n    const [admCFRF] = useMutation(ADM_CONFIRM_RETEST_FEE, { refetchQueries: [LOAD_STUDENTS] })\r\n    const [tRequestChangeGrd] = useMutation(T_REQUEST_CHANGE_GRADE, { refetchQueries: [LOAD_STUDENTS] })\r\n    \r\n    const [admAcceptChangeGrd] = useMutation(ADMIN_ACCEPT_CHANGE_GRADE, { refetchQueries: [LOAD_STUDENTS] })\r\n    const [admRejectChangeGrd] = useMutation(ADMIN_REJECT_CHANGE_GRADE, { refetchQueries: [LOAD_STUDENTS] })\r\n    const [fnAcceptChangeGrd] = useMutation(FN_ACCEPT_CHANGE_GRADE, { refetchQueries: [LOAD_STUDENTS] })\r\n    const [fnRejectChangeGrd] = useMutation(FN_REJECT_CHANGE_GRADE, { refetchQueries: [LOAD_STUDENTS] })\r\n    \r\n    const [tRequestRetestFinal] = useMutation(T_REQUEST_RETURN_FINAL_TEST, { refetchQueries: [LOAD_STUDENTS] })\r\n    const [aAcceptRetestFinal] = useMutation(ADMIN_ACCEPT_RETURN_FINAL_TEST, { refetchQueries: [LOAD_STUDENTS] })\r\n    const [refundModal, toggleRefundModal] = React.useState(false)\r\n    const [changeGradeModal, toggleChangeGradeModal] = React.useState(false)\r\n\r\n    const [filter, setFilter] = React.useState<Record<string,any>>({\r\n        ten: null,\r\n        mobile: null,\r\n        hangbang: null,\r\n        randomId: null,\r\n        trangthai: null\r\n    })\r\n    const [sort, setSort] = React.useState<Record<string,any>>({\r\n        created: -1\r\n    })\r\n    const [currentPage, setCurrentPage] = React.useState(1)\r\n    const [selected, setSelected] = React.useState<string[]>([])\r\n    const [working, toggleWorking] = React.useState(false)\r\n    const [withdrawModal, toggleWDRModal] = React.useState(false)\r\n    const [cpModal, toggleCPModal] = React.useState(false)\r\n    const [cpModalTitle, setCPModalTitle] = React.useState('Xác nhận thanh toán')\r\n    const [confirmCmd, setConfirmCmd] = React.useState<string|null>(null)\r\n\r\n    React.useEffect(() => {\r\n        const load = async () => {\r\n            await loadStudents({\r\n                variables: {\r\n                    filter,\r\n                    page: currentPage,\r\n                    limit: pageSize,\r\n                    sort\r\n                }\r\n            })\r\n        }\r\n        load()\r\n    }, [loadStudents, filter, currentPage, sort])\r\n    \r\n    const createStd = async (student: any) => {\r\n        await createStudent({\r\n            variables: {\r\n                student\r\n            }\r\n        })\r\n            // .then(() => loadStudents())\r\n    }\r\n    \r\n    const notFilterEmpty = () => {\r\n        const matchingKey = Object.keys(filter).find(k => filter[k] !== null)\r\n        return Boolean(matchingKey)\r\n    }\r\n    // console.log(notFilterEmpty())\r\n    const onFilterClick = () => {\r\n        if (notFilterEmpty()) {\r\n            // console.log('filter is not empty')\r\n            setFilter({\r\n                ten: null,\r\n                mobile: null,\r\n                hangbang: null,\r\n                randomId: null,\r\n                trangthai: null\r\n            })\r\n            console.log(filter)\r\n        } else {\r\n            toggleFilterModal(!filterModal)\r\n        }\r\n    }\r\n\r\n    const rowSelection = {\r\n        onChange: (keys: any) => setSelected(keys),\r\n        selectedRowKeys: selected\r\n    }\r\n\r\n    const onMove = async (report: string, type: string) => {\r\n        if (type === 'BC1') {\r\n            await moveR1({\r\n                variables: {\r\n                    report,\r\n                    students: selected\r\n                }\r\n            })\r\n        } else {\r\n            await moveR2({\r\n                variables: {\r\n                    report,\r\n                    students: selected\r\n                }\r\n            })\r\n        }\r\n        setSelected([])\r\n    }\r\n\r\n    const doActionWithConfirm = async (command: any, modalTitle: string, msg:string) => {\r\n        if (!selected || selected.length === 0) {\r\n            message.error('Chọn hồ sơ muốn bảo lưu trước khi thực hiện thao tác')\r\n            return\r\n        }\r\n        try {\r\n            Modal.confirm({\r\n                visible: withdrawModal,\r\n                title: modalTitle,\r\n                content: msg,\r\n                onCancel: () => toggleWDRModal(false),\r\n                onOk: async () => {\r\n                    toggleWorking(true)\r\n                    await command({\r\n                        variables: {\r\n                            students: selected\r\n                        }\r\n                    })\r\n                    setSelected([])\r\n                    toggleWorking(false)\r\n                },\r\n                okButtonProps: {\r\n                    loading: working\r\n                }\r\n            })\r\n            toggleWDRModal(false)\r\n        } catch (e) {\r\n            message.error('Đã có lỗi xẩy ra trong quá trình thực hiện - vui lòng kiểm tra lại')\r\n        }\r\n    }\r\n\r\n    const doAction = async (command: any ) => {\r\n        if (!selected || selected.length === 0) {\r\n            message.error('Chọn hồ sơ trước khi thực hiện thao tác', 100)\r\n            return\r\n        }\r\n        try {\r\n            toggleWorking(true)\r\n            await command({\r\n                variables: {\r\n                    students: selected\r\n                }\r\n            })\r\n            setSelected([])\r\n            toggleWorking(false)\r\n        } catch (e) {\r\n            message.error('Đã có lỗi xẩy ra trong quá trình thực thi')\r\n        }\r\n    }\r\n\r\n    const confirmFinalFail = async (reason: string) => {\r\n        let content = 'Đánh dấu các hồ sơ đã chọn thi trượt'\r\n        switch (reason) {\r\n            case 'THI_TRUOT_LT':\r\n                content += ` lý thuyết?`\r\n                break;\r\n            case 'THI_TRUOT_SH':\r\n                content +=` Sa hình`\r\n                break;\r\n            case 'THI_TRUOT_DT':\r\n                content += ` Đường trường`\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        try {\r\n            Modal.confirm({\r\n                visible: withdrawModal,\r\n                onCancel: () => toggleWDRModal(false),\r\n                onOk: async () => {\r\n                    await admMarkFinalFail({\r\n                        variables: {\r\n                            students: selected,\r\n                            reason\r\n                        }\r\n                    })\r\n                    setSelected([])\r\n                },\r\n                title: 'Đánh dấu hồ sơ thi trượt',\r\n                content\r\n            })\r\n        } catch (e) {\r\n            message.error('Không thể thay đổi thông tin hồ sơ')\r\n        }\r\n    }\r\n\r\n    const exportFile = (data: any) => {\r\n        // console.log('exporting....')\r\n        const ws = XLSX.utils.json_to_sheet(data.map((std:Record<string,any>) => ({\r\n            'Mã Hồ sơ': std.randomId,\r\n            'Tên': std.ten,\r\n            'Ngày Sinh': moment(parseFloat(std.ngaysinh)).format('DD/MM/YYYY'),\r\n            'Hạng bằng lái': std.hangbang,\r\n            'Số điện thoại': std.mobile,\r\n            'Trạng thái hồ sơ': StudentStatus[std.trangthai],\r\n            'Ngày tạo hồ sơ': moment(parseFloat(std.created)).format('DD/MM/YYYY'),\r\n        })))\r\n        const wb = XLSX.utils.book_new()\r\n        XLSX.utils.book_append_sheet(wb, ws, 'Danh sach')\r\n        XLSX.writeFile(wb, 'danhsach.xlsx')\r\n    }\r\n\r\n    const onExportClick = async () => {\r\n        await exportXLSX({\r\n            variables: {\r\n                filter,\r\n                page: 1,\r\n                limit: 10000\r\n            }\r\n        })\r\n    }\r\n    let MenuOption = (<Menu />)\r\n    // if (user.role === 'TEACHER') {\r\n    //     MenuOption = (\r\n    //         <Menu theme=\"dark\">\r\n    //             <Menu.Item icon={<PlusOutlined />} key=\"t1\" onClick={() => toggleCreateDrw(!createDrw)}>\r\n    //                 Thêm hồ sơ\r\n    //             </Menu.Item>\r\n    //             <Menu.SubMenu key=\"_bc\" icon={<CaretLeftFilled />} title=\"Yêu cầu xác nhận thanh toán\">\r\n    //                 <Menu.Item icon={<DollarOutlined />} key=\"t2\" onClick={() => doAction(requestConfirmP)}>\r\n    //                     Yêu cầu XNTT đợt 1\r\n    //                 </Menu.Item>\r\n    //                 <Menu.Item icon={<PoundOutlined />} key=\"t3\" onClick={() => doAction(requestConfirmP2)}>\r\n    //                     Yêu cầu XNTT đợt 2\r\n    //                 </Menu.Item>\r\n    //                 <Menu.Item icon={<TransactionOutlined />} key=\"t4\" onClick={() => doAction(tRequestCRF)}>\r\n    //                     Yêu cầu XNTT thi lại\r\n    //                 </Menu.Item>\r\n    //             </Menu.SubMenu>\r\n                \r\n    //             <Menu.Item icon={<RollbackOutlined />} key=\"t5\" onClick={() => doAction(requestWD)}>\r\n    //                 Yêu cầu rút hồ sơ\r\n    //             </Menu.Item>\r\n    //             <Menu.Item icon={<ReloadOutlined />} key=\"t6\" onClick={() => doAction(requestReturnResult)}>\r\n    //                 Yêu cầu quay lại thi\r\n    //             </Menu.Item>\r\n    //         </Menu>\r\n    //     )\r\n    // }\r\n    if (user.role === 'TEACHER') {\r\n        MenuOption = (\r\n            <Menu theme=\"dark\">\r\n                <Menu.Item icon={<PlusOutlined />} key=\"t1\" onClick={() => toggleCreateDrw(!createDrw)}>\r\n                    Thêm hồ sơ\r\n                </Menu.Item>\r\n                <Menu.SubMenu key=\"_bc\" icon={<CaretLeftFilled />} title=\"Yêu cầu xác nhận thanh toán\">\r\n                    <Menu.Item icon={<DollarOutlined />} key=\"t2\" onClick={() => doAction(requestConfirmP)}>\r\n                        Yêu cầu XNTT đợt 1\r\n                    </Menu.Item>\r\n                    <Menu.Item icon={<PoundOutlined />} key=\"t3\" onClick={() => doAction(requestConfirmP2)}>\r\n                        Yêu cầu XNTT đợt 2\r\n                    </Menu.Item>\r\n                    <Menu.Item icon={<TransactionOutlined />} key=\"t4\" onClick={() => doAction(tRequestCRF)}>\r\n                        Yêu cầu XNTT thi lại\r\n                    </Menu.Item>\r\n                </Menu.SubMenu>\r\n                <Menu.Item icon={<SwapOutlined />} key=\"_T41\" onClick={() => {\r\n                    if (!selected || selected.length === 0) {\r\n                        message.error('Vui lòng chọn hồ sơ trước khi thực hiện thao tác')\r\n                        return\r\n                    } else {\r\n                        toggleChangeGradeModal(true)\r\n                    }\r\n                }}>\r\n                    Yêu cầu đổi hạng bằng\r\n                </Menu.Item>\r\n                <Menu.Item icon={<RollbackOutlined />} key=\"t5\" onClick={() => doAction(requestWD)}>\r\n                    Yêu cầu rút hồ sơ\r\n                </Menu.Item>\r\n                <Menu.Item icon={<ReloadOutlined />} key=\"t6\" onClick={() => doAction(requestReturnResult)}>\r\n                    Yêu cầu quay lại thi\r\n                </Menu.Item>\r\n                <Menu.Item icon={<ReloadOutlined />} key=\"t6\" onClick={() => doActionWithConfirm(tRequestRetestFinal, 'Yêu cầu thi SH lại', 'Gửi yêu cầu đến bộ phận đào tạo để thi sát hạch lại cho những hồ sơ đã chọn?')}>\r\n                    Yêu cầu thi lại sát hạch\r\n                </Menu.Item>\r\n            </Menu>\r\n        )\r\n    }\r\n    if (user.role === 'ADMIN') {\r\n        MenuOption = (\r\n            <Menu theme=\"dark\">\r\n                <Menu.SubMenu key=\"A1\" icon={<CaretLeftFilled />} title=\"Báo cáo \">\r\n                    <Menu.Item icon={<OrderedListOutlined />} key=\"_a2\" onClick={() => toggleReportModal(true)}>\r\n                        Chuyển báo cáo 1\r\n                    </Menu.Item>\r\n                    <Menu.Item icon={<UnorderedListOutlined />} key=\"_a3\" onClick={() => toggleBC2Modal(true)}>\r\n                        Chuyển báo cáo 2\r\n                    </Menu.Item>\r\n                </Menu.SubMenu>\r\n                <Menu.SubMenu key=\"_chgrd\" title=\"Hạng bằng\" icon={<CaretLeftFilled />}>\r\n                    <Menu.Item icon={<SwapLeftOutlined />} key=\"_chgrd_1\" onClick={() => doActionWithConfirm(admAcceptChangeGrd, 'Đổi hạng bằng', 'Đồng ý đổi hạng bằng cho các hồ sơ đã chọn ?')}>\r\n                        Đồng ý đổi hạng bằng\r\n                    </Menu.Item>\r\n                    <Menu.Item icon={<SwapLeftOutlined />} key=\"_chgrd_2\" onClick={() => doAction(admRejectChangeGrd)}>\r\n                        KHÔNG Đồng ý đổi hạng bằng\r\n                    </Menu.Item>\r\n                </Menu.SubMenu>\r\n                <Menu.SubMenu key=\"_course\" icon={<CaretLeftFilled />} title=\"Khóa học\">\r\n                    <Menu.Item icon={<CheckOutlined />} key=\"_a4\" onClick={() => doAction(markComplete)}>\r\n                        Đánh dấu hoàn thành khóa học\r\n                    </Menu.Item>\r\n                    <Menu.Item icon={<DeleteOutlined />} key=\"_a5\" onClick={() => doActionWithConfirm(admMarkRemove, 'Hủy Hồ sơ | bỏ học', 'Bạn có chắc muốn hủy các hồ sơ đã chọn?')}>\r\n                        Hủy hồ sơ / bỏ học\r\n                    </Menu.Item>\r\n                    <Menu.Item icon={<CheckSquareOutlined />} key=\"_a6\" onClick={() => doAction(markGrad)}>\r\n                        Đánh dấu Đã tốt nghiệp\r\n                    </Menu.Item>\r\n                    <Menu.Item icon={<ExclamationOutlined />} key=\"_a7\" onClick={() => doAction(markFail)}>\r\n                        Đánh dấu trượt TN\r\n                    </Menu.Item>\r\n                    <Menu.Item icon={<RetweetOutlined />} key=\"_a8\" onClick={() => doAction(markforretest)}>\r\n                        Vào danh sách thi lại TN\r\n                    </Menu.Item>\r\n\r\n                    <Menu.Item icon={<UnorderedListOutlined />} key=\"_a9\" onClick={() => doActionWithConfirm(reserveResult, 'Bảo lưu kết quả', 'Bạn có chắc muốn bảo lưu kết quả cho các hồ sơ đã chọn?')}>\r\n                        Bảo lưu kết quả\r\n                    </Menu.Item>\r\n                    <Menu.Item icon={<ReloadOutlined />} key=\"_a10\" onClick={() => doActionWithConfirm(admConfirmReturn, 'Xác nhận quay lại', 'Xác nhận cho các hồ sơ đang bảo lưu quay lại thi')}>\r\n                        Xác nhận quay lại thi\r\n                    </Menu.Item>\r\n                    <Menu.Item icon={<ReloadOutlined />} key=\"_a11\" onClick={() => doActionWithConfirm(aAcceptRetestFinal, 'Xác nhận cho thi lại', 'Xác nhận cho các hồ sơ  đã chọn thi lại sát hạch')}>\r\n                        Đồng ý cho thi lại sát hạch\r\n                    </Menu.Item>\r\n                </Menu.SubMenu>\r\n                <Menu.SubMenu key=\"_failed\" icon={<CaretLeftFilled />} title=\"Thi trượt\">\r\n                    <Menu.Item key=\"a11\" onClick={() => confirmFinalFail('THI_TRUOT_LT')}>Thi trượt lý thuyết</Menu.Item>\r\n                    <Menu.Item key=\"a12\" onClick={() => confirmFinalFail('THI_TRUOT_SH')}>Thi trượt Sa hình</Menu.Item>\r\n                    <Menu.Item key=\"a13\" onClick={() => confirmFinalFail('THI_TRUOT_DT')}>Thi trượt đường trường</Menu.Item>\r\n                </Menu.SubMenu>\r\n                <Menu.Item icon={<CheckCircleOutlined color=\"green\" />} key=\"_a14\" onClick={() => doActionWithConfirm(admMarkFinish, 'Xác nhận Hoàn thành', 'Xác nhận cho các hồ sơ đã chọn hoàn thành khóa học')}>\r\n                    Xác nhận Hoàn thành\r\n                </Menu.Item>\r\n            </Menu>\r\n        )\r\n    }\r\n    if (user.role === 'FINANCE') {\r\n        MenuOption = (\r\n            <Menu theme=\"dark\">\r\n                <Menu.SubMenu key=\"f1\" icon={<CaretLeftFilled />} title=\"Xác nhận thanh toán\">\r\n                    <Menu.Item icon={<DollarOutlined />} key=\"_f2\" onClick={() => {\r\n                        setCPModalTitle('Xác nhận thanh toán đợt một')\r\n                        setConfirmCmd('paymentOne')\r\n                        toggleCPModal(true)\r\n                    }}>\r\n                        Xác nhận thanh toán đợt 1\r\n                    </Menu.Item>\r\n                    {/* <Menu.Item icon={<DollarOutlined />} key=\"_f2\" onClick={() => doAction(confirmP)}>\r\n                        Xác nhận thanh toán đợt 1\r\n                    </Menu.Item> */}\r\n                    <Menu.Item icon={<PoundOutlined />} key=\"_f3\" onClick={() => {\r\n                        setCPModalTitle('Xác nhận thanh toán đợt hai')\r\n                        setConfirmCmd('paymentTwo')\r\n                        toggleCPModal(true)\r\n                    }}>\r\n                        Xác nhận thanh toán đợt 2\r\n                    </Menu.Item>\r\n                    <Menu.Item icon={<CheckCircleOutlined />} key=\"_f4\" onClick={() => {\r\n                        setCPModalTitle('Xác nhận thanh toán thi lại')\r\n                        setConfirmCmd('admCFRF')\r\n                        toggleCPModal(true)\r\n                    }}>\r\n                        Xác nhận thanh toán thi lại\r\n                    </Menu.Item>\r\n                </Menu.SubMenu>\r\n                <Menu.SubMenu title=\"Đổi hạng bằng\" icon={<CaretLeftFilled />} key=\"_fn200\">\r\n                    <Menu.Item icon={<CheckOutlined />} onClick={() => doActionWithConfirm(fnAcceptChangeGrd, 'Đổi hạng bằng', 'Bạn có chắc muốn đồng ý đổi hạng bằng cho các hồ sơ đã chọn?')}>\r\n                        Đồng ý đổi bằng\r\n                    </Menu.Item>\r\n                    <Menu.Item icon={<CloseOutlined />} onClick={() => doAction(fnRejectChangeGrd)}>\r\n                        KHÔNG đồng ý đổi bằng\r\n                    </Menu.Item>\r\n                </Menu.SubMenu>\r\n                <Menu.Item icon={<CheckCircleOutlined />} key=\"_f5\" onClick={() =>{\r\n                    setCPModalTitle('Xác nhận hoàn tiền rút hồ sơ')\r\n                    setConfirmCmd('cfWithdraw')\r\n                    toggleCPModal(true)\r\n                }}>\r\n                    Chấp thuận rút HS\r\n                </Menu.Item>\r\n                {/* <Menu.Item icon={<CheckCircleOutlined />} key=\"_f5\" onClick={() => doAction(cfWithdraw)}>\r\n                    Chấp thuận rút HS\r\n                </Menu.Item> */}\r\n                <Menu.Item icon={<DeleteOutlined />} key=\"_f6\" onClick={() => doAction(rejectWDFN)}>\r\n                    Không chấp thuận rút HS\r\n                </Menu.Item>\r\n            </Menu>\r\n        )\r\n    }\r\n    if (user.role === 'MANAGER') {\r\n        MenuOption = (\r\n            <Menu theme=\"dark\">\r\n                <Menu.Item icon={<CheckCircleOutlined />} key=\"_m1\" onClick={() =>toggleRefundModal(true)}>\r\n                    Chấp thuận rút HS\r\n                </Menu.Item>\r\n                {/* <Menu.Item icon={<CheckCircleOutlined />} key=\"_m1\" onClick={() => doAction(acceptWDGD)}>\r\n                    Chấp thuận rút HS\r\n                </Menu.Item> */}\r\n                <Menu.Item icon={<DeleteOutlined />} key=\"_m2\" onClick={() => doAction(rejectWDGD)}>\r\n                    Không chấp thuận rút HS\r\n                </Menu.Item>\r\n            </Menu>\r\n        )\r\n    }\r\n\r\n\r\n    const extras = [\r\n        <Tooltip key=\"_exprt\" title=\"Tải xuống file Excel\">\r\n            <Button loading={exporting} shape=\"round\" type=\"text\" icon={<DownloadOutlined />} onClick={() => onExportClick()} />\r\n        </Tooltip>,\r\n        <Tooltip key=\"_filt\" title={notFilterEmpty() ? 'Bỏ bộ lọc' : 'Lọc hồ sơ'}>\r\n            <Button\r\n                danger={notFilterEmpty() || false}\r\n                onClick={() => onFilterClick()}\r\n                key=\"_Filter\"\r\n                shape=\"round\"\r\n                type=\"text\"\r\n                >\r\n                <FilterOutlined />\r\n                {/* {notFilterEmpty() ? 'Bỏ bộ lọc' : 'Lọc hồ sơ'} */}\r\n            </Button>\r\n        </Tooltip>,\r\n        <Tooltip title=\"Tải lại\" key=\"_reload\">\r\n            <Button type=\"text\" key=\"_reload\" onClick={() => loadStudents({ variables: { filter, page: currentPage, limit: pageSize } })} shape=\"round\">\r\n                <ReloadOutlined />\r\n            </Button>\r\n        </Tooltip>,\r\n        <Dropdown trigger={['click']} key=\"_options\" overlay={MenuOption}>\r\n            <Tooltip title=\"Chức năng\">\r\n                <Button type=\"primary\" icon={<EllipsisOutlined />} loading={working} />\r\n            </Tooltip>\r\n        </Dropdown>\r\n    ]\r\n    \r\n    return (\r\n        <div>\r\n            <PageHeader\r\n                title={`Danh sách hồ sơ`}\r\n                extra={extras}\r\n            />\r\n            <StudentList\r\n                rowSelection={rowSelection}\r\n                students={students.loadStudents}\r\n                loading={loadingStudents}\r\n                currentPage={currentPage}\r\n                setCurrentPage={setCurrentPage}\r\n                pageSize={pageSize}\r\n                sort={sort}\r\n                setSort={setSort}\r\n            />\r\n            <div>\r\n                <StudentDrawer\r\n                    visible={createDrw}\r\n                    onClose={() => toggleCreateDrw(false)}\r\n                    createStudent={createStd}\r\n                />\r\n            </div>\r\n            <FilterModal\r\n                filter={filter}\r\n                setFilter={setFilter}\r\n                visible={filterModal}\r\n                onCancel={() => toggleFilterModal(false)}\r\n                onOk={() => toggleFilterModal(false)}\r\n            />\r\n            <ReportModal\r\n                dataKey=\"loadAReport\"\r\n                query={LOAD_A_REPORT}\r\n                onMove={(report: string) => onMove(report, 'BC1')}\r\n                visible={reportModal}\r\n                onCancel={() => toggleReportModal(false)}\r\n                onOk={() => toggleReportModal(false)}\r\n                />\r\n            <ReportModal\r\n                dataKey=\"loadBreports\"\r\n                query={LOAD_B_REPORTS}\r\n                onMove={(report: string) => onMove(report, 'BC2')}\r\n                visible={bc2Modal}\r\n                onCancel={() => toggleBC2Modal(false)}\r\n                onOk={() => toggleBC2Modal(false)}\r\n            />\r\n            <CPModal\r\n                title={cpModalTitle}\r\n                visible={cpModal}\r\n                onCancel={() => toggleCPModal(false)}\r\n                onOk={()=>null}\r\n                confirm={{\r\n                    'paymentOne': confirmP,\r\n                    'paymentTwo': confirmP2,\r\n                    'admCFRF': admCFRF,\r\n                    'cfWithdraw': cfWithdraw\r\n                }}\r\n                command={confirmCmd}\r\n                selected={selected}\r\n            />\r\n            <RefundModal\r\n                students={students.loadStudents.students.filter((s:any) => {\r\n                    return selected.indexOf(s._id) >= 0\r\n                })}\r\n                // students={[]}\r\n                onOk={() => doAction(acceptWDGD)}\r\n                visible={refundModal}\r\n                onCancel={()=>toggleRefundModal(false)}\r\n            />\r\n            <ChangeGradeModal\r\n                visible={changeGradeModal}\r\n                onCancel={() => toggleChangeGradeModal(false)}\r\n                onOk={async (ycdh: string) => {\r\n                    await tRequestChangeGrd({\r\n                        variables: {\r\n                            students: selected,\r\n                            ycdh\r\n                        }\r\n                    })\r\n                }}\r\n                students={students.loadStudents.students.filter((s: any) => {\r\n                    return selected.indexOf(s._id) >= 0\r\n                })}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default TLandingPage","import React from 'react'\r\nimport {\r\n    Modal,\r\n} from 'antd'\r\n\r\ntype CType = {\r\n    visible: boolean\r\n    onCancel: () => void\r\n    onOk: () => void\r\n}\r\n\r\nconst ReserveModal: React.FC<CType> = ({\r\n    visible,\r\n    onCancel,\r\n    onOk\r\n}) => {\r\n    \r\n    return (\r\n        <Modal\r\n            title=\"Gửi yêu cầu rút hồ sơ?!\"\r\n            visible={visible}\r\n            onCancel={onCancel}\r\n            onOk={onOk}\r\n        >\r\n            <p>\r\n                Gửi yêu cầu rút hồ sơ tới bộ phận đào tạo. Phòng đào tạo sẽ phê duyệt việc rút hồ sơ và hoàn tiền.\r\n                Bạn có thật sự muốn rút hồ sơ này?\r\n            </p>\r\n        </Modal>\r\n    )\r\n}\r\n\r\nexport default ReserveModal\r\n","import React from 'react'\r\nimport {\r\n    Modal,\r\n    List\r\n} from 'antd'\r\nimport LoadinCenter from '../../../common/LoadingCenter'\r\n// import { report } from 'process'\r\nconst rStatus = {\r\n    'PENDING': 'Đang mở',\r\n    'APPROVED': \"Đã duyệt\"\r\n}\r\n\r\ntype CType = {\r\n    visible: boolean\r\n    onCancel: () => void\r\n    onOk: (report: string) => void\r\n    reports?: Record<string,any>[] | []\r\n    loading: boolean\r\n}\r\n\r\nconst AvailableReportModal: React.FC<CType> = ({\r\n    visible,\r\n    onCancel,\r\n    onOk,\r\n    reports = [],\r\n    loading\r\n}) => {\r\n    return (\r\n        <Modal\r\n            title=\"Chuyển hồ sơ vào báo cáo 1?\"\r\n            visible={visible}\r\n            onCancel={onCancel}\r\n            onOk={() => null}\r\n        >\r\n            {loading && (\r\n                <LoadinCenter />\r\n            )}\r\n            {reports?.length > 0 ? (\r\n                <List\r\n                    dataSource={reports}\r\n                    renderItem={(item) => (\r\n                        <List.Item key={item._id} style={{ cursor: 'pointer'}} onClick={() => onOk(item._id)}>\r\n                            <List.Item.Meta\r\n                                title={`${item.name} - (${item.hangbang})`}\r\n                                description={item.desc}\r\n                            />\r\n                            <div style={{textAlign: 'center'}}>\r\n                                <p>\r\n                                    <strong>\r\n                                        {item.stdCount || 0}\r\n                                    </strong>\r\n                                </p>\r\n                                <p>\r\n                                    {rStatus[item.status as keyof Object]}\r\n                                </p>\r\n                            </div>\r\n                        </List.Item>\r\n                    )}\r\n                />\r\n            ) : <span>Không tìm thấy báo cáo phù hợp</span>}\r\n        </Modal>\r\n    )\r\n}\r\nexport default AvailableReportModal","import React from 'react'\r\nimport {\r\n    Modal,\r\n    List,\r\n    message\r\n} from 'antd'\r\nimport {\r\n    gql,\r\n    useMutation,\r\n    useLazyQuery\r\n} from '@apollo/client'\r\nimport {\r\n    T_REQUEST_SWAP\r\n} from '../../../common/ClientQueries'\r\nimport { CheckOutlined } from '@ant-design/icons'\r\n\r\nconst LOAD_SWAP_STDS = gql `\r\n    query loadStudents($filter: FilterInput) {\r\n        loadStudents(filter: $filter) {\r\n            students {\r\n                _id\r\n                ten\r\n                randomId\r\n                mobile\r\n            }\r\n        }\r\n    }\r\n`\r\n\r\n\r\ntype CType = {\r\n    visible: boolean\r\n    onCancel: () => void\r\n    onOk: () => void,\r\n    student: string\r\n}\r\n\r\nconst SwapModal: React.FC<CType> = ({\r\n    visible,\r\n    onCancel,\r\n    onOk,\r\n    student\r\n}) => {\r\n    const [requestSwp, { loading }] = useMutation(T_REQUEST_SWAP)\r\n    const [loadStudents, { loading: loadingStd, data }] = useLazyQuery(LOAD_SWAP_STDS, { fetchPolicy: 'network-only'})\r\n    const [selected, setSelected] = React.useState('')\r\n    React.useEffect(() => {\r\n        const load = async () => {\r\n            await loadStudents({\r\n                variables: {\r\n                    filter: {\r\n                        trangthai: 'CHO_VAO_BC_1'\r\n                    }\r\n                }\r\n            })\r\n        }\r\n        if (visible) {\r\n            load()\r\n        }\r\n    }, [loadStudents, visible])\r\n\r\n    const onSwap = async (replacement: string) => {\r\n        try {\r\n            await requestSwp({\r\n                variables: {\r\n                    student,\r\n                    replacement\r\n                }\r\n            })\r\n            message.success('Yêu cầu đổi chỗ thành công')\r\n            onCancel()\r\n        } catch (error) {\r\n            message.error('Không thể yêu cầu đổi chỗ, vui lòng kiểm tra lại thông tin')\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Modal\r\n            title=\"Yêu cầu đổi chỗ\"\r\n            visible={visible}\r\n            onCancel={onCancel}\r\n            onOk={() => onSwap(selected)}\r\n            okButtonProps={{ loading }}\r\n        >\r\n            {loadingStd && <span>Loading....</span>}\r\n            {data && (\r\n                <List\r\n                    dataSource={data.loadStudents.students}\r\n                    renderItem={(item:any) => (\r\n                        <List.Item\r\n                            actions={selected === item._id ? [<CheckOutlined twoToneColor=\"blue\" />] : []}\r\n                            key={item._id}\r\n                            style={{ cursor: 'pointer'}}\r\n                            onClick={() => setSelected(item._id)}\r\n                        >\r\n                            <List.Item.Meta title={`${item.ten} - ${item.mobile}`} description={item.randomId} />\r\n                        </List.Item>\r\n                    )}\r\n                />\r\n            )}\r\n        </Modal>\r\n    )\r\n}\r\n\r\nexport default SwapModal","import React from 'react'\r\nimport {\r\n    Modal,\r\n    Form,\r\n    Select\r\n} from 'antd'\r\nimport StudentStatus from '../../../common/StudentStatus'\r\n\r\nconst { Option } = Select\r\n\r\ntype MType = {\r\n    visible: boolean\r\n    onCancel: () => void\r\n    onOk: (trangthai: string) => void\r\n}\r\n\r\nconst ForceStatusModal:React.FC<MType> = ({\r\n    visible,\r\n    onCancel,\r\n    onOk\r\n}) => {\r\n    const [form] = Form.useForm()\r\n    const [working, toggleWorking] = React.useState(false)\r\n    const onConfirm = async () => {\r\n        const { trangthai } = form.getFieldsValue()\r\n        toggleWorking(true)\r\n        onOk(trangthai)\r\n        toggleWorking(false)\r\n    }\r\n    return (\r\n        <Modal\r\n            title=\"Đặt lại trạng thái hồ sơ\"\r\n            visible={visible}\r\n            onCancel={onCancel}\r\n            onOk={onConfirm}\r\n            okButtonProps={{\r\n                loading: working\r\n            }}\r\n        >\r\n            <Form form={form} labelCol={{ span: 8 }} wrapperCol={{ span: 16}}>\r\n                <Form.Item label=\"Chuyển đến trạng thái\" name=\"trangthai\">\r\n                    <Select>\r\n                        {Object.keys(StudentStatus).map(k => (\r\n                            <Option value={k}>{StudentStatus[k]}</Option>\r\n                        ))}\r\n                    </Select>\r\n                </Form.Item>\r\n            </Form>\r\n        </Modal>\r\n    )\r\n}\r\nexport default ForceStatusModal","import React from 'react'\r\nimport {\r\n    PageHeader,\r\n    Button,\r\n    // Dropdown,\r\n    Menu,\r\n    Modal,\r\n    Dropdown\r\n} from 'antd'\r\nimport {\r\n    // EllipsisOutlined,\r\n    DollarCircleOutlined,\r\n    UsergroupAddOutlined,\r\n    CalendarOutlined,\r\n    DeleteOutlined,\r\n    CloseOutlined,\r\n    ExclamationCircleOutlined ,\r\n    // DollarOutlined,\r\n    EllipsisOutlined,\r\n    CheckOutlined,\r\n    CheckCircleFilled,\r\n    DeleteTwoTone,\r\n    // CalendarTwoTone,\r\n    ReloadOutlined,\r\n    OrderedListOutlined,\r\n    RetweetOutlined,\r\n    InfoCircleOutlined,\r\n    // CaretRightFilled,\r\n    CaretLeftFilled,\r\n    PoundOutlined,\r\n    SwapOutlined,\r\n    FieldTimeOutlined,\r\n    ArrowUpOutlined,\r\n    UserSwitchOutlined,\r\n    WarningOutlined\r\n} from '@ant-design/icons'\r\nimport {\r\n    useHistory\r\n} from 'react-router-dom'\r\nimport ReserveModal from './Modals/ReserveModal'\r\nimport AvailableReportModal from './Modals/ReportListModal'\r\nimport Report2Modal from '../Main/Modals/ReportOneModal'\r\nimport SwapModal from './Modals/SwapModal'\r\nimport {\r\n    LOAD_B_REPORTS,\r\n    // ADM_CONFIRM_SWAP\r\n} from '../../common/ClientQueries'\r\nimport ForceStatusModal from './Modals/ForceStatusModal'\r\nimport {\r\n    useMutation\r\n} from '@apollo/client'\r\nimport {\r\n    LOAD_SINGLE_STD,\r\n    CONFIRM_PAYMENT,\r\n    CONFIRM_PAYMENT_TWO,\r\n    ADM_CONFIRM_RETEST_FEE,\r\n    CONFIRM_WITHDRAW,\r\n    T_REQUEST_CHANGE_GRADE\r\n} from '../../common/ClientQueries'\r\nimport CPModal from '../Main/Modals/ConfirmPaymentModal'\r\nimport RefundModal from '../Main/Modals/RefundList'\r\nimport ChangeGradeModal from './Modals/ChangeGradeModal'\r\n// import { Moment } from 'moment'\r\n\r\ntype CType = {\r\n    student: any\r\n    role: string\r\n    deleteStudent: (student: string) => void\r\n    moveToR1: (students: string[], report: string) => void\r\n    reports: Record<string,any>[] | []\r\n    loadingReport: boolean\r\n    doAction: (action: string, students: string[]) => void\r\n    movetoR2: (students: string[], report: string) => void\r\n    confirmAction: (action: string, students: string[], modalTitle: string, modalContent: string) => void\r\n    markFailed: (students: string[], reason: string) => void\r\n    changeStatus: (students: string[], reason: string) => void\r\n}\r\n\r\n\r\nconst Header:React.FC<CType> = ({\r\n    student,\r\n    role,\r\n    moveToR1,\r\n    deleteStudent,\r\n    reports,\r\n    loadingReport,\r\n    doAction,\r\n    movetoR2,\r\n    confirmAction,\r\n    markFailed,\r\n    changeStatus\r\n}) => {\r\n    const [reportModal, toggleReportModal] = React.useState(false)\r\n    const [reservModal, toggleReservModal] = React.useState(false)\r\n    const [deleteModal, toggleDeleteModdal] = React.useState(false)\r\n    const [changeGradeModal, toggleChangeGradeModal] = React.useState(false)\r\n    // const [rModal, toggleRModal] = React.useState(false)\r\n    // const [acceptRsvModal, toggleAcceptRsvModal] = React.useState(false)\r\n    const [r2Modal, toggleR2Modal] = React.useState(false)\r\n    const [swapModal, toggleSwapModal] = React.useState(false)\r\n    const [statusModal, toggleStatusModal] = React.useState(false)\r\n    const [cpModal, toggleCPModal] = React.useState(false)\r\n    const [refundModal, toggleRefundModal] = React.useState(false)\r\n    const [confirmCMD, setConfirmCMD] = React.useState('')\r\n    const [cpTitle, setCPTitle] = React.useState('')\r\n    const [confirmP1] = useMutation(CONFIRM_PAYMENT, { refetchQueries: [LOAD_SINGLE_STD] })\r\n    const [confirmP2] = useMutation(CONFIRM_PAYMENT_TWO, { refetchQueries: [LOAD_SINGLE_STD] })\r\n    const [admCFRF] = useMutation(ADM_CONFIRM_RETEST_FEE, { refetchQueries: [LOAD_SINGLE_STD] })\r\n    const [confirmWithdraw] = useMutation(CONFIRM_WITHDRAW, { refetchQueries: [LOAD_SINGLE_STD]})\r\n    const [tRequestChangeGrade] = useMutation(T_REQUEST_CHANGE_GRADE, { refetchQueries: [LOAD_SINGLE_STD]})\r\n    const selected = [student._id]\r\n\r\n    const history = useHistory()\r\n    const createMenu = () => {\r\n        const { trangthai, _id } = student\r\n        const items = []\r\n        // teacher actions\r\n        if (role === 'TEACHER') {\r\n            if (trangthai === 'MOI_TAO') {\r\n                items.push(<Menu.Item disabled={trangthai !== 'MOI_TAO'} key=\"T_1\" icon={<DollarCircleOutlined />} onClick={() => doAction('requestConfirmPayment',[_id])}>Yêu cầu XN thanh toán đợt 1</Menu.Item>)\r\n                // items.push(<Menu.Item key=\"T_j2\" onClick={() => toggleReservModal(true)} icon={<UsergroupAddOutlined />}>Yêu cầu rút hồ sơ</Menu.Item>)\r\n            }\r\n            if (trangthai === 'CHO_VAO_BC_1') {\r\n                items.push(<Menu.Item key=\"T_j2\" onClick={() => toggleReservModal(true)} icon={<UsergroupAddOutlined />}>Yêu cầu rút hồ sơ</Menu.Item>)\r\n                items.push(<Menu.Item key=\"T_j12\" onClick={() => toggleChangeGradeModal(true)} icon={<UserSwitchOutlined />}>Yêu cầu đổi hạng bằng</Menu.Item>)\r\n            }\r\n            if (trangthai === 'DANG_TRONG_BC_1') {\r\n                // items.push(<Menu.Item key=\"T_4\" onClick={() => confirmReservBC1([_id])} icon={<CalendarOutlined />}>Yêu cầu bảo lưu</Menu.Item>)\r\n                items.push(<Menu.Item key=\"T_j2\" onClick={() => toggleSwapModal(true)} icon={<SwapOutlined />}>Yêu cầu đổi chỗ</Menu.Item>)\r\n            }\r\n            if (trangthai === 'CHO_XN_HOAN_HUY_FN') {\r\n                items.push(<Menu.Item key=\"T_3\" onClick={() => doAction('cancelWithdraw',[_id])} icon={<CalendarOutlined />}>Hủy yêu cầu rút hồ sơ</Menu.Item>)\r\n            }\r\n            // if (trangthai === 'XAC_NHAN_BC_1') {\r\n            //     items.push(<Menu.Item key=\"T_5\" onClick={() => doAction('requestConfirmP2',[_id])} icon={<DollarOutlined />}>Yêu cầu XN thanh toán đợt 2</Menu.Item>)\r\n            // }\r\n            \r\n            // if (trangthai === 'DANG_BAO_LUU_HOC') {\r\n            //     // items.push(<Menu.Item key=\"T_6\" onClick={() => doAction('requestReturn',[_id])} icon={<RollbackOutlined />}>Yêu cầu quay lại học</Menu.Item>)\r\n            // }\r\n            \r\n            if (trangthai === 'DA_HOC_XONG') {\r\n                items.push(<Menu.Item key=\"T_8\" onClick={() => doAction('requestConfirmP2',[_id])} icon={<CloseOutlined />}>Yêu cầu XNTT đợt 2</Menu.Item>)\r\n            }\r\n            // if (trangthai === 'DA_HOC_XONG' || trangthai === 'CHO_XAC_NHAN_TT2' || trangthai === 'CHO_VAO_BC_2') {\r\n            //     items.push(<Menu.Item key=\"T_9\" onClick={() => doAction('requestReserveResult', [_id])} icon={<CalendarOutlined />}>Yêu cầu bảo lưu thi</Menu.Item>)\r\n            // }\r\n            if (trangthai === 'YEU_CAU_BAO_LUU_THI') {\r\n                items.push(<Menu.Item key=\"T_9\" onClick={() => doAction('cancelReserveResult', [_id])} icon={<DeleteTwoTone />}>Hủy Yêu cầu bảo lưu thi</Menu.Item>)\r\n            }\r\n            if (trangthai === 'DANG_BAO_LUU_THI') {\r\n                items.push(<Menu.Item key=\"T_10\" onClick={() => doAction('requestReturnResult', [_id])} icon={<ReloadOutlined />}>Yêu cầu quay lại thi</Menu.Item>)\r\n            }\r\n            if (trangthai === 'THI_TRUOT_LT' || trangthai === 'THI_TRUOT_SH' || trangthai === 'THI_TRUOT_DT') {\r\n                items.push(<Menu.Item key=\"T_11\" onClick={() => doAction('tRequestCRF',[_id])} icon={<PoundOutlined />}>Yêu cầu XNTT thi lại</Menu.Item>)\r\n            }\r\n            if (trangthai === 'DA_XNTT_THI_LAI') {\r\n                items.push(<Menu.Item key=\"T_14\" onClick={() => doAction('tRequestRFinalTest', [_id])} icon={<ReloadOutlined />}>Yêu cầu thi lại sát hạch</Menu.Item>)\r\n            }\r\n\r\n        }\r\n        // finance actions - \r\n        if (role === 'FINANCE') {\r\n            if (trangthai === 'CHO_XAC_NHAN_TT1') {\r\n                // items.push(<Menu.Item key=\"F_confirmP1\" icon={<CheckOutlined />} onClick={() => doAction('confirmPayment',[_id])}>Xác nhận thanh toán đợt 1</Menu.Item>)\r\n                items.push(<Menu.Item key=\"F_confirmP1\" icon={<CheckOutlined />} onClick={() => {\r\n                    setCPTitle(\"Xác nhận thanh toán đợt một\")\r\n                    setConfirmCMD('paymentOne')\r\n                    toggleCPModal(true)\r\n                }}>Xác nhận thanh toán đợt 1</Menu.Item>)\r\n            }\r\n            if (trangthai === 'DAO_TAO_OK_DOI_HANG') {\r\n                items.push(\r\n                    <Menu.SubMenu key=\"f_hangbang\" title=\"Hạng bằng\" icon={<CaretLeftFilled />}>\r\n                        <Menu.Item icon={<CheckOutlined />} onClick={() => doAction('fnAcceptChgGrd', [_id])}>\r\n                            Đồng ý đổi hạng bằng\r\n                        </Menu.Item>\r\n                        <Menu.Item icon={<WarningOutlined />} onClick={() => doAction('fnRejectChgGrd', [_id])}>\r\n                            KHÔNG đồng ý đổi hạng bằng\r\n                        </Menu.Item>\r\n                    </Menu.SubMenu>\r\n                )\r\n            }\r\n            if (trangthai === 'CHO_XAC_NHAN_TT2') {\r\n                // items.push(<Menu.Item key=\"F_confirmP2\" icon={<CheckCircleFilled />} onClick={() => doAction('confirmPaymentTwo',[_id])}>Xác nhận thanh toán đợt 2</Menu.Item>)\r\n                items.push(<Menu.Item key=\"F_confirmP2\" icon={<CheckCircleFilled />} onClick={() => {\r\n                    setCPTitle(\"Xác nhận thanh toán đợt hai\")\r\n                    setConfirmCMD('paymentTwo')\r\n                    toggleCPModal(true)\r\n                }}>Xác nhận thanh toán đợt 2</Menu.Item>)\r\n            }\r\n            if (trangthai === 'CHO_XN_HOAN_HUY_FN') {\r\n                // items.push(<Menu.Item key=\"F_acceptwd\" icon={<CheckCircleFilled />} onClick={() => doAction('confirmWithdraw',[_id])}>Chấp thuận rút HS</Menu.Item>)\r\n                items.push(<Menu.Item key=\"F_acceptwd\" icon={<CheckCircleFilled />} onClick={() => {\r\n                    setCPTitle(\"Hoàn tiền rút hồ sơ\")\r\n                    setConfirmCMD('confirmWithdraw')\r\n                    toggleCPModal(true)\r\n                }}>Chấp thuận rút HS</Menu.Item>)\r\n                items.push(<Menu.Item key=\"F_rjctwd\" onClick={() => doAction('rejectWDFN',[_id])}>Không Chấp thuận rút HS</Menu.Item>)\r\n            }\r\n            if (trangthai === 'CHO_XNTT_TL_LT') {\r\n                // items.push(<Menu.Item key=\"F_cfrf\" icon={<CheckOutlined />} onClick={() => doAction('fnConfirmRF',[_id])}>Xác nhận phí thi lại lý thuyết</Menu.Item>)\r\n                items.push(<Menu.Item key=\"F_cfrf\" icon={<CheckOutlined />} onClick={() => {\r\n                    setCPTitle(\"Xác nhận thanh toán thi lại lý thuyết\")\r\n                    setConfirmCMD('admCFRF')\r\n                    toggleCPModal(true)\r\n                }}>Xác nhận phí thi lại lý thuyết</Menu.Item>)\r\n            }\r\n            if (trangthai === 'CHO_XNTT_TL_SH') {\r\n                // items.push(<Menu.Item key=\"F_cfrf\" icon={<CheckOutlined />} onClick={() => doAction('fnConfirmRF',[_id])}>Xác nhận phí thi lại sa hình</Menu.Item>)\r\n                items.push(<Menu.Item key=\"F_cfrf\" icon={<CheckOutlined />} onClick={() => {\r\n                    setCPTitle(\"Xác nhận thanh toán thi lại Sa hình\")\r\n                    setConfirmCMD('admCFRF')\r\n                    toggleCPModal(true)\r\n                }}>Xác nhận phí thi lại sa hình</Menu.Item>)\r\n            }\r\n            if (trangthai === 'CHO_XNTT_TL_DT') {\r\n                // items.push(<Menu.Item key=\"F_cfrf\" icon={<CheckOutlined />} onClick={() => doAction('fnConfirmRF',[_id])}>Xác nhận phí thi lại đường trường</Menu.Item>)\r\n                items.push(<Menu.Item key=\"F_cfrf\" icon={<CheckOutlined />} onClick={() => {\r\n                    setCPTitle(\"Xác nhận thanh toán thi lại Đường trường\")\r\n                    setConfirmCMD('admCFRF')\r\n                    toggleCPModal(true)\r\n                }}>Xác nhận phí thi lại đường trường</Menu.Item>)\r\n            }\r\n        }\r\n        // admin actions--\r\n        if (role === 'ADMIN') {\r\n            if (trangthai ==='CHO_VAO_BC_1') {\r\n                items.push(<Menu.Item key=\"A_priorJoin\" onClick={() => toggleReportModal(true)} icon={<UsergroupAddOutlined />}>Chuyển vào báo cáo 1</Menu.Item>)\r\n            }\r\n            if (trangthai === 'DANG_YC_DOI_HANG') {\r\n                items.push(<Menu.Item key=\"A_acceptChgrd\" onClick={() => doAction('admAcceptChgGrd', [_id])} icon={<UsergroupAddOutlined />}>Đồng ý đổi hạng bằng</Menu.Item>)\r\n                items.push(<Menu.Item key=\"A_acceptChgrd\" onClick={() => doAction('admRejectChgGrd', [_id])} icon={<WarningOutlined />}>KHÔNG đồng ý đổi hạng bằng</Menu.Item>)\r\n                \r\n            }\r\n            if (trangthai === 'DA_RUT_HS') {\r\n                items.push(<Menu.Item icon={<DeleteOutlined />} key=\"A_Daruths\" onClick={() => confirmDelete(_id)}>Xóa hồ sơ</Menu.Item>)\r\n            }\r\n            if (trangthai === 'DANG_YC_DOI_CHO') {\r\n\r\n                items.push(<Menu.Item icon={<SwapOutlined />} key=\"A_SWP\" onClick={() => doAction('admConfirmSwp',[_id])}>Xác nhận đổi chỗ</Menu.Item>)\r\n            }\r\n            if (trangthai === 'XAC_NHAN_BC_1') {\r\n                items.push(<Menu.Item icon={<CheckOutlined />} key=\"A_XNHX\" onClick={() => doAction('markCompleted',[_id])}>Đánh dấu hoàn thành học</Menu.Item>)\r\n            }\r\n            if (trangthai === 'DA_HOC_XONG') {\r\n                items.push(<Menu.Item icon={<DeleteOutlined />} key=\"A_XNBL2\" onClick={() => confirmAction('markRemove', [_id], 'Huỷ hồ sơ / bỏ học', 'Bạn có chắc muốn hủy các hồ sơ đã chọn?')}>Hủy hồ sơ / bỏ học</Menu.Item>)\r\n            }\r\n            if (trangthai === 'CHO_THI_TN') {\r\n                items.push(<Menu.Item icon={<CheckOutlined />} key=\"A_5\" onClick={() => doAction('markGrad',[_id])}>Đánh dấu đã TN</Menu.Item>)\r\n                items.push(<Menu.Item icon={<ExclamationCircleOutlined />} key=\"A_6\" onClick={() => doAction('markFail',[_id])}>Đánh dấu TRƯỢT TN</Menu.Item>)\r\n            }\r\n            if (trangthai === 'TRUOT_TN') {\r\n                items.push(<Menu.Item icon={<RetweetOutlined />} key=\"A_9\" onClick={() => doAction('markForRetest',[_id])}>Vào danh sách thi lại TN</Menu.Item>)\r\n            }\r\n            if (trangthai === 'CHO_VAO_BC_2') {\r\n                items.push(<Menu.Item icon={<OrderedListOutlined />} key=\"A_7\" onClick={() => toggleR2Modal(true)}>Chuyển vào báo cáo 2</Menu.Item>)\r\n            }\r\n            if (trangthai === 'CHO_VAO_BC_2' || trangthai === 'DANG_TRONG_BC_2') {\r\n                items.push(<Menu.Item icon={<CalendarOutlined />} key=\"A_81\" onClick={() => confirmAction('reservResult',[_id], \"Bảo lưu kết quả?\", \"Bạn có muốn bảo lưu kết quả của hồ sơ này không?\")}>Bảo lưu kết quả</Menu.Item>)\r\n            }\r\n            if (trangthai === 'DANG_YC_QUAY_LAI_THI') {\r\n                items.push(<Menu.Item icon={<ReloadOutlined />} key=\"A_82\" onClick={() => confirmAction('confirmReturn',[_id], \"Quay lại thi\", \"Bạn có muốn cho hồ sơ này quay lại thi?\")}>Xác nhận quay lại thi</Menu.Item>)\r\n            }\r\n            if (trangthai === 'DANG_TRONG_BC_2') {\r\n                items.push(<Menu.Item icon={<InfoCircleOutlined />} key=\"A_8\" onClick={() => confirmAction('markFinish',[_id], \"Hoàn thành khóa học\", \"Bạn có muốn đánh dấu hồ sơ này đã hoàn thành khóa học?\")}>Hoàn thành khóa học</Menu.Item>)\r\n                items.push(\r\n                    <Menu.SubMenu key=\"_a10\" title=\"Thi trượt\" icon={<CaretLeftFilled />}>\r\n                        <Menu.Item key=\"_a101\" onClick={() => markFailed([_id], 'THI_TRUOT_LT')}>Thi trượt lý thuyết</Menu.Item>\r\n                        <Menu.Item key=\"_a102\" onClick={() => markFailed([_id], 'THI_TRUOT_SH')}>Thi trượt sa hình</Menu.Item>\r\n                        <Menu.Item key=\"_a103\" onClick={() => markFailed([_id], 'THI_TRUOT_DT')}>Thi trượt đường trường</Menu.Item>\r\n                    </Menu.SubMenu>\r\n                )\r\n            }\r\n            if (trangthai === 'DANG_YC_QUAY_LAI_THI_SH') {\r\n                items.push(<Menu.Item icon={<CheckOutlined />} key=\"A_83\" onClick={() => confirmAction('aAcceptRFinalTest',[_id], \"Quay lại thi sát hạch\", \"Bạn có muốn cho hồ sơ này quay lại thi sát hạch?\")}>Đồng ý quay lại thi sát hạch</Menu.Item>)\r\n            }\r\n        }\r\n        if (role === 'MANAGER') {\r\n            // items.push(<Menu.Item icon={<CheckOutlined />} key=\"_gd1\" onClick={() => doAction('confirmWDGD',[_id])}>Chấp thuận rút HS</Menu.Item>)\r\n            items.push(<Menu.Item icon={<CheckOutlined />} key=\"_gd1\" onClick={() => {\r\n                toggleRefundModal(true)\r\n            }}>\r\n                Chấp thuận rút HS\r\n            </Menu.Item>)\r\n            items.push(<Menu.Item icon={<DeleteOutlined />} key=\"_gd2\" onClick={() => doAction('rejectWDGD',[_id])}>Không chấp thuận rút HS</Menu.Item>)\r\n        }\r\n        if (role === 'SUPER_ADMIN') {\r\n            items.push(<Menu.Item icon={<FieldTimeOutlined />} key=\"_spa1\" onClick={() => toggleStatusModal(true)}>Đặt lại trạng thái hồ sơ</Menu.Item>)\r\n        }\r\n        const menu = (\r\n            <Dropdown\r\n                trigger={['click']}\r\n                overlay={(\r\n                    <Menu theme=\"dark\">\r\n                        {items}\r\n                    </Menu>\r\n            )}>\r\n                <Button type=\"primary\" shape=\"round\">\r\n                    <EllipsisOutlined />\r\n                </Button>\r\n            </Dropdown>\r\n            \r\n        ) \r\n        return menu\r\n    }\r\n    const confirmReserv = async () => {\r\n        await doAction('requestWithdraw',[student._id])\r\n        // console.log(enddate.toDate())\r\n        toggleReservModal(false)\r\n    }\r\n\r\n    const confirmDelete = async (student: string) => {\r\n        Modal.confirm({\r\n            onCancel: () => toggleDeleteModdal(false),\r\n            visible: deleteModal,\r\n            onOk: async () => deleteStudent(student),\r\n            title: 'Bạn có thật sự muốn xóa hồ sơ này?',\r\n        })\r\n    }\r\n\r\n    const confirmMoveToR1 = async (report: string) => {\r\n        await moveToR1([student._id], report)\r\n        toggleReportModal(false)\r\n    }\r\n\r\n    const confirmMoveR2 = async (report: string) => {\r\n        await movetoR2([student._id], report)\r\n    }\r\n\r\n    const switchStatus = async (trangthai: string) => {\r\n        // const { _id } = student\r\n        await changeStatus([student._id], trangthai)\r\n        toggleStatusModal(false)\r\n    }\r\n    \r\n    return (\r\n        <div>\r\n            <PageHeader\r\n                title=\"Thông tin hồ sơ\"\r\n                subTitle={student.randomId}\r\n                extra={createMenu()}\r\n                onBack={() => history.goBack()}\r\n            />\r\n            <AvailableReportModal\r\n                loading={loadingReport}\r\n                reports={reports}\r\n                visible={reportModal}\r\n                onCancel={() => toggleReportModal(false)}\r\n                onOk={(report: string) => confirmMoveToR1(report)}\r\n            />\r\n            <ReserveModal\r\n                visible={reservModal}\r\n                onCancel={() => toggleReservModal(false)}\r\n                onOk={confirmReserv}\r\n            />\r\n            <Report2Modal\r\n                dataKey=\"loadBreports\"\r\n                query={LOAD_B_REPORTS}\r\n                onMove={(report: string) => confirmMoveR2(report)}\r\n                visible={r2Modal}\r\n                onCancel={() => toggleR2Modal(false)}\r\n                onOk={() => toggleR2Modal(false)}\r\n            />\r\n            <SwapModal\r\n                student={student._id}\r\n                visible={swapModal}\r\n                onCancel={() => toggleSwapModal(false)}\r\n                onOk={() => toggleSwapModal(false)}\r\n            />\r\n            <ForceStatusModal\r\n                visible={statusModal}\r\n                onCancel={()=>toggleStatusModal(false)}\r\n                onOk={(trangthai: string) => switchStatus(trangthai)}\r\n            />\r\n            <CPModal\r\n                visible={cpModal}\r\n                onCancel={() => toggleCPModal(false)}\r\n                onOk={() => toggleCPModal(false)}\r\n                title={cpTitle}\r\n                confirm={{\r\n                    'paymentOne': confirmP1,\r\n                    'paymentTwo': confirmP2,\r\n                    'admCFRF': admCFRF,\r\n                    'confirmWithdraw': confirmWithdraw\r\n                }}\r\n                command={confirmCMD}\r\n                selected={selected}\r\n            />\r\n            <RefundModal\r\n                visible={refundModal}\r\n                onCancel={() => toggleRefundModal(false)}\r\n                students={[student]}\r\n                onOk={() => doAction('confirmWDGD', [student._id])}\r\n            />\r\n            <ChangeGradeModal\r\n                visible={changeGradeModal}\r\n                onCancel={() => toggleChangeGradeModal(false)}\r\n                onOk={async(ycdh: string) => {\r\n                    await tRequestChangeGrade({\r\n                        variables: {\r\n                            students: [student._id],\r\n                            ycdh\r\n                        }\r\n                    })\r\n                }}\r\n                students={[student]}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Header\r\n","import React from 'react'\r\nimport {\r\n    Typography,\r\n    Divider,\r\n    Descriptions,\r\n    // Button,\r\n    Image\r\n} from 'antd'\r\nimport moment from 'moment'\r\nimport status from '../../../common/StudentStatus'\r\nimport axios from 'axios'\r\nimport {\r\n    useAuth\r\n} from '../../../../context/AuthenticationContext'\r\n\r\nconst { Title } = Typography\r\n\r\ntype BasicInfoType = {\r\n    student: any,\r\n    role: string\r\n}\r\n\r\n\r\nconst BasicInfo:React.FC<BasicInfoType> = ({\r\n    student,\r\n    role,\r\n}) => {\r\n    // const { getToken } = useAuth()\r\n    // const token = getToken()\r\n    // const { anh34 } = student\r\n    // const axiosInstance = axios.create({\r\n    //     baseURL: 'http://localhost:3000/api',\r\n    //     headers: {\r\n    //         'x-token': 'mytoken'\r\n    //     }\r\n    // })\r\n    // axiosInstance.get(anh34)\r\n    // axios.get(`http://localhost:5001${anh34}`)\r\n    return (\r\n        <div>\r\n            <Divider />\r\n            <Descriptions\r\n                layout=\"vertical\"\r\n                title={<Title level={4}>Thông tin cơ bản</Title>}\r\n            >\r\n                <Descriptions.Item label=\"Họ và tên\">\r\n                    <strong>\r\n                        {student.ten}\r\n                    </strong>\r\n                </Descriptions.Item>\r\n                <Descriptions.Item label=\"Ngày tháng năm sinh\">{moment(parseFloat(student.ngaysinh)).format('DD/MM/YYYY')}</Descriptions.Item>\r\n                <Descriptions.Item label=\"Quê quán\">{student.quequan}</Descriptions.Item>\r\n                <Descriptions.Item label=\"Số điện thoại\">{student.mobile}</Descriptions.Item>\r\n                <Descriptions.Item label=\"CMND\">\r\n                    <Image src={`http://localhost:5001${student.anh34}?xtoken=\"some_token_i_received\"`} />\r\n                </Descriptions.Item>\r\n            </Descriptions>\r\n            <Divider />\r\n            <Descriptions\r\n                layout=\"vertical\"\r\n                title={<Title level={4}>Thông tin đào tạo</Title>}\r\n            >\r\n                <Descriptions.Item label=\"Hạng bằng lái\">\r\n                    <strong>{student.hangbang}</strong>\r\n                </Descriptions.Item>\r\n                <Descriptions.Item label=\"Số điện thoại\">\r\n                    <strong>{student.mobile}</strong>\r\n                </Descriptions.Item>\r\n                <Descriptions.Item label=\"Trạng thái\">\r\n                {/* @ts-ignore */}\r\n                    <strong>{status[student.trangthai]}</strong>\r\n                </Descriptions.Item>\r\n                <Descriptions.Item label=\"Báo cáo 1\">\r\n                    <strong>{student.baocao1?.name || 'Không có thông tin'}</strong>\r\n                </Descriptions.Item>\r\n                <Descriptions.Item label=\"Báo cáo 2\">\r\n                    <strong>{student.baocao2?.name || 'Không có thông tin'}</strong>\r\n                </Descriptions.Item>\r\n            </Descriptions>\r\n        </div>\r\n    )\r\n}\r\nexport default BasicInfo","import React from 'react'\r\nimport {\r\n    Space,\r\n    Timeline,\r\n    Typography\r\n} from 'antd'\r\nimport moment from 'moment'\r\nimport {\r\n    // ArrowRightOutlined,\r\n    CheckCircleOutlined,\r\n    // CheckCircleTwoTone,\r\n    ClockCircleOutlined,\r\n    // ClockCircleTwoTone,\r\n    ExclamationCircleOutlined,\r\n    // ExclamationCircleTwoTone,\r\n    RightCircleOutlined\r\n} from '@ant-design/icons'\r\nimport StudentStatus from '../../../common/StudentStatus'\r\n\r\nconst status = [\r\n    'MOI_TAO',\r\n    'DANG_TRONG_BC_1',\r\n    'DANG_YC_DOI_CHO',\r\n    'XAC_NHAN_BC_1',\r\n    'DANG_TRONG_BC_2',\r\n]\r\n\r\nconst redStatus = [\r\n    'TRUOT_TN',\r\n    'DA_RUT_HS',\r\n    'DA_BO_HOC',\r\n    'THI_TRUOT_LT',\r\n    'THI_TRUOT_SH',\r\n    'THI_TRUOT_DT',\r\n]\r\n\r\nconst successStatus = [\r\n    'DA_HOC_XONG',\r\n    'HOAN_THANH',\r\n    'CHO_VAO_BC_2',\r\n]\r\n\r\nconst pendingSts = [\r\n    'DANG_BAO_LUU_THI',\r\n    'DANG_YC_QUAY_LAI_THI',\r\n    'CHO_VAO_BC_1',\r\n    'CHO_XAC_NHAN_TT1',\r\n    'CHO_XN_HOAN_HUY_FN',\r\n    'CHO_XN_HOAN_HUY_GD',\r\n    'CHO_THI_TN',\r\n    'CHO_XAC_NHAN_TT2',\r\n    'CHO_XNTT_TL_LT',\r\n    'CHO_XNTT_TL_SH',\r\n    'CHO_XNTT_TL_DT',\r\n]\r\n\r\nconst { Title } = Typography\r\n\r\ntype Ctype = {\r\n    history: Record<string,any>[]\r\n}\r\n\r\nconst StudentTimeline:React.FC<Ctype> = ({\r\n    history\r\n}) => {\r\n    return (\r\n        <Space direction=\"vertical\" size=\"large\" style={{width: '100%', marginTop: '3em'}}>\r\n            <Title level={3} style={{ textAlign: 'center'}}>Lịch sử hồ sơ</Title>\r\n            <Timeline mode=\"left\">\r\n                {history.map(h => {\r\n                    let Icon\r\n                    if (successStatus.indexOf(h.state) >= 0) {\r\n                        Icon = <CheckCircleOutlined style={{color: 'green'}} />\r\n                    }\r\n                    if (status.indexOf(h.state) >= 0) {\r\n                        Icon = <RightCircleOutlined style={{color: 'green'}} />\r\n                    }\r\n                    if (redStatus.indexOf(h.state) >= 0) {\r\n                        Icon = <ExclamationCircleOutlined style={{color: 'red' }} />\r\n                    }\r\n                    if (pendingSts.indexOf(h.state) >= 0) {\r\n                        Icon = <ClockCircleOutlined style={{ color: 'darkmagenta'}} />\r\n                    }\r\n                    return (\r\n                        <Timeline.Item\r\n                            dot={Icon}\r\n                            key={h.date}\r\n                            label={moment(parseFloat(h.date)).format('DD/MM/YYYY')}\r\n                        >\r\n                            <strong>{StudentStatus[h.state]}</strong><br />\r\n                            {h.reason}\r\n                        </Timeline.Item>\r\n                    )\r\n                })}\r\n            </Timeline>\r\n        </Space>\r\n    )\r\n}\r\nexport default StudentTimeline","import React from 'react'\r\nimport {\r\n    message,\r\n    Modal,\r\n    Row,\r\n    Col,\r\n    Alert\r\n} from 'antd'\r\nimport {\r\n    // gql,\r\n    useMutation,\r\n    useLazyQuery,\r\n    // ApolloError\r\n} from '@apollo/client'\r\nimport {\r\n    useParams,\r\n    useHistory\r\n} from 'react-router-dom'\r\nimport {\r\n    useAuth\r\n} from '../../../context/AuthenticationContext'\r\nimport Header from './Header'\r\nimport BasicInfo from './StudentInfo/Basic'\r\nimport {\r\n    LOAD_A_REPORT,\r\n    LOAD_SINGLE_STD,\r\n    REQUEST_CONFIRM_PAYMENT,\r\n    CONFIRM_PAYMENT,\r\n    REQUEST_WITHDRAW,\r\n    APPROVE_RESERV,\r\n    REJECT_WD_FN,\r\n    CANCEL_WITHDRAW_REQUEST,\r\n    DELETE_STUDENT,\r\n    MOVE_TO_R1,\r\n    // REQUEST_RESERVE,\r\n    CANCEL_REQUEST_RESERV,\r\n    CONFIRM_RESERVE_BC1,\r\n    // REQUEST_TO_RETURN,\r\n    MARK_COMPLETED,\r\n    REQUEST_CONFIRM_P_2,\r\n    CONFIRM_PAYMENT_TWO,\r\n    REQUEST_RESERVE_RESULT,\r\n    CANCEL_RESERVE_RESULT,\r\n    CONFIRM_RESERVE_RESULT,\r\n    REQUEST_RETURN_RESULT,\r\n    CONFIRM_WD_GD,\r\n    REJECT_WD_GD,\r\n    MARK_GRAD,\r\n    MARK_FAIL,\r\n    MARK_FOR_RETEST,\r\n    MOVE_TO_R2,\r\n    RESERVE_RESULT,\r\n    ADMIN_CONFIRM_RETURN,\r\n    ADMIN_MARK_FINISH,\r\n    ADMIN_MARK_REMOVE,\r\n    ADMIN_MARK_FINAL_FAIL,\r\n    TEACHER_REQUEST_CONFIRM_RETEST_FEE,\r\n    ADM_CONFIRM_RETEST_FEE,\r\n    ADM_CONFIRM_SWAP,\r\n    FORCE_STATUS,\r\n    // T_REQUEST_CHANGE_GRADE,\r\n    ADMIN_ACCEPT_CHANGE_GRADE,\r\n    ADMIN_REJECT_CHANGE_GRADE,\r\n    FN_ACCEPT_CHANGE_GRADE,\r\n    FN_REJECT_CHANGE_GRADE,\r\n    T_REQUEST_RETURN_FINAL_TEST,\r\n    ADMIN_ACCEPT_RETURN_FINAL_TEST,\r\n} from '../../common/ClientQueries'\r\nimport StudentTimeline from './StudentInfo/Timeline'\r\n\r\n\r\ntype RouteParams = {\r\n    id: string\r\n}\r\n\r\nconst SingleStudent = () => {\r\n    const { id } = useParams<RouteParams>()\r\n    const history = useHistory()\r\n    const { getUser } = useAuth()\r\n    const user = getUser()\r\n    const [confirmModal, toggleConfirmModal] = React.useState(false)\r\n    const [loadStd, { loading, data, error}] = useLazyQuery(LOAD_SINGLE_STD)\r\n    const [requestConfirmPayment] = useMutation(REQUEST_CONFIRM_PAYMENT, { refetchQueries: [LOAD_SINGLE_STD]})\r\n    const [loadAReports, { data: reports = { loadAReport:[]}, loading: loadingReports }] = useLazyQuery(LOAD_A_REPORT)\r\n    // const [prioJoin] = useMutation(PRIORITY_JOIN)\r\n    // const [loadAroom, { data: availableRooms }] = useLazyQuery(LOAD_AVAILABLE_ROOM)\r\n    const [confirmP] = useMutation(CONFIRM_PAYMENT, { refetchQueries: [LOAD_SINGLE_STD] })\r\n    const [requestWD] = useMutation(REQUEST_WITHDRAW, { refetchQueries: [LOAD_SINGLE_STD] })\r\n    const [confirmReserv] = useMutation(APPROVE_RESERV, { refetchQueries: [LOAD_SINGLE_STD] }) // finance action - do not remove\r\n    const [cancelWithdraw] = useMutation(CANCEL_WITHDRAW_REQUEST, { refetchQueries: [LOAD_SINGLE_STD] })\r\n    const [delStudent] = useMutation(DELETE_STUDENT, { refetchQueries: [LOAD_SINGLE_STD] })\r\n    const [mover1] = useMutation(MOVE_TO_R1, { refetchQueries: [LOAD_SINGLE_STD] })\r\n    // const [requestResrv] = useMutation(REQUEST_RESERVE, { refetchQueries: [LOAD_SINGLE_STD] })\r\n    const [cancelRequestResrv] = useMutation(CANCEL_REQUEST_RESERV, { refetchQueries: [LOAD_SINGLE_STD] })\r\n    const [confirmRequestResrv] = useMutation(CONFIRM_RESERVE_BC1, { refetchQueries: [LOAD_SINGLE_STD] })\r\n    // const [reqReturn] = useMutation(REQUEST_TO_RETURN, { refetchQueries: [LOAD_SINGLE_STD] })\r\n    const [markComplete] = useMutation(MARK_COMPLETED, { refetchQueries: [LOAD_SINGLE_STD] })\r\n    const [requestConfirmP2] = useMutation(REQUEST_CONFIRM_P_2, { refetchQueries: [LOAD_SINGLE_STD] })\r\n    const [confirmPaymentTwo] = useMutation(CONFIRM_PAYMENT_TWO, { refetchQueries: [LOAD_SINGLE_STD] })\r\n    const [requestReserveResult] = useMutation(REQUEST_RESERVE_RESULT, { refetchQueries: [LOAD_SINGLE_STD] })\r\n    const [cancelReserveResult] = useMutation(CANCEL_RESERVE_RESULT, { refetchQueries: [LOAD_SINGLE_STD] })\r\n    const [confirmReserveResult] = useMutation(CONFIRM_RESERVE_RESULT, { refetchQueries: [LOAD_SINGLE_STD] })\r\n    const [requestReturnResult] = useMutation(REQUEST_RETURN_RESULT, { refetchQueries: [LOAD_SINGLE_STD] })\r\n    const [rejectWDFN] = useMutation(REJECT_WD_FN, { refetchQueries: [LOAD_SINGLE_STD] })\r\n    const [confirmWDGD] = useMutation(CONFIRM_WD_GD, { refetchQueries: [LOAD_SINGLE_STD] })\r\n    const [rejectWDGD] = useMutation(REJECT_WD_GD, { refetchQueries: [LOAD_SINGLE_STD] })\r\n    const [markGrad] = useMutation(MARK_GRAD, { refetchQueries: [LOAD_SINGLE_STD] })\r\n    const [markFail] = useMutation(MARK_FAIL, { refetchQueries: [LOAD_SINGLE_STD] })\r\n    const [markForRetest] = useMutation(MARK_FOR_RETEST, { refetchQueries: [LOAD_SINGLE_STD] })\r\n    const [movetoR2] = useMutation(MOVE_TO_R2, { refetchQueries: [LOAD_SINGLE_STD] })\r\n    const [reservResult] = useMutation(RESERVE_RESULT, { refetchQueries: [LOAD_SINGLE_STD] })\r\n    const [confirmReturn] = useMutation(ADMIN_CONFIRM_RETURN, { refetchQueries: [LOAD_SINGLE_STD] })\r\n    const [markFinish] = useMutation(ADMIN_MARK_FINISH, { refetchQueries: [LOAD_SINGLE_STD] })\r\n    const [markRemove] = useMutation(ADMIN_MARK_REMOVE, { refetchQueries: [LOAD_SINGLE_STD] })\r\n    const [admMarkFFail] = useMutation(ADMIN_MARK_FINAL_FAIL, { refetchQueries: [LOAD_SINGLE_STD] })\r\n    const [tRequestCRF] = useMutation(TEACHER_REQUEST_CONFIRM_RETEST_FEE, { refetchQueries: [LOAD_SINGLE_STD] })\r\n    const [fnConfirmRF] = useMutation(ADM_CONFIRM_RETEST_FEE, { refetchQueries: [LOAD_SINGLE_STD] })\r\n    const [admConfirmSwp] = useMutation(ADM_CONFIRM_SWAP, { refetchQueries: [LOAD_SINGLE_STD] })\r\n    const [forceStatus] = useMutation(FORCE_STATUS, { refetchQueries: [LOAD_SINGLE_STD] })\r\n    // const [tYCDH] = useMutation(T_REQUEST_CHANGE_GRADE, { refetchQueries: [LOAD_SINGLE_STD] })\r\n    const [admAcceptChgGrd] = useMutation(ADMIN_ACCEPT_CHANGE_GRADE, { refetchQueries: [LOAD_SINGLE_STD] })\r\n    const [admRejectChgGrd] = useMutation(ADMIN_REJECT_CHANGE_GRADE, { refetchQueries: [LOAD_SINGLE_STD] })\r\n    const [fnAcceptChgGrd] = useMutation(FN_ACCEPT_CHANGE_GRADE, { refetchQueries: [LOAD_SINGLE_STD] })\r\n    const [fnRejectChgGrd] = useMutation(FN_REJECT_CHANGE_GRADE, { refetchQueries: [LOAD_SINGLE_STD] })\r\n    const [tRequestRFinalTest] = useMutation(T_REQUEST_RETURN_FINAL_TEST, { refetchQueries: [LOAD_SINGLE_STD] })\r\n    const [aAcceptRFinalTest] = useMutation(ADMIN_ACCEPT_RETURN_FINAL_TEST, { refetchQueries: [LOAD_SINGLE_STD] })\r\n    \r\n    const commands:Record<string,any> = {\r\n        'requestConfirmPayment': requestConfirmPayment,\r\n        'confirmPayment': confirmP,\r\n        'requestWithdraw': requestWD,\r\n        'cancelWithdraw': cancelWithdraw,\r\n        'confirmWithdraw': confirmReserv,\r\n        // 'requestReserve': requestResrv,\r\n        'cancelReserve': cancelRequestResrv,\r\n        'confirmReserve': confirmRequestResrv,\r\n        // 'requestReturn': reqReturn,\r\n        'markCompleted': markComplete,\r\n        'requestConfirmP2': requestConfirmP2,\r\n        'confirmPaymentTwo': confirmPaymentTwo,\r\n        'requestReserveResult': requestReserveResult,\r\n        'cancelReserveResult': cancelReserveResult,\r\n        'confirmReserveResult': confirmReserveResult,\r\n        'requestReturnResult': requestReturnResult,\r\n        'rejectWDFN': rejectWDFN,\r\n        'confirmWDGD':confirmWDGD,\r\n        'rejectWDGD':rejectWDGD,\r\n        'markGrad':markGrad,\r\n        'markFail':markFail,\r\n        'markForRetest':markForRetest,\r\n        'movetoR2': movetoR2,\r\n        'reservResult': reservResult,\r\n        'confirmReturn': confirmReturn,\r\n        'markFinish': markFinish,\r\n        'markRemove': markRemove,\r\n        'admMarkFFail': admMarkFFail,\r\n        'tRequestCRF': tRequestCRF,\r\n        'fnConfirmRF': fnConfirmRF,\r\n        'admConfirmSwp': admConfirmSwp,\r\n        'admAcceptChgGrd': admAcceptChgGrd,\r\n        'admRejectChgGrd': admRejectChgGrd,\r\n        'fnAcceptChgGrd': fnAcceptChgGrd,\r\n        'fnRejectChgGrd': fnRejectChgGrd,\r\n        'tRequestRFinalTest': tRequestRFinalTest,\r\n        'aAcceptRFinalTest': aAcceptRFinalTest,\r\n        // 'forceStatus': forceStatus\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        const load = async () => {\r\n            await loadStd({\r\n                variables: {\r\n                    id\r\n                }\r\n            })\r\n            if (user.role === 'ADMIN' || user.role === 'MANAGER') {\r\n                await loadAReports({\r\n                    variables: {\r\n                        filter: {\r\n                            status: 'PENDING',\r\n                        },\r\n                        page: 1,\r\n                        limit: 10\r\n                    }\r\n                })\r\n            }\r\n        }\r\n        load()\r\n    }, [id, loadStd, loadAReports, user])\r\n\r\n\r\n    const deleteStudent = async (student: string) => {\r\n        await delStudent({\r\n            variables: {\r\n                student\r\n            }\r\n        })\r\n        history.goBack()\r\n    }\r\n\r\n    const moveToR1 = async (students: string[], report: string) => {\r\n        try {\r\n            await mover1({\r\n                variables: {\r\n                    students,\r\n                    report\r\n                }\r\n            })\r\n            message.success('Chuyển vào BC 1 thành công')\r\n        } catch (e) {\r\n            message.error('Đã có lỗi xẩy ra trong quá trình chuyển BC1')\r\n        }\r\n    }\r\n\r\n    const changeStatus = async (students: string[], trangthai: string) => {\r\n        try {\r\n            await forceStatus({\r\n                variables: {\r\n                    students,\r\n                    trangthai\r\n                }\r\n            })\r\n            message.success('Thay đổi trạng thái thành công')\r\n        } catch (error) {\r\n            message.error('Đã có lỗi xẩy ra - không thể thay đổi trạng thái hồ sơ')\r\n        }\r\n    }\r\n\r\n    if (loading) {\r\n        return <span>....loading</span>\r\n    }\r\n\r\n    const doAction = async (action: string, students: string[]) => {\r\n        if (!students || students.length === 0) {\r\n            message.error('Không thể thực hiện thao tác - thiếu thông tin hồ sơ')\r\n        }\r\n        try {\r\n            commands[action as keyof Object]({\r\n                variables: {\r\n                    students\r\n                }\r\n            })\r\n            // await action({\r\n                // })\r\n            message.success('Thành công')\r\n        } catch (e) {\r\n            message.error('Thao tác không thành công - vui lòng kiểm tra lại thông tin')\r\n        }\r\n\r\n    }\r\n\r\n    const confirmAction = async(action: string, students: string[], modalTitle: string, modalContent: string) => {\r\n        if (!students || students.length === 0) {\r\n            message.error('Không thể thực hiện thao tác - thiếu thông tin hồ sơ')\r\n        }\r\n        try {\r\n            Modal.confirm({\r\n                title: modalTitle,\r\n                content: modalContent,\r\n                onCancel: () => toggleConfirmModal(false),\r\n                visible: confirmModal,\r\n                onOk: async () => {\r\n                    commands[action as keyof Object]({\r\n                        variables: {\r\n                            students\r\n                        }\r\n                    })\r\n                }\r\n            })\r\n            // await action({\r\n            // })\r\n        } catch (e) {\r\n            message.error('Thao tác không thành công - vui lòng kiểm tra lại thông tin')\r\n        }\r\n\r\n    }\r\n\r\n    const markFailed = async (students: string[], reason: string) => {\r\n        try {\r\n            await admMarkFFail({\r\n                variables: {\r\n                    students,\r\n                    reason\r\n                }\r\n            })\r\n            message.success('Đánh dấu thi trượt thành công')\r\n        } catch (error) {\r\n            message.error('Đã có lỗi xẩy ra, vui lòng kiểm tra lại thông tin')\r\n        }\r\n    }\r\n\r\n    if (!loading && !error && data) {\r\n        if (!data.loadSingleStd) {\r\n            return (\r\n                <Alert message=\"Không tìm thấy người dùng\" type=\"error\" />\r\n            )\r\n        }\r\n        return (\r\n            <div>\r\n                <Header\r\n                    markFailed={markFailed}\r\n                    confirmAction={confirmAction}\r\n                    role={user.role}\r\n                    student={data.loadSingleStd}\r\n                    deleteStudent={deleteStudent}\r\n                    moveToR1={moveToR1}\r\n                    reports={reports.loadAReport.reports}\r\n                    loadingReport={loadingReports}\r\n                    doAction={doAction}\r\n                    movetoR2={async (students: string[], report: string) => {\r\n                        await movetoR2({\r\n                            variables: {\r\n                                students,\r\n                                report\r\n                            }\r\n                        })\r\n                    }}\r\n                    changeStatus={changeStatus}\r\n                />\r\n                <Row>\r\n                    <Col sm={24} md={12}>\r\n                        <BasicInfo\r\n                            student={data.loadSingleStd}\r\n                            role={user.role}\r\n                        />\r\n                    </Col>\r\n                    <Col sm={24} md={12}>\r\n                        <StudentTimeline history={data.loadSingleStd.history} />\r\n                    </Col>\r\n                    \r\n                </Row>\r\n            </div>\r\n        )\r\n    }\r\n    return null\r\n}\r\nexport default SingleStudent","import React from 'react'\r\nimport {\r\n    Modal,\r\n    Form,\r\n    Input,\r\n    Select,\r\n    message\r\n} from 'antd'\r\nimport grades from '../../common/HangBang'\r\n\r\nconst { Option } = Select\r\n\r\ntype CType = {\r\n    visible: boolean\r\n    onCancel: () => void\r\n    onOk: (r: Record<string,any>) => void\r\n    type: string\r\n}\r\n\r\nconst CreateReportModal:React.FC<CType> = ({\r\n    visible,\r\n    onCancel,\r\n    onOk,\r\n    type\r\n}) => {\r\n    const [form] = Form.useForm()\r\n    const [creating, toggleCreating] = React.useState(false)\r\n\r\n    const onCreate = async () => {\r\n        toggleCreating(true)\r\n        const report = form.getFieldsValue()\r\n        console.log(report)\r\n        if (!report.name || !report.hangbang) {\r\n            message.error('Không thể tạo báo cáo do thiếu thông tin')\r\n            onCancel()\r\n        }\r\n        toggleCreating(false)\r\n        onOk(report)\r\n    }\r\n    return (\r\n        <Modal\r\n            visible={visible}\r\n            onCancel={onCancel}\r\n            onOk={onCreate}\r\n            title={`Tạo mới báo cáo mới - ${type === 'BC1' ? 'Báo cáo 1' : 'Báo cáo 2'}`}\r\n            okButtonProps={{\r\n                loading: creating\r\n            }}\r\n        >\r\n            <Form form={form} labelCol={{ span: 6 }} wrapperCol={{ span: 18 }}>\r\n                <Form.Item label=\"Tên báo cáo\" name=\"name\" rules={[{ required: true, message: 'Bắt buộc phải có tên'}]}>\r\n                    <Input placeholder=\"báo cáo một - ngày/tháng/năm\" />\r\n                </Form.Item>\r\n                <Form.Item label=\"Hạng bằng\" name=\"hangbang\" rules={[{ required: true, message: 'Bắt buộc phải có hạng bằng lái'}]}>\r\n                    <Select>\r\n                        {Object.keys(grades).map(g => (\r\n                            <Option key={g} value={g}>{`${g} -  ${grades[g as keyof Object]}`}</Option>\r\n                        ))}\r\n                    </Select>\r\n                </Form.Item>\r\n                <Form.Item label=\"Ghi chú\" name=\"desc\">\r\n                    <Input placeholder=\"Ghi chú & diễn giải\" />\r\n                </Form.Item>\r\n            </Form>\r\n        </Modal>\r\n    )\r\n}\r\nexport default CreateReportModal","export const trangthaibaocao = {\r\n    'PENDING': 'Đang chờ phê duyệt',\r\n    'APPROVED': 'Đã phê duyệt'\r\n}","import React from 'react'\r\nimport {\r\n    Table\r\n} from 'antd'\r\nimport moment from 'moment'\r\nimport {\r\n    Link\r\n} from 'react-router-dom'\r\nimport { trangthaibaocao } from '../../../common/trangthai'\r\n\r\ntype CType = {\r\n    reports: Record<string,any>[]\r\n    type: string\r\n}\r\n\r\nconst ReportList:React.FC<CType> = ({\r\n    reports,\r\n    type\r\n}) => {\r\n    const columns = [\r\n        {\r\n            title: 'Ngày tạo',\r\n            dataIndex: 'created',\r\n            render: (text: string) => <span>{moment(parseFloat(text)).format('DD/MM/YYYY')}</span>\r\n        },\r\n        {\r\n            title: 'Hạng bằng',\r\n            dataIndex: 'hangbang'\r\n        },\r\n        {\r\n            title: 'Tên báo cáo',\r\n            dataIndex: 'name',\r\n            render: (text: string, record: any) => <Link to={`${ type==='BC1'? '/rp1/':'/rp2/'}${record._id}`}>{text}</Link>\r\n        },\r\n        {\r\n            title: 'Chú thích',\r\n            dataIndex: 'desc'\r\n        },\r\n        {\r\n            title: 'SL học viên',\r\n            dataIndex: 'stdCount',\r\n            render: (text: string) => <strong>{text? text : '0'}</strong>\r\n        },\r\n        {\r\n            title: 'Trạng thái',\r\n            dataIndex: 'status',\r\n            render: (text: string) => (\r\n                <span>\r\n                    {trangthaibaocao[text as keyof Object]}\r\n                </span>\r\n            )\r\n        }\r\n    ]\r\n    return (\r\n        <div>\r\n            <Table\r\n                dataSource={reports}\r\n                columns={columns}\r\n                pagination={false}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ReportList\r\n","import React from 'react'\r\nimport {\r\n    Modal,\r\n    Form,\r\n    Input,\r\n    Select\r\n} from 'antd'\r\nimport hangbang from '../../../common/HangBang'\r\n\r\nconst { Option } = Select\r\nconst trangthais = {\r\n    'PENDING': 'Đang chờ phê duyệt',\r\n    'APPROVED': 'Đã phê duyệt'\r\n}\r\n\r\ntype ReportFilterModalType = {\r\n    visible: boolean,\r\n    onCancel: () => void\r\n    onOk: (filter: Record<string,any>) => void\r\n    filter: Record<string, any>\r\n}\r\n\r\nconst ReportFileterModal:React.FC<ReportFilterModalType> = ({\r\n    visible,\r\n    onCancel,\r\n    onOk,\r\n    filter\r\n}) => {\r\n    const [form] = Form.useForm()\r\n    form.setFieldsValue(filter)\r\n    const onConfirm = () => {\r\n        onOk(form.getFieldsValue())\r\n        onCancel()\r\n    }\r\n    return (\r\n        <Modal\r\n            title=\"Lọc báo cáo\"\r\n            visible={visible}\r\n            onCancel={onCancel}\r\n            onOk={onConfirm}\r\n        >\r\n            <Form form={form} labelCol={{ span: 6}} wrapperCol={{ span: 18}}>\r\n                <Form.Item label=\"Tên báo cáo\" name=\"name\">\r\n                    <Input />\r\n                </Form.Item>\r\n                <Form.Item label=\"Chú thích\" name=\"desc\">\r\n                    <Input />\r\n                </Form.Item>\r\n                <Form.Item label=\"Hạng bằng\" name=\"hangbang\">\r\n                    <Select>\r\n                        {Object.keys(hangbang).map(hb => (\r\n                            <Option value={hb} key={hb}>{`${hb} - ${hangbang[hb as keyof Object]}`}</Option>\r\n                        ))}\r\n                    </Select>\r\n                </Form.Item>\r\n                <Form.Item label=\"Trạng thái\" name=\"status\">\r\n                    <Select>\r\n                        {Object.keys(trangthais).map(hb => (\r\n                            <Option value={hb} key={hb}>{trangthais[hb as keyof Object]}</Option>\r\n                        ))}\r\n                    </Select>\r\n                </Form.Item>\r\n            </Form>\r\n        </Modal>\r\n    )\r\n}\r\n\r\nexport default ReportFileterModal","export const notFilterEmpty = (filter: any) => {\r\n    const matchingKey = Object.keys(filter).find(k => filter[k] !== null)\r\n    return Boolean(matchingKey)\r\n}\r\n","import React from 'react';\r\nimport {\r\n    PageHeader,\r\n    Button,\r\n    Space,\r\n    Pagination\r\n} from 'antd'\r\nimport {\r\n    FilterOutlined,\r\n    PlusOutlined\r\n} from '@ant-design/icons'\r\nimport {\r\n    // gql,\r\n    useMutation,\r\n    useLazyQuery\r\n} from '@apollo/client'\r\nimport CreateReportModal from'./CreateReportModal'\r\nimport ReportList from './ReportList/ReportList'\r\nimport ReportFileterModal from './Modals/FilterReportModal'\r\nimport {\r\n    notFilterEmpty\r\n} from '../../common/utils'\r\n\r\n\r\n// const CREATE_A_REPORT = gql `\r\n//     mutation createAReport($report: ReportOneInput) {\r\n//         createAReport(report: $report) {\r\n//             _id\r\n//             hangbang\r\n//             name\r\n//             desc\r\n//             status\r\n//             created\r\n//             createdBy {\r\n//                 name\r\n//             },\r\n//             stdCount\r\n//         }\r\n//     }\r\n// `\r\n// const LOAD_A_REPORT = gql `\r\n//     query loadAReport($filter: ReportFilter, $page: Int, $limit: Int) {\r\n//         loadAReport(filter: $filter, page: $page, limit: $limit) {\r\n//             reports {\r\n//                 _id\r\n//                 hangbang\r\n//                 name\r\n//                 desc\r\n//                 status\r\n//                 createdBy {\r\n//                     name\r\n//                 },\r\n//                 stdCount\r\n//                 created\r\n//             }\r\n//             total\r\n//         }\r\n//     }\r\n// `\r\ntype ReportType = {\r\n    createQuery: {\r\n        reportKey: string,\r\n        query: any\r\n    }\r\n    loadQuery: {\r\n        reportKey: string,\r\n        query: any\r\n    }\r\n    title: string,\r\n    type: string\r\n}\r\nconst ReportOnes:React.FC<ReportType> = ({\r\n    createQuery,\r\n    loadQuery,\r\n    title,\r\n    type\r\n}) => {\r\n    const limit = 50\r\n    // const [createReportOne] = useMutation(CREATE_A_REPORT)\r\n    const [createReportOne] = useMutation(createQuery.query, {refetchQueries: [loadQuery.query]})\r\n    const [createMdl, toggleCreateMdl] = React.useState(false)\r\n    // const [loadAReports, {data: reportData}] = useLazyQuery(LOAD_A_REPORT)\r\n    const [loadAReports, { data: reportData }] = useLazyQuery(loadQuery.query)\r\n    const [filterModal, toggleFilterModal] = React.useState(false)\r\n    const [filter, setFilter] = React.useState<Record<string,any>>({\r\n        name: null,\r\n        desc: null,\r\n        hangbang: null,\r\n        status: null\r\n    })\r\n    const [page, setPage] = React.useState(1)\r\n    React.useEffect(() => {\r\n        const loadReports = async () => {\r\n            await loadAReports({\r\n                variables: {\r\n                    filter,\r\n                    page,\r\n                    limit\r\n                }\r\n            })\r\n        }\r\n        loadReports()\r\n    }, [ loadAReports, filter, page, limit ])\r\n\r\n    const createReport = async (report: Record<string,any>) => {\r\n        await createReportOne({\r\n            variables: {\r\n                report\r\n            }\r\n        })\r\n        toggleCreateMdl(false)\r\n    } \r\n\r\n    const onToggleFilter = () => {\r\n        if (notFilterEmpty(filter)) {\r\n            setFilter({\r\n                name: null,\r\n                desc: null,\r\n                hangbang: null,\r\n                status: null\r\n            })\r\n        } else {\r\n            toggleFilterModal(true)\r\n        }\r\n    }\r\n    return (\r\n        <div>\r\n            <PageHeader\r\n                title={title}\r\n                extra={[\r\n                    <Button shape=\"round\" key=\"_add\" type=\"primary\" onClick={() => toggleCreateMdl(true)}>\r\n                        <PlusOutlined />\r\n                    </Button>,\r\n                    <Button danger={notFilterEmpty(filter)} key=\"_filter\" shape=\"round\" onClick={() => onToggleFilter()}>\r\n                        <FilterOutlined />\r\n                        {/* {notFilterEmpty(filter) ? 'Xóa bộ lọc' : 'Lọc báo cáo'} */}\r\n                    </Button>\r\n                ]}\r\n            />\r\n            {reportData && reportData[loadQuery.reportKey] && (\r\n                <Space direction=\"vertical\" style={{width: '100%'}}>\r\n                    <ReportList\r\n                        type={type}\r\n                        reports={reportData[loadQuery.reportKey as keyof Object].reports}\r\n                    />\r\n                    <Pagination\r\n                        current={page}\r\n                        onChange={(page: number) => setPage(page)}\r\n                        total={reportData[loadQuery.reportKey as keyof Object].total}\r\n                        pageSize={limit}\r\n                    />\r\n                </Space>\r\n            )}\r\n            <CreateReportModal\r\n                type={type}\r\n                visible={createMdl}\r\n                onCancel={() => toggleCreateMdl(false)}\r\n                onOk={(report) => createReport(report)}\r\n            />\r\n            <ReportFileterModal\r\n                filter={filter}\r\n                visible={filterModal}\r\n                onCancel={() => toggleFilterModal(false)}\r\n                onOk={(filter: Record<string,any>) => setFilter(filter)}\r\n            />\r\n        </div>\r\n    )\r\n}\r\nexport default ReportOnes","import React from 'react'\r\nimport {\r\n    List,\r\n    Modal,\r\n    Input,\r\n    Form,\r\n    Divider,\r\n    // message\r\n} from 'antd'\r\nimport {\r\n    gql,\r\n    // useMutation,\r\n    useLazyQuery\r\n} from '@apollo/client'\r\nimport { CheckOutlined, IdcardOutlined, MobileOutlined } from '@ant-design/icons'\r\nimport moment from 'moment'\r\n\r\ntype ModalType = {\r\n    visible: boolean\r\n    onCancel: () => void\r\n    onOk: (stds: string[]) => void\r\n    hangbang: string\r\n    type: string\r\n}\r\n\r\nconst SEARCH_STUDENTS_4_BC1 = gql`\r\n    query searchStd4bc1($filter: FilterInput, $hangbang: String!) {\r\n        searchStd4bc1(filter: $filter, hangbang: $hangbang) {\r\n            _id\r\n            randomId\r\n            ten\r\n            ngaysinh\r\n            # anh34\r\n            quequan\r\n            # cmt1\r\n            # cmt2\r\n            # bangcap\r\n            hangbang\r\n            mobile\r\n            # dondk\r\n            # giaykhamSK\r\n            # hopdongdaotao\r\n            trangthai\r\n            # baoluu\r\n            # baocao1\r\n            # kq1\r\n            # kq2\r\n            # createdBy\r\n            # created\r\n        }\r\n    }\r\n`\r\n\r\n\r\nconst AddStdModal:React.FC<ModalType> = ({\r\n    visible,\r\n    onCancel,\r\n    onOk,\r\n    type,\r\n    hangbang\r\n}) => {\r\n    let searchTimeout:any = null\r\n    const [searchStds, { data = { searchStd4bc1:[]}}] = useLazyQuery(SEARCH_STUDENTS_4_BC1, { fetchPolicy: 'network-only'})\r\n    const [selected, setSelected] = React.useState<string[]>([])\r\n    const [adding, toggleAdding] = React.useState(false)\r\n\r\n    const onStudentClick = (student: string) => {\r\n        const idx = selected.indexOf(student)\r\n        if (idx >= 0) {\r\n            setSelected(selected.filter(s => s!== student))\r\n        } else {\r\n            setSelected([student].concat(selected))\r\n        }\r\n    }\r\n\r\n    const onKeywordChange:React.ChangeEventHandler<HTMLInputElement> = async (e) => {\r\n        if (searchTimeout) {\r\n            clearTimeout(searchTimeout)\r\n        }\r\n        searchTimeout = setTimeout(() => {\r\n            const { value } = e.target\r\n            const filter = {\r\n                ten: value,\r\n                mobile: value,\r\n                randomId: value,\r\n                trangthai: type === 'BC1' ? 'CHO_VAO_BC_1' : 'CHO_VAO_BC_2'\r\n            }\r\n            // if (value.length >=3) {\r\n                searchStds({\r\n                    variables: {\r\n                        filter,\r\n                        hangbang\r\n                    }\r\n                })\r\n            // }\r\n            // const page = 1\r\n            // const limit = 20\r\n        }, 700)\r\n    }\r\n\r\n    const add = async () => {\r\n        toggleAdding(true)\r\n        await onOk(selected)\r\n        toggleAdding(false)\r\n        onCancel()    \r\n    }\r\n\r\n    return (\r\n        <Modal\r\n            visible={visible}\r\n            onCancel={onCancel}\r\n            onOk={() => add()}\r\n            okButtonProps={{\r\n                loading: adding\r\n            }}\r\n            title=\"Thêm hồ sơ vào BC 1\"\r\n        >\r\n            <Form layout=\"vertical\">\r\n                <Form.Item label=\"Tìm kiếm hồ sơ\">\r\n                    <Input onChange={onKeywordChange} placeholder=\"Tìm theo tên/sdt/ mã HS\" />\r\n                </Form.Item>\r\n            </Form>\r\n            <Divider />\r\n            {data.searchStd4bc1.length > 0 && <p>Chọn trong danh sách({selected.length})</p>}\r\n            <List\r\n                dataSource={data.searchStd4bc1}\r\n                renderItem={(item:any) => (\r\n                    <List.Item\r\n                        style={{ cursor: 'pointer'}}\r\n                        key={item._id}\r\n                        onClick={() => onStudentClick(item._id)}\r\n                        actions={selected.indexOf(item._id) >=0 ? [<CheckOutlined style={{ color: 'blue'}} />]: ['']}\r\n                    >\r\n                        <List.Item.Meta\r\n                            title={`${item.ten} - ${item.randomId}`}\r\n                            description={<p><MobileOutlined />{item.mobile}{` - `}<IdcardOutlined />{moment(parseFloat(item.ngaysinh)).format('DD/MM/YYYY')}</p>}\r\n                        />\r\n                    </List.Item>\r\n                )}\r\n            />\r\n        </Modal>\r\n    )\r\n}\r\nexport default AddStdModal","import React from 'react'\r\nimport {\r\n    Modal,\r\n    Form,\r\n    Input\r\n} from 'antd'\r\n\r\ntype ModalType = {\r\n    visible: boolean\r\n    onCancel: () => void\r\n    onOk: (filter: Record<string,any>) => void\r\n}\r\n\r\nconst FilterModal: React.FC<ModalType> = ({\r\n    visible,\r\n    onCancel,\r\n    onOk,\r\n}) => {\r\n    const [form] = Form.useForm()\r\n    const [loading, toggleLoading] = React.useState(false)\r\n    \r\n    const changeFilter = async () => {\r\n        toggleLoading(true)\r\n        await onOk(form.getFieldsValue())\r\n        toggleLoading(false)\r\n        onCancel()\r\n    }\r\n    return (\r\n        <Modal\r\n            visible={visible}\r\n            onCancel={onCancel}\r\n            onOk={changeFilter}\r\n            title=\"Lọc hồ sơ\"\r\n            okButtonProps={{\r\n                loading\r\n            }}\r\n        >\r\n            <Form form={form} labelCol={{span: 6}} wrapperCol={{span:18}}>\r\n                <Form.Item label=\"Mã hồ sơ\" name=\"randomId\">\r\n                    <Input />\r\n                </Form.Item>\r\n                <Form.Item label=\"Tên học viên\" name=\"ten\">\r\n                    <Input />\r\n                </Form.Item>\r\n                <Form.Item label=\"Số điện thoại\" name=\"mobile\">\r\n                    <Input />\r\n                </Form.Item>\r\n            </Form>\r\n        </Modal>\r\n    )\r\n}\r\nexport default FilterModal","import React from 'react'\r\nimport {\r\n    Menu,\r\n    Button,\r\n    Dropdown,\r\n    Modal,\r\n    PageHeader,\r\n    Table,\r\n    message\r\n} from 'antd'\r\nimport moment from 'moment'\r\nimport { CheckOutlined, EllipsisOutlined, FilterOutlined, MinusOutlined, PlusOutlined } from '@ant-design/icons'\r\nimport {\r\n    useAuth\r\n} from '../../../context/AuthenticationContext'\r\n\r\nimport AddStdModal from './AddStdModal'\r\nimport FilterModal from './FilterModal'\r\n// import { MARK_COMPLETED } from '../../common/ClientQueries'\r\n\r\ntype CType = {\r\n    students: Record<string,any>[]\r\n    removeStudents: (students: string[]) => void\r\n    setFilter: (filter: Record<string,any>) => void\r\n    filter: Record<string, any>\r\n    report: Record<string,any>\r\n    addStudents: (students: string[]) => void\r\n    markComp: (students: string[]) => void\r\n    type: string\r\n}\r\n\r\nconst StudentsList:React.FC<CType> = ({\r\n    students,\r\n    removeStudents,\r\n    setFilter,\r\n    filter,\r\n    report,\r\n    addStudents,\r\n    markComp,\r\n    type\r\n}) => {\r\n    const [selected, setSelected] = React.useState<string[]>([])\r\n    // const [working, setWorking] = React.useState<string>('')\r\n    const [filterModal, toggleFilterModal] = React.useState(false)\r\n    const [removeModal, toggleRemoveModal] = React.useState(false)\r\n    const [addModal, toggleAddModal] = React.useState(false)\r\n    const { getUser } = useAuth()\r\n    const user = getUser()\r\n    const columns = [\r\n        {\r\n            title: 'STT',\r\n            render: (_: any, __: any, index: number) => <span>{index + 1}</span>\r\n        },\r\n        {\r\n            title: 'Mã hồ sơ',\r\n            dataIndex: 'randomId'\r\n        },\r\n        {\r\n            title: 'Tên',\r\n            dataIndex: 'ten'\r\n        },\r\n        {\r\n            title: 'Ngày sinh',\r\n            dataIndex: 'ngaysinh',\r\n            render: (t: string) => <span>{moment(parseFloat(t)).format('DD/MM/YYYY')}</span>\r\n        },\r\n        {\r\n            title: 'Số điện thoại',\r\n            dataIndex: 'mobile'\r\n        }\r\n    ]\r\n    const rowSelection = {\r\n        onChange: (keys: any) => {\r\n            setSelected(keys)\r\n            console.log(`the keys of the row is ${keys}`)\r\n        },\r\n        selectedRowKeys: selected\r\n        \r\n    }\r\n\r\n    const notFilterEmpty = () => {\r\n        const matchingKey = Object.keys(filter).find(k => filter[k] !== null)\r\n        return Boolean(matchingKey)\r\n    }\r\n    const remove = async () => {\r\n        Modal.confirm({\r\n            title: 'Loại hồ sơ khỏi báo cáo?',\r\n            content: 'Bạn sẽ không phải thêm lại thông tin cho những hồ sơ này',\r\n            onCancel: () => toggleRemoveModal(false),\r\n            visible: removeModal,\r\n            onOk: async () => {\r\n                // setWorking('removing')\r\n                await removeStudents(selected)\r\n                setSelected([])\r\n                // setWorking('')\r\n                toggleRemoveModal(false)\r\n            }\r\n        })\r\n    }\r\n\r\n    const onFilterClick = () => {\r\n        if (notFilterEmpty()) {\r\n            setFilter({\r\n                ten: null,\r\n                mobile: null,\r\n                hangbang: null,\r\n                randomId: null,\r\n                trangthai: null\r\n            })\r\n        } else {\r\n            toggleFilterModal(true)\r\n        }\r\n    }\r\n    const onCompleted = async() => {\r\n        if (!selected || selected.length === 0) {\r\n            message.error('Chọn hồ sơ trước khi thực hiện thao tác')\r\n            return\r\n        }\r\n        await markComp(selected)\r\n    }\r\n\r\n    const FunctionsDrop = () => {\r\n        if (type !==\"BC2\") {\r\n            return (\r\n                <Dropdown key=\"_men\" trigger={['click']} overlay={(\r\n                    <Menu theme=\"dark\">\r\n                    {report.status === 'PENDING' && <Menu.Item onClick={() => toggleAddModal(true)} key=\"_ađd\" icon={<PlusOutlined />}>Thêm hồ sơ</Menu.Item>}\r\n                    {report.status === 'PENDING' && <Menu.Item disabled={selected.length === 0} onClick={() => remove()} key=\"_rm\" icon={<MinusOutlined />}>Loại hồ sơ</Menu.Item>}\r\n                    <Menu.Item icon={<CheckOutlined />} onClick={() => onCompleted()}>Đánh dấu hoàn thành học</Menu.Item>\r\n                </Menu>\r\n            )}>\r\n                <Button shape=\"round\" type=\"primary\" icon={<EllipsisOutlined />} />\r\n            </Dropdown>\r\n        )\r\n        }\r\n        return null\r\n    }\r\n    return (\r\n        <div>\r\n            {(user.role === 'MANAGER' || user.role === 'ADMIN') && (\r\n                <PageHeader\r\n                    title=\"Danh sách hồ sơ\"\r\n                    extra={[\r\n                        <Button danger={notFilterEmpty()} shape=\"round\" key=\"_filter\" icon={<FilterOutlined />} onClick={() => onFilterClick()}>\r\n                            {notFilterEmpty() ? 'Bỏ lọc' : 'Lọc'}\r\n                        </Button>,\r\n                        FunctionsDrop(),\r\n                    ]}\r\n                />\r\n                )}\r\n            {(user.role === 'TEACHER' || user.role === 'FINANCE') && (\r\n                <PageHeader\r\n                    title=\"Danh sách hồ sơ\"\r\n                />\r\n            )}\r\n            <Table\r\n                rowKey=\"_id\"\r\n                rowSelection={rowSelection}\r\n                dataSource={students}\r\n                columns={columns}\r\n                pagination={false}\r\n            />\r\n            <FilterModal\r\n                // setFilter={setFilter}\r\n                visible={filterModal}\r\n                onCancel={() => toggleFilterModal(false)}\r\n                onOk={(filter: Record<string, any>) => setFilter(filter)}\r\n            />\r\n            <AddStdModal\r\n                type={type}\r\n                hangbang={report.hangbang}\r\n                visible={addModal}\r\n                onCancel={() => toggleAddModal(false)}\r\n                onOk={(stds: string[]) => addStudents(stds)}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default StudentsList","import React from 'react'\r\nimport {\r\n    Button,\r\n    Descriptions,\r\n    message,\r\n    PageHeader\r\n} from 'antd'\r\nimport {\r\n    useParams\r\n} from 'react-router-dom'\r\nimport {\r\n    // gql,\r\n    useLazyQuery,\r\n    useMutation\r\n} from '@apollo/client'\r\nimport LoadinCenter from '../../common/LoadingCenter'\r\nimport StudentsList from './StudentsList'\r\nimport {\r\n    useAuth\r\n} from '../../../context/AuthenticationContext'\r\nimport { CheckOutlined } from '@ant-design/icons'\r\nimport { trangthaibaocao } from '../../common/trangthai'\r\nimport moment from 'moment'\r\n\r\ntype ReportOneType = {\r\n    loadReport: any,\r\n    approveReport: any,\r\n    markComplete: any,\r\n    addStd: any,\r\n    removeStd: any\r\n    dataKey: string\r\n    type: string\r\n}\r\n\r\nconst SingleAttReport:React.FC<ReportOneType> = ({\r\n    loadReport,\r\n    approveReport,\r\n    markComplete,\r\n    addStd,\r\n    removeStd,\r\n    dataKey,\r\n    type\r\n}) => {\r\n    const { getUser } = useAuth()\r\n    const user = getUser()\r\n    const params:any = useParams()\r\n    const [loadR, { loading, data }] = useLazyQuery(loadReport)\r\n    const [approveR, { loading: approving }] = useMutation(approveReport, { refetchQueries: [loadReport]})\r\n    const [markCompleted] = useMutation(markComplete, { refetchQueries: [loadReport]})\r\n    const [addToR1] = useMutation(addStd, {\r\n        refetchQueries: [loadReport]\r\n    })\r\n    const [removeStds] = useMutation(removeStd, {\r\n        refetchQueries: [loadReport]\r\n    })\r\n    const [filter, setFilter] = React.useState<Record<string,any>>({\r\n        randomId: null,\r\n        ten: null,\r\n        mobile: null\r\n    })\r\n\r\n    React.useEffect(() => {\r\n        const load = async () => {\r\n            await loadR({\r\n                variables: {\r\n                    report: params.id,\r\n                    filter\r\n                }\r\n            })\r\n        }\r\n        load()\r\n    }, [loadR, params, filter])\r\n    // const { id } = params\r\n\r\n    const removeStudents = async (students: string[]) => {\r\n        try {\r\n            await removeStds({\r\n                variables: {\r\n                    students,\r\n                    report: data[dataKey as keyof Object].report._id\r\n                },\r\n                update: () => {}\r\n            })\r\n            message.success('Loại hồ sơ thành công')\r\n        } catch (e) {\r\n            message.error('Không thể loại hồ sơ khỏi báo cáo - vui lòng kiểm tra lại')\r\n        }\r\n    } \r\n\r\n    const addStudents = async (students: string[]) => {\r\n        try {\r\n            const { report } = data[dataKey as keyof Object]\r\n            if (!report || !report._id) {\r\n                throw new Error('Báo cáo không hợp lệ')\r\n            }\r\n            addToR1({\r\n                variables: {\r\n                    students,\r\n                    report: report._id\r\n                }\r\n            })\r\n            message.success('Thêm vào báo cáo thành công')\r\n        } catch (e) {\r\n            message.error('Không thể thêm vào báo cáo')\r\n        }\r\n    }\r\n\r\n    const markComp = async (students: string[]) => {\r\n        try {\r\n            await markCompleted({\r\n                variables: {\r\n                    students\r\n                }\r\n            })\r\n            message.success('Đã Đánh dấu hoàn thành')\r\n        } catch (e) {\r\n            message.error('không thể thực hiện được thao tác')\r\n        }\r\n    }\r\n\r\n    const approve = async () => {\r\n        if (!data || !data[dataKey as keyof Object]) {\r\n            message.error('Không thể duyệt được báo cáo')\r\n        } else {\r\n            try {\r\n                await approveR({\r\n                    variables: {\r\n                        report: data[dataKey as keyof Object].report._id\r\n                    }\r\n                })\r\n                message.success('Phê duyệt thành công')\r\n            } catch (e) {\r\n                message.error('Không thể duyệt được báo cáo')\r\n            }\r\n        }\r\n    }\r\n\r\n    if (loading) {\r\n        return <LoadinCenter />\r\n    }\r\n    const extra = []\r\n    if (user.role === 'MANAGER' && type !=='BC2') {\r\n        extra.push(\r\n            (\r\n                <Button disabled={!data || data[dataKey as keyof Object].report.status === 'APPROVED'} onClick={() => approve()} loading={approving} type=\"primary\" shape=\"round\">\r\n                    <CheckOutlined />\r\n                    Phê duyệt\r\n                </Button>\r\n            )\r\n        )\r\n    }\r\n    if (data && data[dataKey as keyof Object]) {\r\n        const { report } = data[dataKey as keyof Object]\r\n        return (\r\n            <div>\r\n                <PageHeader\r\n                    title={`Báo cáo: ${report.name}`}\r\n                    extra={extra}\r\n                    subTitle={`${report.desc}`}\r\n                >\r\n                    <Descriptions size=\"small\" column={3}>\r\n                        <Descriptions.Item label=\"Hạng Bằng\">{report.hangbang}</Descriptions.Item>\r\n                        <Descriptions.Item label=\"Ngày tạo\">{moment(parseFloat(report.created)).format('DD/MM/YYYY')}</Descriptions.Item>\r\n                        <Descriptions.Item label=\"Trạng thái\">{trangthaibaocao[report.status as keyof Object]}</Descriptions.Item>\r\n                        <Descriptions.Item label=\"Người tạo\">{report.createdBy.name}</Descriptions.Item>\r\n                    </Descriptions>\r\n                </PageHeader>\r\n                {/* <BasicInfor report={data[dataKey as keyof Object].report} /> */}\r\n                <StudentsList\r\n                    type={type}\r\n                    report={data[dataKey as keyof Object].report}\r\n                    filter={filter}\r\n                    setFilter={setFilter}\r\n                    students={data[dataKey as keyof Object].students}\r\n                    removeStudents={removeStudents}\r\n                    addStudents={addStudents}\r\n                    markComp={markComp}\r\n                />\r\n            </div>\r\n        )\r\n    }\r\n    return null\r\n}\r\nexport default SingleAttReport","import React from 'react'\r\nimport {\r\n    Form,\r\n    Input,\r\n    Button,\r\n    message\r\n} from 'antd'\r\nimport {\r\n    gql,\r\n    useMutation\r\n} from '@apollo/client'\r\n\r\nconst CHANGE_PWD = gql `\r\n    mutation changePwd($currentPwd: String!, $newPwd: String!, $confirmNewPwd: String!) {\r\n        changePwd(currentPwd: $currentPwd, newPwd: $newPwd, confirmNewPwd: $confirmNewPwd)\r\n    }\r\n`\r\n\r\nconst PasswordForm = () => {\r\n    const [form] = Form.useForm()\r\n    const [changePwd, { loading }] = useMutation(CHANGE_PWD)\r\n    const onChange = async () => {\r\n        const { currentPwd, newPwd, confirmNewPwd} = form.getFieldsValue()\r\n        if (!currentPwd || !newPwd || !confirmNewPwd) {\r\n            message.error('Vui lòng điền đầy đủ thông tin')\r\n            return\r\n        }\r\n        try {\r\n            await changePwd({\r\n                variables: {\r\n                    currentPwd,\r\n                    newPwd,\r\n                    confirmNewPwd\r\n                }\r\n            })\r\n            message.success('Đổi mật khẩu thành công')\r\n            form.resetFields()\r\n        } catch (error) {\r\n            message.error('Đã có lỗi xẩy ra, vui lòng kiểm tra thông tin')\r\n            // return\r\n        }\r\n    }\r\n    return (\r\n        <Form form={form} labelCol={{span: 8}} wrapperCol={{ span: 16}}>\r\n            <Form.Item label=\"Mật khẩu cũ\" rules={[{required: true, message: 'Bắt buộc phải điền'}]} name=\"currentPwd\">\r\n                <Input.Password />\r\n            </Form.Item>\r\n            <Form.Item label=\"Mật khẩu mới\" rules={[{required: true, message: 'Bắt buộc phải điền'}]} name=\"newPwd\">\r\n                <Input.Password />\r\n            </Form.Item>\r\n            <Form.Item label=\"Nhập lại mật khẩu mới\" rules={[{required: true, message: 'Bắt buộc phải điền'}]} name=\"confirmNewPwd\">\r\n                <Input.Password />\r\n            </Form.Item>\r\n            <Button\r\n                onClick={() => onChange()}\r\n                type=\"primary\"\r\n                loading={loading}\r\n            >\r\n                Đổi mật khẩu\r\n            </Button>\r\n        </Form>\r\n    )\r\n}\r\nexport default PasswordForm","import React from 'react'\r\nimport {\r\n    PageHeader,\r\n    Row,\r\n    Col\r\n} from 'antd'\r\n// import {\r\n//     useAuth\r\n// } from '../../../context/AuthenticationContext'\r\nimport PwdForm from './ChangePwdForm'\r\n\r\nconst Profile = () => {\r\n    // const { getUser } = useAuth()\r\n    // const user = getUser()\r\n    return (\r\n        <Row justify=\"center\">\r\n            <Col xs={24} sm={24} md={12} lg={8} style={{ textAlign: 'right'}}>\r\n                <PageHeader title=\"Đổi mật khẩu\" />\r\n                <PwdForm />\r\n            </Col>\r\n        </Row>\r\n    )\r\n}\r\nexport default Profile","import React from 'react'\r\nimport {\r\n    Button,\r\n    message,\r\n    Modal,\r\n    Space,\r\n    Table\r\n} from 'antd'\r\nimport { DeleteOutlined, LockOutlined } from '@ant-design/icons'\r\nimport { Link } from 'react-router-dom'\r\n\r\ntype Ctype = {\r\n    users: Record<string,any>[]\r\n    deleteUser: (params: any) => void\r\n}\r\nconst roles:Record<string,string> = {\r\n    'TEACHER': 'Giáo Viên',\r\n    'ADMIN': 'NV P.Đào Tạo',\r\n    'FINANCE': 'Kế toán',\r\n    'MANAGER': 'Quản lý',\r\n    'SUPER_ADMIN': 'Quản trị viên',\r\n}\r\nconst UsersList:React.FC<Ctype> = ({\r\n    users,\r\n    deleteUser\r\n}) => {\r\n    const [confirmModal, toggleConfirmModal] = React.useState(false)\r\n    const [deleting, toggleDeleting] = React.useState(false)\r\n    const confirmDelete = async (name: string,_id: string) => {\r\n        Modal.confirm({\r\n            title:'Xóa tài khoản người dùng',\r\n            content: `Bạn có muốn khóa tài khoản $Ơname`,\r\n            visible: confirmModal,\r\n            onCancel: () => toggleConfirmModal(false),\r\n            onOk: async () => {\r\n                try {\r\n                    toggleDeleting(true)\r\n                    await deleteUser({\r\n                        variables: {\r\n                            _id\r\n                        }\r\n                    })\r\n                    message.success(\"Tài khoản đã được xóa\")\r\n                    toggleDeleting(false)\r\n                } catch (error) {\r\n                    message.error('Không thể xóa được tài khoản')\r\n                }\r\n            },\r\n            okButtonProps: {\r\n                danger: true,\r\n                loading: deleting\r\n            }\r\n        })\r\n    }\r\n    const columns = [\r\n        {\r\n            title: \"Tên\",\r\n            dataIndex: 'name',\r\n            render: (text: string, record: any) => {\r\n                return (\r\n                    <Space>\r\n                        {record.disabled && <LockOutlined style={{ color: 'red'}} />}\r\n                        <Link to={`/users/${record._id}`}>\r\n                            {text}\r\n                        </Link>\r\n                    </Space>\r\n                )\r\n            }\r\n        },\r\n        {\r\n            title: 'Email/phone',\r\n            dataIndex: 'email'\r\n        },\r\n        {\r\n            title: 'Vai trò / quyền',\r\n            dataIndex: 'role',\r\n            render: (text: string) => <span>{roles[text]}</span>\r\n        },\r\n        {\r\n            title: 'Xóa',\r\n            render: (_text: string, record: any) => <Button onClick={() => confirmDelete(record.name, record._id)} icon={<DeleteOutlined />} danger type=\"text\" />\r\n        }\r\n    ]\r\n    return (\r\n        <Table\r\n            dataSource={users}\r\n            columns ={columns}\r\n        />\r\n    )\r\n}\r\n\r\nexport default UsersList","import React from 'react'\r\nimport {\r\n    Modal,\r\n    Form,\r\n    Input,\r\n    Select\r\n} from 'antd'\r\n\r\ntype MType = {\r\n    visible: boolean\r\n    onCancel: () => void\r\n    onOk: () => void\r\n    createU: (user: Record<string,any>) => void\r\n}\r\n\r\nexport const roles = {\r\n    'TEACHER': 'Giáo viên',\r\n    'ADMIN': 'Đào tạo',\r\n    'FINANCE': 'Kế toán',\r\n    'MANAGER': 'Quản lý - Giám đốc',\r\n    'SUPER_ADMIN': 'Quạn trị hệ thống'\r\n}\r\nconst { Option } = Select\r\nconst CreateUserModal:React.FC<MType> = ({\r\n    visible,\r\n    onCancel,\r\n    onOk,\r\n    createU\r\n}) => {\r\n    const [form] = Form.useForm()\r\n    const [loading, toggleLoading] = React.useState(false)\r\n    const createUser = async () => {\r\n        toggleLoading(true)\r\n        const data = form.getFieldsValue()\r\n        await createU(data)\r\n        toggleLoading(false)\r\n    }\r\n    return (\r\n        <Modal\r\n            visible={visible}\r\n            onCancel={onCancel}\r\n            onOk={createUser}\r\n            title=\"Tạo người dùng mới\"\r\n            okButtonProps={{ loading }}\r\n        >\r\n            <Form form={form} labelCol={{span: 8}} wrapperCol={{span: 16}}>\r\n                <Form.Item label=\"Tên người dùng\" name=\"name\" rules={[{required: true, message: 'Thông tin bắt buộc'}]}>\r\n                    <Input />\r\n                </Form.Item>\r\n                <Form.Item label=\"Email/SDT\" name=\"email\" rules={[{ required: true, message: 'Thông tin bắt buộc' }]}>\r\n                    <Input />\r\n                </Form.Item>\r\n                <Form.Item label=\"Mật khẩu\" name=\"password\" rules={[{ required: true, message: 'Thông tin bắt buộc' }]}>\r\n                    <Input.Password />\r\n                </Form.Item>\r\n                <Form.Item label=\"Nhập lại mật khẩu\" name=\"confirmPassword\" rules={[{ required: true, message: 'Thông tin bắt buộc' }]}>\r\n                    <Input.Password />\r\n                </Form.Item>\r\n                <Form.Item label=\"Vai trò, chức năng\" name=\"role\" rules={[{ required: true, message: 'Thông tin bắt buộc' }]}>\r\n                    <Select>\r\n                        {Object.keys(roles).map(k => (\r\n                            <Option key={k} value={k}>{roles[k as keyof Object]}</Option>\r\n                        ))}\r\n                    </Select>\r\n                </Form.Item>\r\n            </Form>\r\n        </Modal>\r\n    )\r\n}\r\nexport default CreateUserModal","import React from 'react'\r\nimport {\r\n    Modal,\r\n    Form,\r\n    Input,\r\n    Select\r\n} from 'antd'\r\nimport {\r\n    roles\r\n} from './CreateUserModal'\r\n\r\nconst { Option } = Select\r\n\r\ntype MType = {\r\n    visible: boolean\r\n    onCancel: () => void\r\n    onOk?: () => void\r\n    filter?: Record<string,any>\r\n    setFilter: (filter: Record<string,any>) => void\r\n}\r\n\r\nconst FilterModal:React.FC<MType> =({\r\n    visible,\r\n    onCancel,\r\n    onOk,\r\n    filter,\r\n    setFilter\r\n}) => {\r\n    const [form] = Form.useForm()\r\n    const confirmFilter = () => {\r\n        setFilter(form.getFieldsValue())\r\n        onCancel()\r\n    }\r\n    return (\r\n        <Modal\r\n            visible={visible}\r\n            onCancel={onCancel}\r\n            onOk={confirmFilter}\r\n            title=\"Tìm kiếm người dùng\"\r\n        >\r\n            <Form form={form} labelCol={{ span: 6}} wrapperCol={{ span: 18}}>\r\n                <Form.Item name=\"name\" label=\"Tên người dùng\">\r\n                    <Input />\r\n                </Form.Item>\r\n                <Form.Item name=\"email\" label=\"Email / SDT\">\r\n                    <Input />\r\n                </Form.Item>\r\n                <Form.Item name=\"role\" label=\"Vai trò\">\r\n                    <Select>\r\n                        {Object.keys(roles).map(k => (\r\n                            <Option key={k} value={k}>{roles[k as keyof Object]}</Option>\r\n                        ))}\r\n                    </Select>\r\n                </Form.Item>\r\n            </Form>\r\n        </Modal>\r\n    )\r\n}\r\n\r\nexport default FilterModal","import React from 'react'\r\nimport {\r\n    Button,\r\n    message,\r\n    PageHeader,\r\n    Tooltip\r\n} from 'antd'\r\nimport { CloseOutlined, PlusOutlined, SearchOutlined } from '@ant-design/icons'\r\nimport CreateUserModal from './CreateUserModal'\r\nimport FilterModal from './FilterModal'\r\n\r\ntype CType = {\r\n    createUser: (user: Record<string,any>) => void\r\n    setFilter: (filter: Record<string,any>) => void\r\n    filter: Record<string, any>\r\n}\r\n\r\nconst SettingHeader:React.FC<CType> = ({\r\n    createUser,\r\n    setFilter,\r\n    filter\r\n}) => {\r\n    const [createModal, toggleCreateModal] = React.useState(false)\r\n    const [filterModal, toggleFilterModal] = React.useState(false)\r\n    const createU = async (user: Record<string,any>) => {\r\n        try {\r\n            await createUser({\r\n                variables: {\r\n                    userInput: user\r\n                }\r\n            })\r\n            message.success('Tạo người dùng thành công')\r\n            toggleCreateModal(false)\r\n        } catch (e) {\r\n            message.error('Không thể tạo người dùng mới. Vui lòng kiểm tra lại thông tin')\r\n        }\r\n    }\r\n\r\n    const isFilterEmpty = () => {\r\n        return Object.values(filter).every(f => f === null)\r\n    }\r\n\r\n    const onFilterClick = () => {\r\n        if (isFilterEmpty()) {\r\n            toggleFilterModal(true)\r\n        } else {\r\n            setFilter({\r\n                name: null,\r\n                email: null,\r\n                role: null\r\n            })\r\n        }\r\n    }\r\n    return (\r\n        <div>\r\n            <PageHeader\r\n                title=\"Danh sách người dùng\"\r\n                extra={[\r\n                    <Tooltip title=\"Thêm người dùng\" key=\"1\">\r\n                        <Button onClick={() => toggleCreateModal(true)} type=\"primary\" shape=\"round\" icon={<PlusOutlined />} />\r\n                    </Tooltip>,\r\n                    <Tooltip title={isFilterEmpty() ? 'Tìm kiếm': 'Bỏ tìm kiếm'} key=\"2\">\r\n                        <Button\r\n                            onClick={() => onFilterClick()}\r\n                            type=\"text\"\r\n                            icon={isFilterEmpty() ? <SearchOutlined /> : <CloseOutlined />}\r\n                        />\r\n                    </Tooltip>\r\n                ]} \r\n                />\r\n            <CreateUserModal\r\n                createU={createU}\r\n                visible={createModal}\r\n                onCancel={() => toggleCreateModal(false)}\r\n                onOk={() => toggleCreateModal(false)}\r\n            />\r\n            <FilterModal\r\n                visible={filterModal}\r\n                onCancel={() => toggleFilterModal(false)}\r\n                setFilter={setFilter}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SettingHeader","import React from 'react'\r\nimport {\r\n    gql,\r\n    useLazyQuery,\r\n    useMutation\r\n} from '@apollo/client'\r\nimport UsersList from './MainComps/UsersList'\r\nimport LoadinCenter from '../../common/LoadingCenter'\r\nimport Header from './MainComps/Header'\r\n// import { Modal } from 'antd'\r\n\r\nconst LOAD_USERS = gql `\r\n    query loadUsers($filter: UserFilter, $page: Int, $limit: Int) {\r\n        loadUsers(filter: $filter, page: $page, limit: $limit) {\r\n            _id\r\n            name\r\n            email\r\n            role\r\n            disabled\r\n            shouldChangePwd\r\n        }\r\n    }\r\n`\r\nconst CREATE_USER = gql `\r\n    mutation createUser($userInput: UserInput) {\r\n        createUser(userInput: $userInput) {\r\n            name\r\n        }\r\n    }\r\n`\r\nconst DELETE_USER = gql`\r\n    mutation deleteUser($_id: String!) {\r\n        deleteUser(_id: $_id)\r\n    }\r\n`\r\nconst UserMgt = () => {\r\n    const [filter, setFilter] = React.useState<Record<string,any>>({\r\n        name: null,\r\n        email: null,\r\n        role: null\r\n    })\r\n    const limit = 100\r\n    const [loadUsers, { loading, data: loadUsersR }] = useLazyQuery(LOAD_USERS)\r\n    const [createUser] = useMutation(CREATE_USER, {refetchQueries: [LOAD_USERS]})\r\n    const [deleteUser] = useMutation(DELETE_USER, { refetchQueries: [LOAD_USERS]})\r\n\r\n    React.useEffect(() => {\r\n        const load = async () => {\r\n            await loadUsers({\r\n                variables: {\r\n                    filter,\r\n                    page: 1,\r\n                    limit\r\n                }\r\n            })\r\n        }\r\n        load()\r\n    }, [loadUsers, filter])\r\n\r\n    return (\r\n        <div>\r\n            <Header\r\n                filter={filter}\r\n                createUser={createUser}\r\n                setFilter={setFilter}\r\n            />\r\n            {loading && (\r\n                <LoadinCenter />\r\n            )}\r\n            {!loading && loadUsersR && (\r\n                <UsersList\r\n                    users={loadUsersR.loadUsers}\r\n                    deleteUser={deleteUser}\r\n                />\r\n            )}\r\n            \r\n        </div>\r\n    )\r\n}\r\nexport default UserMgt","import React from 'react'\r\nimport {\r\n    Descriptions\r\n} from 'antd'\r\nimport moment from 'moment'\r\n\r\nconst roles: Record<string, string> = {\r\n    'TEACHER': 'Giáo Viên',\r\n    'ADMIN': 'NV P.Đào Tạo',\r\n    'FINANCE': 'Kế toán',\r\n    'MANAGER': 'Quản lý',\r\n    'SUPER_ADMIN': 'Quản trị viên',\r\n}\r\n\r\ntype CType = {\r\n    user: any\r\n}\r\nconst BasicInfor: React.FC<CType> = ({\r\n    user\r\n}) => {\r\n    return (\r\n        <Descriptions title=\"Thông tin người dùng\">\r\n            <Descriptions.Item label=\"Tên\">\r\n                <strong>{user.name}</strong>\r\n            </Descriptions.Item>\r\n            <Descriptions.Item label=\"Tên đăng nhập/ email/ SDT\">\r\n                <strong>{user.email}</strong>\r\n            </Descriptions.Item>\r\n            <Descriptions.Item label=\"Vai trò\">\r\n                <strong>{roles[user.role]}</strong>\r\n            </Descriptions.Item>\r\n            <Descriptions.Item label=\"Trạng thái\">\r\n                <strong>{user.disabled ? 'Đã khóa' : 'Đang hoạt động'}</strong>\r\n            </Descriptions.Item>\r\n            <Descriptions.Item label=\"Ngày tạo\">\r\n                <strong>{moment(parseFloat(user.created)).format('DD/MM/YYYY')}</strong>\r\n            </Descriptions.Item>\r\n        </Descriptions>\r\n    )\r\n}\r\nexport default BasicInfor ","import React from 'react'\r\nimport {\r\n    Modal,\r\n    Form,\r\n    Input\r\n} from 'antd'\r\n\r\ntype MType = {\r\n    visible: boolean\r\n    onCancel: () => void\r\n    onOk: (password: string, confirmPassword: string) => void\r\n}\r\n\r\nconst ResetPwdModal:React.FC<MType> = ({\r\n    visible,\r\n    onCancel,\r\n    onOk\r\n}) => {\r\n    const [form] = Form.useForm()\r\n    const [loading, toggleLoading] = React.useState(false)\r\n    const setPwd = async () => {\r\n        toggleLoading(true)\r\n        const {password, confirmPassword}  = form.getFieldsValue()\r\n        await onOk(password, confirmPassword)\r\n        toggleLoading(false)\r\n    }\r\n    return (\r\n        <Modal\r\n            visible={visible}\r\n            onCancel={onCancel}\r\n            title=\"Đặt lại mật khẩu người dùng\"\r\n            okButtonProps={{ loading}}\r\n            onOk={() => setPwd()}\r\n        >\r\n            <Form form={form} labelCol={{ span: 8}} wrapperCol={{ span: 16}}>\r\n                <Form.Item label=\"Mật khẩu mới\" name=\"password\" rules={[{required: true, message: 'Bắt buộc phải có'}, {min: 6, message: 'Tối thiểu 6 ký tự'}]}>\r\n                    <Input.Password />\r\n                </Form.Item>\r\n                <Form.Item label=\"Nhập lai Mật khẩu mới\" name=\"confirmPassword\" rules={[{required: true, message: 'Bắt buộc phải có'}, {min: 6, message: 'Tối thiểu 6 ký tự'}]}>\r\n                    <Input.Password />\r\n                </Form.Item>\r\n            </Form>\r\n        </Modal>\r\n    )\r\n}\r\n\r\nexport default ResetPwdModal","import React from 'react'\r\nimport {\r\n    Button,\r\n    PageHeader,\r\n    Tooltip,\r\n    Modal,\r\n    message\r\n} from 'antd'\r\nimport {\r\n    useParams,\r\n    useHistory\r\n} from 'react-router-dom'\r\nimport {\r\n    gql,\r\n    useLazyQuery,\r\n    useMutation\r\n} from '@apollo/client'\r\nimport LoadinCenter from '../../common/LoadingCenter'\r\nimport UserInfo from './UserInfo'\r\nimport { KeyOutlined, LockOutlined, UnlockOutlined } from '@ant-design/icons'\r\nimport ResetPwdModal from './ResetPwdModal'\r\n\r\nconst LOAD_USER = gql `\r\n    query loadUser($_id: String!) {\r\n        loadUser(_id: $_id) {\r\n            _id\r\n            disabled\r\n            name\r\n            email\r\n            role\r\n            createdBy\r\n            created\r\n            profile {\r\n                avatar\r\n            }\r\n            shouldChangePwd\r\n        }\r\n    }\r\n`\r\nconst LOCK_USER = gql `\r\n    mutation disableUser($_id: String!, $disabled: Boolean) {\r\n        disableUser(_id: $_id, disabled: $disabled) {\r\n             _id\r\n            disabled\r\n            name\r\n            email\r\n            role\r\n            createdBy\r\n            created\r\n            profile {\r\n                avatar\r\n            }\r\n            shouldChangePwd\r\n        }\r\n    }\r\n`\r\nconst RESET_PWD = gql `\r\n    mutation setPwd($_id: String!, $password: String!, $confirmPassword: String!) {\r\n        setPwd(_id: $_id, password: $password, confirmPassword: $confirmPassword) {\r\n             _id\r\n            disabled\r\n            name\r\n            email\r\n            role\r\n            createdBy\r\n            created\r\n            profile {\r\n                avatar\r\n            }\r\n            shouldChangePwd\r\n        }\r\n    }\r\n`\r\n\r\nconst SingleUser = () => {\r\n    const params:any = useParams()\r\n    const { id } = params\r\n    const history = useHistory()\r\n    const [loadUser, { loading, data }] = useLazyQuery(LOAD_USER)\r\n    const [disableUser] = useMutation(LOCK_USER)\r\n    const [resetPwd] = useMutation(RESET_PWD)\r\n    const [confirmModal, toggleConfirmModal] = React.useState(false)\r\n    const [pwdModal, togglePwdModal] = React.useState(false)\r\n    // const [deleteUser] = useMutation(DELETE_USER, { refetchQueries: [LOAD_USER]})\r\n    \r\n    React.useEffect(() => {\r\n        const load = async () => {\r\n            await loadUser({\r\n                variables: {\r\n                    _id: id\r\n                }\r\n            })\r\n        }\r\n        load()\r\n    }, [id, loadUser])\r\n\r\n    const confirmLock = async (disabled: boolean, title: string, content: string) => {\r\n        Modal.confirm({\r\n            title,\r\n            content,\r\n            visible: confirmModal,\r\n            onCancel: () => toggleConfirmModal(false),\r\n            onOk: () => {\r\n                disableUser({\r\n                    variables: {\r\n                        _id: data.loadUser._id,\r\n                        disabled\r\n                    }\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    const updatePwd = async (password: string, confirmPassword: string) => {\r\n        try {\r\n            await resetPwd({\r\n                variables: {\r\n                    _id: id,\r\n                    password,\r\n                    confirmPassword\r\n                }\r\n            })\r\n            message.success('Đặt lại mật khẩu thành công')\r\n            togglePwdModal(false)\r\n        } catch (error) {\r\n            message.error('Đặt lại mật khẩu không thành công')\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            {loading && (\r\n                <LoadinCenter />\r\n            )}\r\n            {data && data.loadUser && (\r\n                <div>\r\n                    <PageHeader\r\n                        onBack={() => history.push('/users')}\r\n                        title=\"Thông tin người dùng\"\r\n                        extra={[\r\n                            <Tooltip title=\"Khóa tài khoản\" id=\"1\">\r\n                                {!data.loadUser.disabled ?\r\n                                    <Button onClick={() => confirmLock(!data.loadUser.disabled, 'Khóa tài khoản', `Bạn có muốn khóa tài khoản người dùng ${data.loadUser.name} `)} danger type=\"text\" icon={<LockOutlined />} />\r\n                                    :\r\n                                    <Button onClick={() => confirmLock(!data.loadUser.disabled, 'Mở khóa tài khoản', `Bạn có muốn mở khóa tài khoản người dùng ${data.loadUser.name} `)} type=\"text\" icon={<UnlockOutlined />} />\r\n                                }\r\n                            </Tooltip>,\r\n                            <Tooltip title=\"Đặt lại mật khẩu\" id=\"2\">\r\n                                <Button onClick={() => togglePwdModal(true)} type=\"text\" icon={<KeyOutlined />} />\r\n                            </Tooltip>\r\n                        ]}\r\n                    />\r\n                    <UserInfo\r\n                        user={data.loadUser}\r\n                    />\r\n                    <ResetPwdModal\r\n                        visible={pwdModal}\r\n                        onCancel={() => togglePwdModal(false)}\r\n                        onOk={updatePwd}\r\n                    />\r\n                </div>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\nexport default SingleUser","import React from 'react'\r\nimport {\r\n    Table\r\n} from 'antd'\r\nimport moment from 'moment'\r\nimport {\r\n    numberWithCommas\r\n} from '../../../../Utils/math'\r\nimport { Link } from 'react-router-dom'\r\n\r\nconst reasons: Record<string,any> = {\r\n    'TT1': 'Thanh toán tiền đợt 1',\r\n    'TT2': 'Thanh toán tiền đợt 2',\r\n    'TLLT': 'Thanh toán tiền thi lại Lý thuyết',\r\n    'TLSH': 'Thanh toán tiền thi lại Sa hình',\r\n    'TLDT': \"Thanh toán tiền thi lại Đường trường\",\r\n    'OTHER': 'Thanh toán tiền khác',\r\n    'REFUND': \"Hoàn tiền - rút hồ sơ\"\r\n}\r\n\r\ntype RLType = {\r\n    records: {\r\n        totalRecords: number\r\n        totalAmount: number\r\n        records: Record<string,any>[]\r\n    }\r\n    filter: Record<string,any>\r\n    setFilter: (filter: Record<string,any>) => void\r\n}\r\n\r\nconst RecordsList:React.FC<RLType> = ({\r\n    records,\r\n    filter,\r\n    setFilter\r\n}) => {\r\n    const columns = [\r\n        {\r\n            title: 'Mã hồ sơ',\r\n            dataIndex: ['student','randomId'],\r\n        },\r\n        {\r\n            title: 'Tên học viên',\r\n            dataIndex: ['student','ten'],\r\n            render: (text: string, record: any) => {\r\n                return (\r\n                    <Link to={`/std/${record.student.randomId}`}>{text}</Link>\r\n                )\r\n            }\r\n        },\r\n        {\r\n            title: 'Số điện thoại',\r\n            dataIndex: ['student', 'mobile']\r\n        },\r\n        {\r\n            title: 'Ngày',\r\n            dataIndex: 'createdAt',\r\n            render: (text: string) => <span>{moment(parseFloat(text)).format('DD/MM/YYYY')}</span>\r\n        },\r\n        {\r\n            title: 'Tiền',\r\n            dataIndex: 'amount',\r\n            render: (text: string) => <strong style={{ color: parseFloat(text) < 0 ? 'red': 'inherit'}}>{numberWithCommas(text)}</strong>\r\n        },\r\n        {\r\n            title: 'Lý do',\r\n            dataIndex: 'reason',\r\n            render: (text: string) => <span>{reasons[text]}</span>\r\n        }\r\n    ]\r\n    return (\r\n        <div>\r\n            <Table\r\n                columns={columns}\r\n                dataSource={records.records}\r\n                pagination={{\r\n                    pageSize:100,\r\n                    total: records.totalRecords,\r\n                    onChange: (page: number) => {\r\n                        setFilter({\r\n                            ...filter,\r\n                            page\r\n                        })\r\n                    }\r\n                }}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default RecordsList","import React from 'react'\r\nimport {\r\n    PageHeader,\r\n    DatePicker,\r\n    Button,\r\n    \r\n} from 'antd'\r\nimport moment, { Moment } from 'moment'\r\n\r\nconst { RangePicker } = DatePicker\r\n\r\ntype HType = {\r\n    filter: Record<string, any>\r\n    setFilter: (filter: Record<string, any>) => void\r\n    loading: boolean\r\n}\r\n\r\nconst RecordHeader:React.FC<HType> = ({\r\n    filter,\r\n    setFilter,\r\n    loading\r\n}) => {\r\n    const [start, setStart] = React.useState<Moment|null>(null)\r\n    const [end, setEnd] = React.useState<Moment|null>(null)\r\n\r\n    const onDateChange = (d: any) => {\r\n        const [start, end] = d\r\n        // console.log('start', start)\r\n        setStart(start)\r\n        // console.log('end', end)\r\n        setEnd(end)\r\n    }\r\n\r\n    const onConfirm = () => {\r\n        // console.log(open)\r\n        // console.log('start:', start)\r\n        // console.log('end:', end)\r\n        setFilter({\r\n            ...filter,\r\n            start: start?.startOf('day'),\r\n            end: end?.endOf('day')\r\n        })\r\n    }\r\n    return (\r\n        <PageHeader\r\n            title=\"Báo cáo thu chi\"\r\n            extra={[\r\n                <span key=\"_label\">Chọn khoảng thời gian</span>,\r\n                <RangePicker\r\n                    key=\"_rp\"\r\n                    format=\"DD/MM/YYYY\"\r\n                    defaultPickerValue={[moment().startOf('month'), moment().endOf('month')]}\r\n                    value={[start, end]}\r\n                    onChange={onDateChange}\r\n                    // onOpenChange={onConfirm}\r\n                />,\r\n                <Button loading={loading} type=\"primary\" onClick={onConfirm}>OK</Button>\r\n            ]}\r\n        />\r\n    )\r\n}\r\nexport default RecordHeader","import React from 'react'\r\nimport {\r\n    Descriptions,\r\n    Alert\r\n} from 'antd'\r\nimport moment from 'moment'\r\nimport {\r\n    numberWithCommas\r\n} from '../../../../Utils/math'\r\n\r\ntype OType = {\r\n    range: {\r\n        start: any,\r\n        end: any\r\n    },\r\n    totalAmount: number\r\n    totalRecords: number\r\n}\r\nconst Overview:React.FC<OType>  = ({\r\n    range,\r\n    totalAmount,\r\n    totalRecords\r\n}) => {\r\n    return (\r\n        <Alert\r\n            closable\r\n            type=\"info\"\r\n            message={(\r\n                <Descriptions title=\"Tổng thể\" column={4}>\r\n                    <Descriptions.Item label=\"Từ\">{moment(range.start).format('DD/MM/YYYY')}</Descriptions.Item>\r\n                    <Descriptions.Item label=\"Đến\">{moment(range.end).format('DD/MM/YYYY')}</Descriptions.Item>\r\n                    <Descriptions.Item label=\"Số lần thu/chi\">{totalRecords}</Descriptions.Item>\r\n                    <Descriptions.Item label=\"Số Tiền\">{`${numberWithCommas(totalAmount)} VNĐ`}</Descriptions.Item>\r\n                </Descriptions>\r\n            )}\r\n        />\r\n    )\r\n}\r\n\r\nexport default Overview","import React from 'react'\r\nimport {\r\n    PageHeader\r\n} from 'antd'\r\nimport moment from 'moment'\r\nimport {\r\n    useLazyQuery\r\n} from '@apollo/client'\r\nimport LoadinCenter from '../../common/LoadingCenter'\r\nimport {\r\n    LOAD_RECORDS\r\n} from '../../common/ClientQueries'\r\nimport RecordsList from './comps/RecordsList'\r\nimport RecordHeader from './comps/RecordsHeader'\r\nimport Overview from './comps/Overview'\r\n\r\n\r\nconst Report = () => {\r\n    const limit = 100\r\n    const [loadRecords, { loading, data }] = useLazyQuery(LOAD_RECORDS)\r\n    const [filter, setFilter] = React.useState<Record<string,any>>({\r\n        start: moment().startOf('month'),\r\n        end: moment().endOf('month'),\r\n        page: 1,\r\n        limit,\r\n        ten: '',\r\n        randomId: ''\r\n    })\r\n\r\n    React.useEffect(() => {\r\n        const load = async () => {\r\n            await loadRecords({\r\n                variables: {\r\n                    filter\r\n                }\r\n            })\r\n        }\r\n        load()\r\n    }, [loadRecords, filter])\r\n    return (\r\n        <div>\r\n            <RecordHeader\r\n                filter={filter}\r\n                setFilter={setFilter}\r\n                loading={loading}\r\n            />\r\n            {/* {loading && (<LoadinCenter />)} */}\r\n            {!loading && data && data.loadRecords && (\r\n                <div>\r\n                    <Overview\r\n                        range={{\r\n                            start: filter.start,\r\n                            end: filter.end\r\n                        }}\r\n                        totalAmount={data.loadRecords.totalAmount}\r\n                        totalRecords={data.loadRecords.totalRecords}\r\n                    />\r\n                    <RecordsList\r\n                        records={data.loadRecords}\r\n                        filter={filter}\r\n                        setFilter={setFilter}\r\n                    />\r\n                </div>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\nexport default Report","import React from 'react'\r\nimport {\r\n  Layout,\r\n  Menu,\r\n  Button,\r\n  Dropdown\r\n} from 'antd'\r\nimport {\r\n  LogoutOutlined,\r\n  MoneyCollectOutlined,\r\n  OrderedListOutlined,\r\n  SettingOutlined,\r\n  SnippetsOutlined,\r\n  SolutionOutlined,\r\n  UsergroupAddOutlined,\r\n  UserOutlined\r\n} from '@ant-design/icons'\r\nimport {\r\n  useLazyQuery,\r\n  gql\r\n} from '@apollo/client'\r\nimport {\r\n  User,\r\n  useAuth\r\n} from '../../context/AuthenticationContext'\r\nimport Main from './Main'\r\nimport {\r\n  useHistory,\r\n  Route,\r\n  Switch,\r\n  Link,\r\n  // useLocation\r\n} from 'react-router-dom'\r\nimport './home.css'\r\nimport {\r\n  LOAD_A_REPORT,\r\n  CREATE_A_REPORT,\r\n  APPROVE_R1,\r\n  MOVE_TO_R1,\r\n  REMOVE_FROM_REPORT,\r\n  LOAD_SINGLE_REPORT,\r\n  MARK_COMPLETED,\r\n  LOAD_B_REPORTS,\r\n  CREATE_BREPORT,\r\n  LOAD_SINGLE_B_REPORT,\r\n  MOVE_TO_R2,\r\n  APPROVE_B_REPORT,\r\n} from '../common/ClientQueries'\r\nimport SingleStudent from './SingleStudent'\r\nimport ReportOnes from './ReportOnes'\r\nimport SingleAttReport from './SingleReportOne'\r\nimport Profile from './Profile'\r\nimport UserMgt from './UserMgt'\r\nimport SingleUser from './SingleUser'\r\nimport Report from './Report'\r\n\r\nconst {\r\n  // Sider,\r\n  Content,\r\n  Header\r\n} = Layout\r\n\r\nconst GET_USER = gql`\r\n  query me {\r\n    me{\r\n      _id\r\n      role\r\n      email\r\n      name\r\n      shouldChangePwd\r\n      profile {\r\n        avatar\r\n      }\r\n    }\r\n  }\r\n`\r\n// \r\nfunction Home() {\r\n  console.log('re-rendering')\r\n  const { setUser } = useAuth()\r\n  const history = useHistory()\r\n  const [loadUser, { loading, data, error }] = useLazyQuery(GET_USER, { onCompleted: (data: any) => {\r\n    const { me } = data\r\n    setUser(me as User)\r\n  }})\r\n  // const [sider, setSider] = React.useState(false);\r\n  const { logout } = useAuth()\r\n  // const location = useLocation()\r\n\r\n  React.useEffect(() => {\r\n    const load = async () => {\r\n      await  loadUser()\r\n      // if (data) {\r\n      //   const { me } = data\r\n      //   setUser(me as User)\r\n      // }\r\n    }\r\n    load()\r\n  }, [loadUser, setUser])\r\n  \r\n  const handleLogout = () => {\r\n    logout()\r\n    history.push('/login')\r\n  }\r\n  \r\n  // const onCollapse = (collapse: boolean) => setSider(collapse)\r\n\r\n  const menu = (\r\n    <Menu theme=\"dark\">\r\n      <Menu.Item icon={<UserOutlined />}>\r\n        <Link to=\"/profile\">\r\n          Đổi mật khẩu\r\n        </Link>\r\n      </Menu.Item>\r\n      <Menu.Item icon={<LogoutOutlined />} onClick={() => handleLogout()}>Đăng xuất</Menu.Item>\r\n    </Menu>\r\n  )\r\n  \r\n  if (error) {\r\n    history.push('/login')\r\n  }\r\n  if (loading) {\r\n    return (\r\n      <span>loading...</span>\r\n    )\r\n  }\r\n  if (!loading && !error && data) {\r\n    return (\r\n      <Layout className=\"homeContainer\">\r\n        <Header className=\"homeHeader\">\r\n          <div  style={{ flexGrow: 1 }} >\r\n            <Menu style={{fontSize: '16px'}} theme=\"dark\" mode=\"horizontal\">\r\n              <Menu.Item key=\"one\" icon={<SnippetsOutlined style={{fontSize: '16px'}} />}>\r\n                <Link to=\"/\">\r\n                  Hồ sơ\r\n                </Link>\r\n              </Menu.Item>\r\n              {data.me && (data.me.role === 'ADMIN' || data.me.role === 'MANAGER' || data.me.role === 'SUPER_ADMIN') && (\r\n                <Menu.Item key=\"two\" icon={<OrderedListOutlined style={{ fontSize: '16px' }} />}>\r\n                  <Link to=\"/rp1\">\r\n                    Báo cáo 1\r\n                  </Link>\r\n                </Menu.Item>\r\n              )}\r\n              {data.me && (data.me.role === 'ADMIN' || data.me.role === 'MANAGER' || data.me.role === 'SUPER_ADMIN') && (\r\n                <Menu.Item key=\"three\" icon={<SolutionOutlined style={{ fontSize: '16px' }} />}>\r\n                  <Link to=\"/rp2\">\r\n                    Báo cáo 2\r\n                  </Link>\r\n                </Menu.Item>\r\n              )}\r\n              {data.me && (data.me.role === 'SUPER_ADMIN') && (\r\n                <Menu.SubMenu title=\"Hệ thống\" icon={<SettingOutlined />}>\r\n                  <Menu.Item key=\"four\" icon={<UsergroupAddOutlined />}>\r\n                    <Link to=\"/users\">\r\n                      Người dùng\r\n                    </Link>\r\n                  </Menu.Item>\r\n                </Menu.SubMenu>\r\n              )}\r\n              {data.me && (data.me.role === 'MANAGER' || data.me.role === 'FINANCE') && (\r\n                <Menu.Item key=\"_five\" icon={<MoneyCollectOutlined />}>\r\n                  <Link to=\"/report\">\r\n                    Doanh Thu\r\n                  </Link>\r\n                </Menu.Item>\r\n              )}\r\n            </Menu>\r\n          </div>\r\n          <Dropdown trigger={['click']} overlay={menu}>\r\n            <Button shape=\"round\" >{data.me.name}</Button>\r\n          </Dropdown>\r\n        </Header>\r\n        <Content className=\"homeContent\">\r\n          <Switch>\r\n            <Route path=\"/std/:id\" exact>\r\n              <SingleStudent />\r\n            </Route>\r\n            <Route path=\"/rp1\" exact>\r\n              <ReportOnes\r\n                type=\"BC1\"\r\n                title=\"Danh sách báo cáo 1\"\r\n                createQuery={{\r\n                  reportKey: 'loadAReport',\r\n                  query:CREATE_A_REPORT\r\n                }}\r\n                loadQuery={{\r\n                  reportKey: 'loadAReport',\r\n                  query: LOAD_A_REPORT\r\n                }}\r\n              />\r\n            </Route>\r\n            <Route path=\"/rp1/:id\" exact>\r\n              <SingleAttReport\r\n                type=\"BC1\"\r\n                dataKey=\"loadSingleAttReport\"\r\n                loadReport={LOAD_SINGLE_REPORT}\r\n                approveReport={APPROVE_R1}\r\n                markComplete={MARK_COMPLETED}\r\n                addStd={MOVE_TO_R1}\r\n                removeStd={REMOVE_FROM_REPORT}\r\n              />\r\n            </Route>\r\n            <Route path=\"/rp2\" exact>\r\n              <ReportOnes\r\n                  type=\"BC2\"\r\n                  title=\"Danh sách báo cáo 2\"\r\n                  createQuery={{\r\n                  reportKey: 'loadAReports',\r\n                  query: CREATE_BREPORT\r\n                }}\r\n                loadQuery={{\r\n                  reportKey: 'loadBreports',\r\n                  query: LOAD_B_REPORTS\r\n                }}/>\r\n            </Route>\r\n            <Route path=\"/rp2/:id\" exact>\r\n              <SingleAttReport\r\n                type=\"BC2\"\r\n                dataKey=\"loadSingleBReport\"\r\n                loadReport={LOAD_SINGLE_B_REPORT}\r\n                approveReport={APPROVE_B_REPORT}\r\n                markComplete={MARK_COMPLETED}\r\n                addStd={MOVE_TO_R2}\r\n                removeStd={REMOVE_FROM_REPORT}\r\n              />\r\n            </Route>\r\n            <Route path=\"/profile\" exact>\r\n              <Profile />\r\n            </Route>\r\n            <Route path=\"/users\" exact>\r\n              <UserMgt />\r\n            </Route>\r\n            <Route path=\"/users/:id\" exact>\r\n              <SingleUser />\r\n            </Route>\r\n            <Route path=\"/report\" exact>\r\n              <Report />\r\n            </Route>\r\n            <Route path=\"/\">\r\n              <Main />\r\n            </Route>\r\n          </Switch>\r\n        </Content>\r\n      </Layout>\r\n    )\r\n  }\r\n  return null\r\n}\r\n\r\nexport default Home\r\n\r\n","import React from 'react'\r\nimport {\r\n  gql,\r\n  useMutation,\r\n} from '@apollo/client'\r\nimport {\r\n  useAuth\r\n} from '../../context/AuthenticationContext'\r\nimport {\r\n  useHistory,\r\n} from 'react-router-dom'\r\nimport {\r\n  Form,\r\n  Row,\r\n  Col,\r\n  Input,\r\n  Button,\r\n  message\r\n} from 'antd'\r\nimport './LoginForm.css'\r\n\r\nexport const LOGIN = gql`\r\n  mutation login($email: String!, $password: String!) {\r\n    login(email: $email, password: $password) {\r\n      user {\r\n        _id\r\n        role\r\n        email\r\n        name\r\n      }\r\n      token\r\n      tokenExpiration\r\n    }\r\n  }\r\n`\r\n\r\nconst LoginForm = () => {\r\n  const history = useHistory()\r\n  const { setToken } = useAuth()\r\n  // const [passwordVisible, togglePasswordVisible] = React.useState(false)\r\n  const [login, { loading, error }] = useMutation(LOGIN)\r\n  // const handleClickShowPassword = () => togglePasswordVisible(!passwordVisible)\r\n  const [form] = Form.useForm()\r\n  \r\n  const onLogin = async (values: any) => {\r\n    await login({\r\n      variables: {\r\n        ...values\r\n      }\r\n    })\r\n    .then(res => {\r\n      if (!res) {\r\n        message.error('Vui long kiem tra lai sdt/mk')\r\n      }\r\n      if (error) {\r\n        message.error('Đã có lỗi xẩy ra trong quá trình đăng nhập, vui lòng kiểm tra lại thông tin tài khoản')\r\n      }\r\n      const { data: { login: { token } } } = res\r\n      setToken(token)\r\n      history.push('/')\r\n    })\r\n    .catch(err => {\r\n      message.error('Đã có lỗi xẩy ra trong quá trình đăng nhập, vui lòng kiểm tra lại thông tin tài khoản')\r\n    })\r\n  }\r\n  return (\r\n    <Row justify=\"center\">\r\n      <Col xs={24} sm={12} lg={6}>\r\n        <Form onFinish={onLogin} className=\"loginForm\" form={form} layout=\"vertical\">\r\n          <Form.Item label=\"Email/SDT\" name=\"email\">\r\n            <Input />\r\n          </Form.Item>\r\n          <Form.Item name=\"password\" label=\"password\">\r\n            <Input.Password />\r\n          </Form.Item>\r\n          <Form.Item>\r\n            <Button type=\"primary\" loading={loading} htmlType=\"submit\">Login</Button>\r\n          </Form.Item>\r\n        </Form>\r\n      </Col>\r\n    </Row>\r\n  )\r\n}\r\nexport default LoginForm","import React from 'react'\r\nimport LoginForm from './LoginForm'\r\n\r\nfunction Login() {\r\n  return (\r\n    <div data-testid=\"login-container\">\r\n      <LoginForm />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Login\r\n","import React from 'react';\r\n// import logo from './logo.svg';\r\nimport \"antd/dist/antd.css\"\r\nimport './App.css';\r\nimport AuthProvider from './context/AuthenticationContext';\r\nimport {\r\n  BrowserRouter as Router,\r\n  Route,\r\n  Switch\r\n} from 'react-router-dom'\r\nimport ProtectedRoute from './Utils/ProtectedRoute';\r\nimport Home from './components/Home'\r\nimport Login from './components/Login'\r\n\r\nexport interface AState {\r\n  people: {\r\n    name: String,\r\n    age: number,\r\n    url: string,\r\n    note: string\r\n  }[]\r\n}\r\nfunction App() {\r\n  // const [people, setPeople] = React.useState<AState['people']>([])\r\n  return (\r\n    <AuthProvider>\r\n      <Router>\r\n        <Switch>\r\n          <Route path=\"/login\" exact component={Login} />\r\n          <ProtectedRoute path=\"/\">\r\n            <Home />\r\n          </ProtectedRoute>\r\n        </Switch>\r\n      </Router>\r\n    </AuthProvider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import { ApolloClient, InMemoryCache, ApolloLink, from } from '@apollo/client'\r\n// import { createUploadLink } from 'apollo-upload-client'\r\nconst { createUploadLink } = require('apollo-upload-client')\r\n\r\nconst uri = process.env.NODE_ENV === 'development' ? process.env.REACT_APP_DEV_API : process.env.REACT_APP_PROD_API\r\nconst httpLink = new createUploadLink({ uri })\r\n// const httpLink = new createUploadLink()\r\n\r\nconst authMiddleware = new ApolloLink((operation, forward) => {\r\n  operation.setContext(({headers = {} }) => ({\r\n    headers: {\r\n      ...headers,\r\n      'x-token': localStorage.getItem('ACCESS_TOKEN') || null\r\n    }\r\n  }));\r\n  return forward(operation);\r\n});\r\nexport const client = new ApolloClient({\r\n  // uri: 'https://countries-274616.ew.r.appspot.com/',\r\n  // uri: 'http://localhost:3000',\r\n  // headers: {\r\n  //   'x-token': localStorage.getItem('ACCESS_TOKEN') || ''\r\n  cache: new InMemoryCache({\r\n    typePolicies: {\r\n      BasicPurchase: {\r\n        keyFields: ['_id']\r\n      },\r\n      PurchaseList: {\r\n        keyFields: ['__typename']\r\n      }\r\n    }\r\n  }),\r\n  link: from([\r\n    authMiddleware,\r\n    httpLink\r\n  ])\r\n});\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport { ApolloProvider } from '@apollo/client';\r\n\r\nimport {\r\n  client\r\n} from './Utils/ApolloClient'\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <ApolloProvider client={client}>\r\n      <App />\r\n    </ApolloProvider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}